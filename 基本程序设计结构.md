# III. åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„

è¯¦ç»†ä»‹ç»Javaçš„åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„ï¼ŒåŒ…æ‹¬==å˜é‡==ã€==è¿ç®—ç¬¦==ã€==æ§åˆ¶æµ==ç­‰åŸºç¡€å†…å®¹ã€‚ç”±äºä¹‹å‰å·²ç»è®¨è®ºè¿‡æ•°æ®ç±»å‹ï¼Œè¿™é‡Œä¼šé€‚å½“å…³è”ä½†ä¸å†é‡å¤è¯¦ç»†çš„æ•°æ®ç±»å‹ä»‹ç»ã€‚

## Java åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„è¯¦è§£

#### ä¸€ã€[å˜é‡ä¸å¸¸é‡](#variable)
```java
// å˜é‡å£°æ˜ä¸åˆå§‹åŒ–
int age = 25;                 // åŸºæœ¬ç±»å‹å˜é‡
String name = "Alice";        // å¼•ç”¨ç±»å‹å˜é‡
final double PI = 3.14159;    // å¸¸é‡ï¼ˆfinalå…³é”®å­—ï¼‰

// å¤šä¸ªå˜é‡å£°æ˜
int x = 5, y = 10, z = 15;
```

#### äºŒã€[è¿ç®—ç¬¦](#operator)
```java
// 1. ç®—æœ¯è¿ç®—ç¬¦
int sum = 10 + 5;     // 15
int diff = 10 - 5;    // 5
int product = 10 * 5; // 50
int quotient = 10 / 5; // 2
int remainder = 10 % 3; // 1

// 2. å…³ç³»è¿ç®—ç¬¦
boolean isEqual = (10 == 10);   // true
boolean notEqual = (10 != 5);   // true
boolean greater = (10 > 5);     // true

// 3. é€»è¾‘è¿ç®—ç¬¦
boolean andResult = (true && false); // false
boolean orResult = (true || false);  // true
boolean notResult = !true;           // false

// 4. èµ‹å€¼è¿ç®—ç¬¦
int count = 10;
count += 5;  // ç­‰ä»·äº count = count + 5 â†’ 15
count *= 2;  // 30
```

#### ä¸‰ã€[æ§åˆ¶ç»“æ„](#control)
```java
// 1. æ¡ä»¶è¯­å¥
int score = 85;

// if-else
if (score >= 90) {
    System.out.println("ä¼˜ç§€");
} else if (score >= 80) {
    System.out.println("è‰¯å¥½"); // è¾“å‡ºæ­¤é¡¹
} else {
    System.out.println("éœ€åŠªåŠ›");
}

// switch-case
char grade = 'B';
switch (grade) {
    case 'A':
        System.out.println("ä¼˜ç§€");
        break;
    case 'B':
        System.out.println("è‰¯å¥½"); // è¾“å‡ºæ­¤é¡¹
        break;
    default:
        System.out.println("æ— æ•ˆç­‰çº§");
}

// 2. å¾ªç¯ç»“æ„
// forå¾ªç¯
for (int i = 0; i < 5; i++) {
    System.out.print(i + " "); // è¾“å‡º: 0 1 2 3 4 
}

// å¢å¼ºforå¾ªç¯
int[] numbers = {1, 2, 3, 4, 5};
for (int num : numbers) {
    System.out.print(num + " "); // è¾“å‡º: 1 2 3 4 5
}

// whileå¾ªç¯
int count = 0;
while (count < 3) {
    System.out.println("è®¡æ•°: " + count);
    count++;
}

// do-whileå¾ªç¯
int i = 5;
do {
    System.out.println("è‡³å°‘æ‰§è¡Œä¸€æ¬¡");
} while (i < 3);
```

#### å››ã€[è¾“å…¥è¾“å‡º](#scanner)
```java
import java.util.Scanner;

public class InputOutput {
    public static void main(String[] args) {
        // åˆ›å»ºScannerå¯¹è±¡
        Scanner scanner = new Scanner(System.in);
        
        // è¾“å…¥ä¸åŒç±»å‹æ•°æ®
        System.out.print("è¯·è¾“å…¥å§“å: ");
        String name = scanner.nextLine();
        
        System.out.print("è¯·è¾“å…¥å¹´é¾„: ");
        int age = scanner.nextInt();
        
        System.out.print("è¯·è¾“å…¥èº«é«˜(m): ");
        double height = scanner.nextDouble();
        
        // æ ¼å¼åŒ–è¾“å‡º
        System.out.printf("å§“å: %s, å¹´é¾„: %d, èº«é«˜: %.2fç±³%n", name, age, height);
        
        // å…³é—­Scanner
        scanner.close();
    }
}
```

#### äº”ã€[å­—ç¬¦ä¸²å¤„ç†](#string)
```java
String message = "  Hello, Java!  ";

// åŸºæœ¬æ“ä½œ
int length = message.length();       // 16
String upper = message.toUpperCase(); // "  HELLO, JAVA!  "
String trimmed = message.trim();     // "Hello, Java!"

// å­—ç¬¦ä¸²è¿æ¥
String firstName = "John";
String lastName = "Doe";
String fullName = firstName + " " + lastName; // "John Doe"

// å­—ç¬¦ä¸²æ¯”è¾ƒ
boolean isEqual = "Java".equals("java"); // false
boolean ignoreCase = "Java".equalsIgnoreCase("java"); // true

// å­å­—ç¬¦ä¸²
String sub = message.substring(2, 7); // "Hello"

// å­—ç¬¦ä¸²æ‹†åˆ†
String data = "apple,orange,banana";
String[] fruits = data.split(","); // ["apple", "orange", "banana"]
```

#### å…­ã€[æ•°ç»„æ“ä½œ](#array)
```java
// æ•°ç»„å£°æ˜ä¸åˆå§‹åŒ–
int[] numbers = new int[3];       // {0, 0, 0}
int[] primes = {2, 3, 5, 7, 11}; // ç›´æ¥åˆå§‹åŒ–

// äºŒç»´æ•°ç»„
int[][] matrix = {
    {1, 2, 3},
    {4, 5, 6}
};

// æ•°ç»„éå†
for (int i = 0; i < primes.length; i++) {
    System.out.println(primes[i]);
}

// æ•°ç»„æ’åº
import java.util.Arrays;
Arrays.sort(primes); // å‡åºæ’åº

// æ•°ç»„å¤åˆ¶
int[] copy = Arrays.copyOf(primes, primes.length);
```

#### ä¸ƒã€æ–¹æ³•å®šä¹‰ä¸è°ƒç”¨
```java
public class MethodDemo {
    // æ— è¿”å›å€¼æ–¹æ³•
    public static void greet() {
        System.out.println("Hello!");
    }
    
    // å¸¦å‚æ•°æœ‰è¿”å›å€¼æ–¹æ³•
    public static int add(int a, int b) {
        return a + b;
    }
    
    // å¯å˜å‚æ•°æ–¹æ³•
    public static double average(int... numbers) {
        int sum = 0;
        for (int num : numbers) {
            sum += num;
        }
        return (double) sum / numbers.length;
    }
    
    public static void main(String[] args) {
        greet(); // è°ƒç”¨æ— å‚æ–¹æ³•
        int result = add(5, 3); // è°ƒç”¨å¸¦å‚æ–¹æ³•
        double avg = average(1, 2, 3, 4, 5); // è°ƒç”¨å¯å˜å‚æ•°æ–¹æ³•
    }
}
```

#### å…«ã€å¼‚å¸¸å¤„ç†
```java
public class ExceptionDemo {
    public static void main(String[] args) {
        try {
            // å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç 
            int result = divide(10, 0);
            System.out.println("ç»“æœ: " + result);
        } catch (ArithmeticException e) {
            // æ•è·ç‰¹å®šå¼‚å¸¸
            System.err.println("é”™è¯¯: " + e.getMessage());
        } finally {
            // æ— è®ºæ˜¯å¦å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ
            System.out.println("è®¡ç®—ç»“æŸ");
        }
    }
    
    public static int divide(int a, int b) {
        if (b == 0) {
            throw new ArithmeticException("é™¤æ•°ä¸èƒ½ä¸ºé›¶");
        }
        return a / b;
    }
}
```

### å…³é”®æ¦‚å¿µæ€»ç»“

1. **ç¨‹åºç»“æ„**ï¼š
   
   - é¡ºåºç»“æ„ï¼šä»£ç ä»ä¸Šåˆ°ä¸‹é¡ºåºæ‰§è¡Œ
   - åˆ†æ”¯ç»“æ„ï¼šif-else, switch-case
   - å¾ªç¯ç»“æ„ï¼šfor, while, do-while
   
2. **æ–¹æ³•è®¾è®¡åŸåˆ™**ï¼š
   - å•ä¸€èŒè´£ï¼šä¸€ä¸ªæ–¹æ³•åªåšä¸€ä»¶äº‹
   - åˆç†å‘½åï¼šä½¿ç”¨åŠ¨è¯+åè¯ç»„åˆï¼ˆå¦‚ `calculateTax`ï¼‰
   - æ§åˆ¶é•¿åº¦ï¼šä¸€èˆ¬ä¸è¶…è¿‡50è¡Œ

3. **æœ€ä½³å®è·µ**ï¼š
   - å˜é‡å‘½åï¼šä½¿ç”¨é©¼å³°å‘½åæ³•ï¼ˆ`userName`ï¼‰
   - å¸¸é‡å‘½åï¼šå…¨å¤§å†™åŠ ä¸‹åˆ’çº¿ï¼ˆ`MAX_SIZE`ï¼‰
   - ä»£ç æ ¼å¼ï¼šç»Ÿä¸€ç¼©è¿›ï¼ˆ4ç©ºæ ¼ï¼‰ï¼Œåˆç†ç©ºè¡Œåˆ†éš”é€»è¾‘å—
   - å¼‚å¸¸å¤„ç†ï¼šä¸è¦æ•è·æ‰€æœ‰å¼‚å¸¸ï¼ˆé¿å… `catch (Exception e)`ï¼‰

4. **è°ƒè¯•æŠ€å·§**ï¼š
   ```java
   // 1. ä½¿ç”¨æ‰“å°è¯­å¥è°ƒè¯•
   System.out.println("å˜é‡å€¼: " + variable);
   
   // 2. ä½¿ç”¨æ–­è¨€
   assert x > 0 : "xå¿…é¡»å¤§äº0";
   
   // 3. IDEè°ƒè¯•å™¨ï¼ˆè®¾ç½®æ–­ç‚¹ã€å•æ­¥æ‰§è¡Œï¼‰
   ```

5. **å¸¸è§é”™è¯¯è§„é¿**ï¼š
   
   - ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼šæ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸º`null`
   - æ•°ç»„è¶Šç•Œï¼šç¡®ä¿<u>**ç´¢å¼•**</u>åœ¨`0`åˆ°`length-1`èŒƒå›´å†…
   - ç±»å‹è½¬æ¢é”™è¯¯ï¼šä½¿ç”¨`instanceof`æ£€æŸ¥ç±»å‹
   - æ­»å¾ªç¯ï¼šç¡®ä¿å¾ªç¯æ¡ä»¶èƒ½å˜ä¸ºfalse

æŒæ¡è¿™äº›åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„æ˜¯Javaå¼€å‘çš„åŸºçŸ³ï¼Œå®ƒä»¬æ˜¯æ„å»ºæ›´å¤æ‚åº”ç”¨çš„åŸºç¡€ç»„ä»¶ã€‚



### æ•°æ®ç±»å‹

#### Java æ•°æ®ç±»å‹è¯¦è§£

<u>Java æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œæ‰€æœ‰å˜é‡å¿…é¡»å…ˆå£°æ˜ç±»å‹åä½¿ç”¨</u>ã€‚æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼š**åŸºæœ¬æ•°æ®ç±»å‹**ï¼ˆåŸå§‹ç±»å‹ï¼‰å’Œ **å¼•ç”¨æ•°æ®ç±»å‹**ã€‚

---

#### ä¸€ã€åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆPrimitive Typesï¼‰

| ç±»å‹      | å¤§å°          | å–å€¼èŒƒå›´                        | é»˜è®¤å€¼ | ç¤ºä¾‹                   | è¯´æ˜                     |
| --------- | ------------- | ------------------------------- | ------ | ---------------------- | ------------------------ |
| `byte`    | 1 å­—èŠ‚ (8ä½)  | -128 ~ 127                      | 0      | `byte b = 100;`        | æœ€å°æ•´æ•°ç±»å‹             |
| `short`   | 2 å­—èŠ‚ (16ä½) | -32,768 ~ 32,767                | 0      | `short s = 500;`       | ä¸­ç­‰æ•´æ•°ç±»å‹             |
| `int`     | 4 å­—èŠ‚ (32ä½) | -2Â³Â¹ ~ 2Â³Â¹-1 (-2.1e9 ~ 2.1e9)   | 0      | `int i = 100000;`      | **æœ€å¸¸ç”¨æ•´æ•°ç±»å‹**       |
| `long`    | 8 å­—èŠ‚ (64ä½) | -2â¶Â³ ~ 2â¶Â³-1 (-9.2e18 ~ 9.2e18) | 0L     | `long l = 100L;`       | å¤§æ•´æ•°ï¼ˆåç¼€åŠ  `L`ï¼‰     |
| `float`   | 4 å­—èŠ‚ (32ä½) | Â±3.4e-38 ~ Â±3.4e38              | 0.0f   | `float f = 3.14f;`     | å•ç²¾åº¦æµ®ç‚¹ï¼ˆåç¼€åŠ  `f`ï¼‰ |
| `double`  | 8 å­—èŠ‚ (64ä½) | Â±1.7e-308 ~ Â±1.7e308            | 0.0d   | `double d = 3.14;`     | **é»˜è®¤æµ®ç‚¹ç±»å‹**         |
| `char`    | 2 å­—èŠ‚ (16ä½) | \u0000 ~ \uffff (0 ~ 65,535)    | \u0000 | `char c = 'A';`        | å•ä¸ª Unicode å­—ç¬¦        |
| `boolean` | æ— æ˜ç¡®å¤§å°    | `true` / `false`                | false  | `boolean flag = true;` | å¸ƒå°”å€¼ï¼ˆé0/1ï¼‰          |

---

#### äºŒã€å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆReference Typesï¼‰

| ç±»å‹         | è¯´æ˜                     | ç¤ºä¾‹                                     |
| ------------ | ------------------------ | ---------------------------------------- |
| **ç±»ç±»å‹**   | å¯¹è±¡å¼•ç”¨                 | `String str = "Hello";`                  |
| **æ¥å£ç±»å‹** | å®ç°æ¥å£çš„ç±»çš„å¯¹è±¡       | `List<String> list = new ArrayList<>();` |
| **æ•°ç»„ç±»å‹** | å›ºå®šé•¿åº¦çš„åŒç±»å‹å…ƒç´ é›†åˆ | `int[] arr = {1, 2, 3};`                 |
| **æšä¸¾ç±»å‹** | é¢„å®šä¹‰å¸¸é‡é›†åˆ           | `enum Color { RED, GREEN, BLUE }`        |
| **æ³¨è§£ç±»å‹** | å…ƒæ•°æ®æ ‡è®°               | `@Override public void method()`         |

---

#### ä¸‰ã€æ•°æ®ç±»å‹è½¬æ¢

**æ•°å€¼ç±»å‹ä¹‹é—´çš„è½¬æ¢**

##### 1. è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼ˆéšå¼è½¬æ¢ï¼‰
å°èŒƒå›´ç±»å‹ â†’ å¤§èŒƒå›´ç±»å‹ï¼ˆç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆï¼‰
```java
int i = 100;
double d = i;  // int â†’ doubleï¼ˆ100.0ï¼‰

char   c = 'A';
int code = c;   // char â†’ intï¼ˆ65ï¼‰
```

##### 2. å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼ˆæ˜¾å¼è½¬æ¢ï¼‰
å¤§èŒƒå›´ç±»å‹ â†’ å°èŒƒå›´ç±»å‹ï¼ˆéœ€æ‰‹åŠ¨è½¬æ¢ï¼Œå¯èƒ½ä¸¢å¤±æ•°æ®ï¼‰
```java
double pi = 3.14159;
int intPi = (int) pi;  // double â†’ intï¼ˆç»“æœä¸º3ï¼Œä¸¢å¤±å°æ•°ï¼‰

long bigNum = 100_000_000_000L;
int smallNum = (int) bigNum;  // æº¢å‡ºé£é™©ï¼ˆé”™è¯¯ç»“æœï¼‰
```

##### 3. è½¬æ¢è§„åˆ™
```mermaid
graph LR
    byte-->short
    short-->int
    int-->long
    long-->float
    float-->double
    char-->int
```

> æ³¨ï¼š`boolean` ç±»å‹ä¸èƒ½ä¸å…¶ä»–ä»»ä½•ç±»å‹ç›¸äº’è½¬æ¢

---

#### å››ã€åŒ…è£…ç±»ï¼ˆWrapper Classesï¼‰<!--åé¢ç« èŠ‚è¯¦ç»†ä»‹ç»åŒ…è£…ç±»-->

æ¯ä¸ªåŸºæœ¬ç±»å‹éƒ½æœ‰å¯¹åº”çš„åŒ…è£…ç±»ï¼Œç”¨äºé¢å‘å¯¹è±¡æ“ä½œï¼š

| åŸºæœ¬ç±»å‹  | åŒ…è£…ç±»      | ç¤ºä¾‹                   |
| --------- | ----------- | ---------------------- |
| `byte`    | `Byte`      | `Byte b = 10;`         |
| `short`   | `Short`     | `Short s = 100;`       |
| `int`     | `Integer`   | `Integer i = 1000;`    |
| `long`    | `Long`      | `Long l = 10_000L;`    |
| `float`   | `Float`     | `Float f = 3.14f;`     |
| `double`  | `Double`    | `Double d = 3.14159;`  |
| `char`    | `Character` | `Character c = 'A';`   |
| `boolean` | `Boolean`   | `Boolean flag = true;` |

**ä¸»è¦ç”¨é€”**ï¼š
1. é›†åˆä¸­å­˜å‚¨åŸºæœ¬ç±»å‹ï¼ˆå¦‚ `ArrayList<Integer>`ï¼‰
2. æä¾›ç±»å‹è½¬æ¢æ–¹æ³•ï¼š
   ```java
   int num = Integer.parseInt("123");  // å­—ç¬¦ä¸²è½¬int
   String binary = Integer.toBinaryString(10); // "1010"
   ```

---

#### äº”ã€è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±ï¼ˆJava 5+ï¼‰

```java
// è‡ªåŠ¨è£…ç®±ï¼šåŸºæœ¬ç±»å‹ â†’ åŒ…è£…ç±»ï¼ˆç¼–è¯‘å™¨è‡ªåŠ¨è½¬æ¢ï¼‰
Integer obj = 100;   // ç­‰ä»·äº Integer.valueOf(100)

// è‡ªåŠ¨æ‹†ç®±ï¼šåŒ…è£…ç±» â†’ åŸºæœ¬ç±»å‹
int num = obj;       // ç­‰ä»·äº obj.intValue()
```

**æ³¨æ„äº‹é¡¹**ï¼š

1. ç©ºæŒ‡é’ˆé£é™©ï¼š
   ```java
   Integer nullObj = null;
   int n = nullObj;  // è¿è¡Œæ—¶æŠ›å‡º NullPointerException
   ```
2. åŒ…è£…ç±»æ¯”è¾ƒï¼š
   ```java
   Integer a = 100;
   Integer b = 100;
   System.out.println(a == b);  // trueï¼ˆ-128~127ç¼“å­˜ï¼‰
   
   Integer c = 200;
   Integer d = 200;
   System.out.println(c == d);  // falseï¼ˆè¶…å‡ºç¼“å­˜èŒƒå›´ï¼‰
   ```

---

#### å…­ã€ç‰¹æ®Šæ•°æ®ç±»å‹

##### 1. å­—ç¬¦ä¸²ï¼ˆ`String`ï¼‰
- å¼•ç”¨ç±»å‹ä½†å…·æœ‰ç‰¹æ®Šæ€§
- ä¸å¯å˜æ€§ï¼ˆæ¯æ¬¡ä¿®æ”¹åˆ›å»ºæ–°å¯¹è±¡ï¼‰
- å­—é¢é‡å­˜å‚¨åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± 

##### 2. æ•°ç»„ï¼ˆArrayï¼‰
```java
// å£°æ˜æ–¹å¼
int[] arr1 = new int[3];         // {0, 0, 0}
int[] arr2 = {1, 2, 3};          // ç›´æ¥åˆå§‹åŒ–
int[][] matrix = {{1,2}, {3,4}}; // äºŒç»´æ•°ç»„
```

##### 3. æšä¸¾ï¼ˆEnumï¼‰
```java
enum Status {
    PENDING, APPROVED, REJECTED
}

Status current = Status.APPROVED;
```

---

### æœ€ä½³å®è·µå»ºè®®
1. **æ•´æ•°é€‰æ‹©**ï¼š
   
   - ä¼˜å…ˆä½¿ç”¨ `int`ï¼ˆæ€§èƒ½æœ€ä½³ï¼‰
   - è¶…è¿‡ 20 äº¿ç”¨ `long`
2. **æµ®ç‚¹æ•°é€‰æ‹©**ï¼š
   
   - ä¼˜å…ˆä½¿ç”¨ `double`
   - éœ€è¦ç²¾ç¡®è®¡ç®—æ—¶ç”¨ `BigDecimal`
3. **é¿å…é­”æ³•æ•°å­—**ï¼š
   
   ```java
   // åä¾‹
   if (status == 2) {...}
   
   // æ­£è§£
   final int APPROVED = 2;
   if (status == APPROVED) {...}
   ```
4. **åŒ…è£…ç±»ä½¿ç”¨**ï¼š
   
   - é›†åˆæ“ä½œå¿…é¡»ç”¨åŒ…è£…ç±»
   - é¢‘ç¹è®¡ç®—çš„åœºæ™¯ç”¨åŸºæœ¬ç±»å‹ï¼ˆå‡å°‘å¯¹è±¡åˆ›å»ºï¼‰

> :notes: å…³é”®ç‚¹ï¼š<u>Java ä¸­æ‰€æœ‰åŸºæœ¬ç±»å‹éƒ½å­˜å‚¨åœ¨æ ˆå†…å­˜ï¼Œè€Œå¼•ç”¨ç±»å‹åœ¨æ ˆå­˜å‚¨å¼•ç”¨åœ°å€ï¼Œå®é™…å¯¹è±¡åœ¨å †å†…å­˜ã€‚</u>



### Java æ•´å‹æ•°æ®ç±»å‹è¯¦è§£

æ•´å‹æ˜¯ Java ä¸­æœ€åŸºç¡€çš„æ•°æ®ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºæ•´æ•°ã€‚Java æä¾›äº† 4 ç§æ•´å‹æ•°æ®ç±»å‹ï¼Œæ¯ç§ç±»å‹æœ‰ä¸åŒçš„å­˜å‚¨å¤§å°å’Œå–å€¼èŒƒå›´ï¼š

#### 1. æ•´å‹åˆ†ç±»ä¸ç‰¹æ€§

| ç±»å‹    | å¤§å° (å­—èŠ‚) | å–å€¼èŒƒå›´                                      | é»˜è®¤å€¼ | ç¤ºä¾‹              | åº”ç”¨åœºæ™¯                       |
| ------- | ----------- | --------------------------------------------- | ------ | ----------------- | ------------------------------ |
| `byte`  | 1 (8ä½)     | -128 ~ 127                                    | 0      | `byte b = 100;`   | å°èŒƒå›´æ•´æ•°ã€æ–‡ä»¶å¤„ç†ã€ç½‘ç»œä¼ è¾“ |
| `short` | 2 (16ä½)    | -32,768 ~ 32,767                              | 0      | `short s = 500;`  | ä¸­ç­‰èŒƒå›´æ•´æ•°ã€å…¼å®¹æ—§ç³»ç»Ÿ       |
| `int`   | 4 (32ä½)    | -2Â³Â¹ ~ 2Â³Â¹-1 (-2,147,483,648 ~ 2,147,483,647) | 0      | `int i = 100000;` | **æœ€å¸¸ç”¨æ•´æ•°ç±»å‹**             |
| `long`  | 8 (64ä½)    | -2â¶Â³ ~ 2â¶Â³-1 (-9.2e18 ~ 9.2e18)               | 0L     | `long l = 100L;`  | å¤§æ•´æ•°ã€æ—¶é—´æˆ³ã€IDç”Ÿæˆ         |

#### 2. å­—é¢é‡è¡¨ç¤ºæ–¹æ³•

```java
// åè¿›åˆ¶è¡¨ç¤ºï¼ˆé»˜è®¤ï¼‰
int decimal = 100;       // 100
int negative = -50;      // -50

// äºŒè¿›åˆ¶è¡¨ç¤ºï¼ˆå‰ç¼€ 0b æˆ– 0Bï¼‰
byte binary = 0b1101;    // 13 (0b00001101)
int binInt = 0b1010_1100_1101; // ä½¿ç”¨ä¸‹åˆ’çº¿å¢å¼ºå¯è¯»æ€§

// å…«è¿›åˆ¶è¡¨ç¤ºï¼ˆå‰ç¼€ 0ï¼‰
short octal = 017;       // 15 (1*8 + 7)

// åå…­è¿›åˆ¶è¡¨ç¤ºï¼ˆå‰ç¼€ 0x æˆ– 0Xï¼‰
int hex = 0xFF;          // 255
long hexLong = 0xCAFEBABEL; // 3,405,691,582

// long ç±»å‹å­—é¢é‡ï¼ˆåç¼€ L æˆ– lï¼‰
long bigNum = 10000000000L; // å¿…é¡»åŠ  L
long creditCard = 1234_5678_9012_3456L; // ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”
```

> **é‡è¦**ï¼šJava ä¸­æ•´æ•°å­—é¢é‡é»˜è®¤æ˜¯ `int` ç±»å‹ã€‚å½“æ•°å€¼è¶…è¿‡ 21 äº¿æ—¶ï¼Œå¿…é¡»æ·»åŠ  `L` åç¼€æ˜¾å¼å£°æ˜ä¸º `long` ç±»å‹ã€‚

#### 3. ç±»å‹è½¬æ¢è§„åˆ™

```mermaid
graph LR
    byte --> short
    short --> int
    int --> long
    char --> int
```

- **è‡ªåŠ¨è½¬æ¢ï¼ˆéšå¼è½¬æ¢ï¼‰**ï¼šå°èŒƒå›´ â†’ å¤§èŒƒå›´
  ```java
  byte b = 100;
  int i = b;  // è‡ªåŠ¨è½¬æ¢ï¼ˆbyte â†’ intï¼‰
  long l = i; // è‡ªåŠ¨è½¬æ¢ï¼ˆint â†’ longï¼‰
  ```

- **å¼ºåˆ¶è½¬æ¢ï¼ˆæ˜¾å¼è½¬æ¢ï¼‰**ï¼šå¤§èŒƒå›´ â†’ å°èŒƒå›´ï¼ˆå¯èƒ½ä¸¢å¤±æ•°æ®ï¼‰
  ```java
  int large = 200;
  byte small = (byte) large; // å¼ºåˆ¶è½¬æ¢ï¼ˆint â†’ byteï¼‰
  System.out.println(small); // -56ï¼ˆæ•°æ®æº¢å‡ºï¼‰
  
  long big = 10_000_000_000L;
  int truncated = (int) big; // å¼ºåˆ¶è½¬æ¢ï¼ˆlong â†’ intï¼‰
  System.out.println(truncated); // 1410065408ï¼ˆæˆªæ–­ï¼‰
  ```

#### 4. åŒ…è£…ç±»ä¸è‡ªåŠ¨è£…ç®±æ‹†ç®±

| åŸºæœ¬ç±»å‹ | åŒ…è£…ç±»    | ä¸»è¦ç”¨é€”               |
| -------- | --------- | ---------------------- |
| `byte`   | `Byte`    | é›†åˆå­˜å‚¨ã€ç±»å‹è½¬æ¢     |
| `short`  | `Short`   | åå°„æ“ä½œã€åºåˆ—åŒ–       |
| `int`    | `Integer` | é›†åˆæ“ä½œã€æ•°å€¼å·¥å…·æ–¹æ³• |
| `long`   | `Long`    | å¤§æ•°å€¼å¤„ç†ã€æ—¶é—´æˆ³æ“ä½œ |

```java
// è‡ªåŠ¨è£…ç®±ï¼ˆåŸºæœ¬ç±»å‹ â†’ åŒ…è£…ç±»ï¼‰
Integer obj = 100;  // ç­‰ä»·äº Integer.valueOf(100)

// è‡ªåŠ¨æ‹†ç®±ï¼ˆåŒ…è£…ç±» â†’ åŸºæœ¬ç±»å‹ï¼‰
int num = obj;      // ç­‰ä»·äº obj.intValue()

// æ‰‹åŠ¨è½¬æ¢
String numStr = "123";
int parsed = Integer.parseInt(numStr); // å­—ç¬¦ä¸²è½¬int
String binary = Integer.toBinaryString(10); // åè¿›åˆ¶è½¬äºŒè¿›åˆ¶
```

#### 5. å¸¸è§æ“ä½œä¸è¿ç®—

```java
// åŸºæœ¬ç®—æœ¯è¿ç®—
int a = 10, b = 3;
int sum = a + b;    // 13
int diff = a - b;   // 7
int product = a * b;// 30
int quotient = a / b; // 3ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
int remainder = a % b; // 1

// ä½è¿ç®—
int x = 0b1010;     // 10 (äºŒè¿›åˆ¶)
int y = 0b1100;     // 12 (äºŒè¿›åˆ¶)
int and = x & y;    // 0b1000 â†’ 8ï¼ˆæŒ‰ä½ä¸ï¼‰
int or = x | y;     // 0b1110 â†’ 14ï¼ˆæŒ‰ä½æˆ–ï¼‰
int xor = x ^ y;    // 0b0110 â†’ 6ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰
int shiftLeft = x << 1; // 0b10100 â†’ 20ï¼ˆå·¦ç§»ï¼‰
int shiftRight = y >> 1; // 0b0110 â†’ 6ï¼ˆå¸¦ç¬¦å·å³ç§»ï¼‰
int unsignedRight = y >>> 1; // 0b0110 â†’ 6ï¼ˆæ— ç¬¦å·å³ç§»ï¼‰

// å¤åˆèµ‹å€¼
int count = 10;
count += 5;     // 15
count *= 2;     // 30
count &= 0x0F;  // 14 (30 & 15)
```

#### 6. æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹

1. **ç±»å‹é€‰æ‹©åŸåˆ™**ï¼š
   
   - ä¼˜å…ˆä½¿ç”¨ `int`ï¼ˆæ€§èƒ½æœ€ä½³ï¼‰
   - è¶…è¿‡ 21 äº¿ç”¨ `long`
   - ç‰¹æ®Šåœºæ™¯ï¼ˆå¦‚æ–‡ä»¶å¤„ç†ï¼‰ç”¨ `byte`
   
2. **å­—é¢é‡å¯è¯»æ€§**ï¼š
   ```java
   // ä½¿ç”¨ä¸‹åˆ’çº¿å¢å¼ºå¯è¯»æ€§
   long earthPopulation = 7_900_000_000L;
   int hexColor = 0xFF_00_FF; // ç´«è‰²
   ```

3. **é¿å…æº¢å‡ºé—®é¢˜**ï¼š
   ```java
   // é”™è¯¯ï¼šæ•´æ•°æº¢å‡ºï¼ˆç»“æœé”™è¯¯ï¼‰
   int overflow = 2_000_000_000 + 1_000_000_000; 
   
   // æ­£ç¡®ï¼šä½¿ç”¨ long è®¡ç®—
   long safeSum = 2_000_000_000L + 1_000_000_000;
   ```

4. **åŒ…è£…ç±»ç¼“å­˜æœºåˆ¶**ï¼š
   ```java
   Integer i1 = 100;
   Integer i2 = 100;
   System.out.println(i1 == i2); // trueï¼ˆ-128~127æœ‰ç¼“å­˜ï¼‰
   
   Integer i3 = 200;
   Integer i4 = 200;
   System.out.println(i3 == i4); // falseï¼ˆè¶…å‡ºç¼“å­˜èŒƒå›´ï¼‰
   ```

5. **é™¤æ³•æ³¨æ„äº‹é¡¹**ï¼š
   
   ```java
   int result = 5 / 2;      // 2ï¼ˆæ•´æ•°é™¤æ³•èˆå»å°æ•°ï¼‰
   double correct = 5 / 2.0; // 2.5ï¼ˆéœ€ä½¿ç”¨æµ®ç‚¹æ•°ï¼‰
   ```

#### 7. æ€§èƒ½ä¸å†…å­˜ä¼˜åŒ–

| ç±»å‹    | å†…å­˜å ç”¨ | æ“ä½œé€Ÿåº¦ | é€‚ç”¨åœºæ™¯                   |
| ------- | -------- | -------- | -------------------------- |
| `byte`  | 1å­—èŠ‚    | âš¡ æœ€å¿«   | å¤§é‡æ•°æ®å­˜å‚¨ï¼ˆå¦‚å›¾åƒå¤„ç†ï¼‰ |
| `short` | 2å­—èŠ‚    | âš¡ å¿«     | å…¼å®¹æ—§ç³»ç»Ÿã€èŠ‚çœå†…å­˜       |
| `int`   | 4å­—èŠ‚    | âš¡ å¿«     | é€šç”¨æ•´æ•°è®¡ç®—ï¼ˆCPUä¼˜åŒ–ï¼‰    |
| `long`  | 8å­—èŠ‚    | âš  è¾ƒæ…¢   | å¤§æ•´æ•°è¿ç®—                 |

```java
// æ•°ç»„å†…å­˜å ç”¨å¯¹æ¯”
byte[] byteArray = new byte[1000]; // 1,000 å­—èŠ‚
int[] intArray = new int[1000];    // 4,000 å­—èŠ‚
long[] longArray = new long[1000]; // 8,000 å­—èŠ‚
```

#### 8. ç‰¹æ®Šæ•´å‹æ“ä½œ

```java
// æ— ç¬¦å·æ“ä½œï¼ˆJava 8+ï¼‰
int unsigned = Integer.parseUnsignedInt("4294967295");
String unsignedStr = Integer.toUnsignedString(-1); // "4294967295"

// æœ€å¤§å€¼/æœ€å°å€¼å¸¸é‡
int maxInt = Integer.MAX_VALUE;   // 2,147,483,647
int minInt = Integer.MIN_VALUE;   // -2,147,483,648

// ä½æ“ä½œå·¥å…·
int bitCount = Integer.bitCount(15); // 4ï¼ˆäºŒè¿›åˆ¶1çš„æ•°é‡ï¼‰
int reversed = Integer.reverse(0xA); // 0x50000000ï¼ˆä½åè½¬ï¼‰
```

#### 9. å¸¸è§é”™è¯¯åŠé¿å…æ–¹æ³•

1. **æ•´æ•°æº¢å‡º**ï¼š
   ```java
   // é”™è¯¯ï¼šç»“æœæº¢å‡ºä¸ºè´Ÿæ•°
   int billion = 1_000_000_000;
   int overflow = billion * 3; // -1,294,967,296
   
   // è§£å†³ï¼šä½¿ç”¨ long æˆ– BigInteger
   long safeResult = (long)billion * 3;
   ```

2. **ç±»å‹è½¬æ¢ä¸¢å¤±ç²¾åº¦**ï¼š
   
   ```java
   // é”™è¯¯ï¼šå¤§æ•°è½¬å°ç±»å‹
   long big = 300;
   byte small = (byte)big; // 44ï¼ˆæ•°æ®ä¸¢å¤±ï¼‰
   
   // è§£å†³ï¼šæ£€æŸ¥èŒƒå›´
   if (big >= Byte.MIN_VALUE && big <= Byte.MAX_VALUE) {
       byte safe = (byte)big;
   }
   ```
   
3. **ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆè‡ªåŠ¨æ‹†ç®±ï¼‰**ï¼š
   ```java
   Integer nullable = null;
   int num = nullable; // è¿è¡Œæ—¶ NullPointerException
   
   // è§£å†³ï¼šç©ºå€¼æ£€æŸ¥
   int safeNum = (nullable != null) ? nullable : 0;
   ```

4. **æ•´æ•°é™¤æ³•æˆªæ–­**ï¼š
   ```java
   int items = 10;
   int people = 4;
   int perPerson = items / people; // 2ï¼ˆé2.5ï¼‰
   
   // è§£å†³ï¼šä½¿ç”¨æµ®ç‚¹æ•°
   double accurate = (double)items / people;
   ```

> **å…³é”®ç‚¹**ï¼šæ•´å‹æ˜¯ Java ä¸­æœ€é«˜æ•ˆçš„æ•°æ®ç±»å‹ï¼Œåˆç†é€‰æ‹©ç±»å‹å¯æ˜¾è‘—æå‡ç¨‹åºæ€§èƒ½å’Œå†…å­˜æ•ˆç‡ã€‚



### Java æµ®ç‚¹ç±»å‹æ·±åº¦è§£æ

æµ®ç‚¹ç±»å‹ç”¨äºè¡¨ç¤ºå¸¦å°æ•°éƒ¨åˆ†çš„æ•°å€¼ï¼ŒJava æä¾›äº†ä¸¤ç§æµ®ç‚¹ç±»å‹ï¼š`float` å’Œ `double`ã€‚å®ƒä»¬åœ¨ç§‘å­¦è®¡ç®—ã€é‡‘èåˆ†æç­‰é¢†åŸŸæœ‰å¹¿æ³›åº”ç”¨ï¼Œä½†å­˜åœ¨ç²¾åº¦é™åˆ¶éœ€ç‰¹åˆ«æ³¨æ„ã€‚

---

#### ä¸€ã€æµ®ç‚¹ç±»å‹æ ¸å¿ƒç‰¹æ€§

| ç±»å‹     | å¤§å° (å­—èŠ‚) | æœ‰æ•ˆä½æ•° | å–å€¼èŒƒå›´             | é»˜è®¤å€¼ | åç¼€ | ç¤ºä¾‹                       |
| -------- | ----------- | -------- | -------------------- | ------ | ---- | -------------------------- |
| `float`  | 4 (32ä½)    | 6-7 ä½   | Â±1.4e-45 ~ Â±3.4e38   | 0.0f   | f/F  | `float f = 3.14f;`         |
| `double` | 8 (64ä½)    | 15 ä½    | Â±4.9e-324 ~ Â±1.8e308 | 0.0d   | d/D  | `double d = 3.1415926535;` |

> **é‡è¦**ï¼šJava é»˜è®¤æµ®ç‚¹å­—é¢é‡æ˜¯ `double` ç±»å‹ï¼Œä½¿ç”¨ `float` å¿…é¡»æ˜¾å¼æ·»åŠ  `f` åç¼€

---

#### äºŒã€æµ®ç‚¹å­—é¢é‡è¡¨ç¤º

```java
// æ ‡å‡†åè¿›åˆ¶è¡¨ç¤º
double d1 = 3.14;          // æœ‰æ•ˆ
float f1 = 3.14f;          // å¿…é¡»åŠ  f åç¼€

// ç§‘å­¦è®¡æ•°æ³•
double earthMass = 5.972e24;   // 5.972 Ã— 10Â²â´
double electronMass = 9.1e-31; // 9.1 Ã— 10â»Â³Â¹

// ç‰¹æ®Šå€¼è¡¨ç¤º
double positiveInfinity = Double.POSITIVE_INFINITY; // æ­£æ— ç©·å¤§
float negativeInfinity = Float.NEGATIVE_INFINITY;   // è´Ÿæ— ç©·å¤§
double nan = Double.NaN;  // éæ•°å­—ï¼ˆNot a Numberï¼‰

// ä¸‹åˆ’çº¿å¢å¼ºå¯è¯»æ€§ï¼ˆJava 7+ï¼‰
double billion = 1_000_000_000.000_001;
```

---

#### ä¸‰ã€æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

##### 1. ç²¾åº¦é—®é¢˜ç¤ºä¾‹
```java
System.out.println(0.1 + 0.2);  // 0.30000000000000004ï¼ˆé0.3ï¼‰
System.out.println(1.0 - 0.9);  // 0.09999999999999998
```

##### 2. é—®é¢˜æ ¹æº
- äºŒè¿›åˆ¶æµ®ç‚¹è¡¨ç¤ºæ— æ³•ç²¾ç¡®è¡¨ç¤ºæ‰€æœ‰åè¿›åˆ¶å°æ•°
- IEEE 754 æ ‡å‡†å¯¼è‡´çš„èˆå…¥è¯¯å·®

##### 3. è§£å†³æ–¹æ¡ˆ
```java
// æ–¹æ¡ˆ1ï¼šä½¿ç”¨ BigDecimalï¼ˆç²¾ç¡®è®¡ç®—ï¼‰
BigDecimal a = new BigDecimal("0.1");
BigDecimal b = new BigDecimal("0.2");
System.out.println(a.add(b)); // 0.3

// æ–¹æ¡ˆ2ï¼šæ§åˆ¶ç²¾åº¦ï¼ˆå››èˆäº”å…¥ï¼‰
double result = Math.round((0.1 + 0.2) * 100.0) / 100.0; // 0.3

// æ–¹æ¡ˆ3ï¼šä½¿ç”¨è¯¯å·®èŒƒå›´æ¯”è¾ƒ
final double EPSILON = 1e-10; // è¯¯å·®é˜ˆå€¼
double x = 1.0 - 0.9;
if (Math.abs(x - 0.1) < EPSILON) {
    System.out.println("è§†ä¸ºç›¸ç­‰");
}
```

---

#### å››ã€æµ®ç‚¹è¿ç®—ç‰¹æ®Šè§„åˆ™

```java
// 1. æ— ç©·å¤§è¿ç®—
System.out.println(1.0 / 0.0);   // Infinity
System.out.println(-1.0 / 0.0);  // -Infinity
System.out.println(1.0 / Double.POSITIVE_INFINITY); // 0.0

// 2. NaN è¿ç®—
System.out.println(0.0 / 0.0);            // NaN
System.out.println(Math.sqrt(-1));        // NaN
System.out.println(Double.NaN == Double.NaN); // falseï¼ˆé‡è¦ï¼ï¼‰

// æ­£ç¡®æ£€æµ‹ NaN
if (Double.isNaN(x)) {
    System.out.println("x æ˜¯éæ•°å­—");
}

// 3. ä¸¥æ ¼æµ®ç‚¹è®¡ç®—ï¼ˆstrictfpï¼‰
public strictfp class ScientificCalculator {
    // ç±»å†…æ‰€æœ‰æµ®ç‚¹è¿ç®—éµå¾ª IEEE 754 æ ‡å‡†
    // ä¿è¯ä¸åŒå¹³å°ç»“æœä¸€è‡´
}
```

---

#### äº”ã€æµ®ç‚¹ç±»å‹è½¬æ¢è§„åˆ™

```mermaid
graph LR
    int --> float
    int --> double
    long --> float
    long --> double
    float --> double
```

##### 1. è‡ªåŠ¨è½¬æ¢ï¼ˆéšå¼ï¼‰
```java
int count = 100;
double dCount = count;   // 100.0

float price = 19.99f;
double dPrice = price;   // 19.990000000000002
```

##### 2. å¼ºåˆ¶è½¬æ¢ï¼ˆæ˜¾å¼ï¼‰
```java
double pi = 3.1415926535;
float fPi = (float) pi;  // 3.1415927ï¼ˆç²¾åº¦æŸå¤±ï¼‰

double large = 1.8e308;
float small = (float) large; // Infinityï¼ˆæº¢å‡ºï¼‰
```

---

#### å…­ã€åŒ…è£…ç±»ä¸å·¥å…·æ–¹æ³•

| åŸºæœ¬ç±»å‹ | åŒ…è£…ç±» | å¸¸ç”¨æ–¹æ³•                                         |
| -------- | ------ | ------------------------------------------------ |
| float    | Float  | `parseFloat()`, `isNaN()`, `compare()`           |
| double   | Double | `parseDouble()`, `isInfinite()`, `toHexString()` |

```java
// å­—ç¬¦ä¸²è½¬æµ®ç‚¹
float f = Float.parseFloat("3.14");
double d = Double.parseDouble("2.71828");

// ç‰¹æ®Šå€¼æ£€æµ‹
Double.isNaN(Double.NaN);      // true
Float.isInfinite(Float.POSITIVE_INFINITY); // true

// æµ®ç‚¹æ¯”è¾ƒï¼ˆé¿å…ç›´æ¥==ï¼‰
Double.compare(0.1 + 0.2, 0.3) > 0; // trueï¼ˆ0.3 < å®é™…å€¼ï¼‰
```

---

#### ä¸ƒã€æœ€ä½³å®è·µä¸æ€§èƒ½ä¼˜åŒ–

1. **ç±»å‹é€‰æ‹©åŸåˆ™**ï¼š
   - ä¼˜å…ˆä½¿ç”¨ `double`ï¼ˆé»˜è®¤æµ®ç‚¹ç±»å‹ï¼‰
   - å†…å­˜æ•æ„Ÿåœºæ™¯ç”¨ `float`ï¼ˆå¦‚å›¾å½¢å¤„ç†ï¼‰

2. **é¿å…ç­‰å€¼æ¯”è¾ƒ**ï¼š
   ```java
   // é”™è¯¯æ–¹å¼
   if (x == y) { ... }
   
   // æ­£ç¡®æ–¹å¼
   final double EPSILON = 1e-9;
   if (Math.abs(x - y) < EPSILON) { ... }
   ```

3. **ç§‘å­¦è®¡ç®—ä¼˜åŒ–**ï¼š
   ```java
   // ä½¿ç”¨ä¹˜é™¤ä»£æ›¿åŠ å‡ï¼ˆå‡å°‘è¯¯å·®ç´¯ç§¯ï¼‰
   double result = (a * c) / (b * c); // ä¼˜äº (a/b) * c
   
   // é¿å…ç›¸è¿‘æ•°ç›¸å‡
   double diff = x - y; // å½“ xâ‰ˆy æ—¶ç²¾åº¦æŸå¤±ä¸¥é‡
   ```

4. **å†…å­˜å ç”¨å¯¹æ¯”**ï¼š
   ```java
   float[] fArray = new float[1000]; // 4,000 å­—èŠ‚
   double[] dArray = new double[1000]; // 8,000 å­—èŠ‚
   ```

---

#### å…«ã€æµ®ç‚¹åº”ç”¨åœºæ™¯

##### 1. ç§‘å­¦è®¡ç®—
```java
// ç‰©ç†å…¬å¼ï¼šåŠ¨èƒ½è®¡ç®—
double kineticEnergy(double mass, double velocity) {
    return 0.5 * mass * Math.pow(velocity, 2);
}
```

##### 2. é‡‘èè®¡ç®—ï¼ˆéœ€è°¨æ…ï¼‰
```java
// ä½¿ç”¨ BigDecimal å¤„ç†è´§å¸
BigDecimal total = new BigDecimal("99.99")
    .multiply(new BigDecimal("0.15")) // 15%ç¨
    .setScale(2, RoundingMode.HALF_UP); // å››èˆäº”å…¥åˆ°åˆ†
```

##### 3. å›¾å½¢å¤„ç†
```java
// 3Dåæ ‡ï¼ˆä½¿ç”¨ float èŠ‚çœå†…å­˜ï¼‰
public class Vector3f {
    float x, y, z; // é€‚åˆGPUå¤„ç†
}
```

##### 4. ç»Ÿè®¡åˆ†æ
```java
// è®¡ç®—å¹³å‡å€¼ï¼ˆæ³¨æ„æº¢å‡ºï¼‰
double average(int[] data) {
    double sum = 0.0;
    for (int value : data) {
        sum += value; // ä½¿ç”¨doubleé¿å…æ•´æ•°æº¢å‡º
    }
    return sum / data.length;
}
```

---

#### ä¹ã€å¸¸è§é”™è¯¯åŠé¿å…

1. **ç²¾åº¦è¯¯è§£**ï¼š
   ```java
   // é”™è¯¯ï¼šæœŸæœ›ç²¾ç¡®è®¡ç®—
   double total = 0.0;
   for (int i = 0; i < 10; i++) {
       total += 0.1; // å®é™…ä¸º0.9999999999999999
   }
   
   // è§£å†³ï¼šä½¿ç”¨æ•´æ•°è®¡æ•°
   int cents = 0;
   for (int i = 0; i < 10; i++) {
       cents += 10; // è¡¨ç¤º10ç¾åˆ†
   }
   double dollars = cents / 100.0;
   ```

2. **NaN ä¼ æ’­**ï¼š
   ```java
   // é”™è¯¯ï¼šNaNæ±¡æŸ“è®¡ç®—ç»“æœ
   double x = Math.sqrt(-1); // NaN
   double y = x + 5;         // NaN
   
   // è§£å†³ï¼šæå‰æ£€æµ‹
   if (Double.isNaN(x)) {
       // å¤„ç†é”™è¯¯
   }
   ```

3. **å¤§æ•°åƒå°æ•°**ï¼š
   ```java
   // é”™è¯¯ï¼šå°æ•°å€¼è¢«å¿½ç•¥
   double big = 1.0e20;
   double small = 1.0;
   double sum = big + small; // 1.0e20ï¼ˆsmallè¢«å¿½ç•¥ï¼‰
   
   // è§£å†³ï¼šè°ƒæ•´è®¡ç®—é¡ºåº
   double sum = small + big; // åŒæ ·é—®é¢˜
   // æ”¹ç”¨ Kahan æ±‚å’Œç®—æ³•
   ```

4. **ç±»å‹è½¬æ¢é™·é˜±**ï¼š
   
   ```java
   // é”™è¯¯ï¼šæ•´æ•°é™¤æ³•è½¬æµ®ç‚¹
   double ratio = 5 / 2;     // 2.0ï¼ˆé2.5ï¼‰
   
   // æ­£ç¡®ï¼šå¼ºåˆ¶ä¸€ä¸ªæ“ä½œæ•°ä¸ºæµ®ç‚¹
   double correct = 5.0 / 2; // 2.5
   ```

> **å…³é”®ç‚¹**ï¼šæµ®ç‚¹ç±»å‹é€‚åˆç§‘å­¦è®¡ç®—ï¼Œä½†é‡‘èç­‰ç²¾ç¡®è®¡ç®—åœºæ™¯åº”ä½¿ç”¨ `BigDecimal`ã€‚ç†è§£ IEEE 754 æ ‡å‡†å’Œç²¾åº¦é™åˆ¶æ˜¯é¿å…é”™è¯¯çš„å…³é”®ã€‚



### `char` ç±»å‹ä¸ Unicode æ·±åº¦è§£æ

#### ä¸€ã€`char` ç±»å‹æ ¸å¿ƒç‰¹æ€§
- **å­˜å‚¨å¤§å°**ï¼š16 ä½ï¼ˆ2 å­—èŠ‚ï¼‰
- **å–å€¼èŒƒå›´**ï¼š`\u0000` (0) åˆ° `\uffff` (65,535)
- **é»˜è®¤å€¼**ï¼š`\u0000`ï¼ˆç©ºå­—ç¬¦ï¼‰
- **ç”¨é€”**ï¼šå­˜å‚¨å•ä¸ª Unicode å­—ç¬¦
- **ç‰¹æ®Šæ€§è´¨**ï¼šJava ä¸­å”¯ä¸€æ— ç¬¦å·çš„åŸºæœ¬æ•°æ®ç±»å‹

#### äºŒã€Unicode åŸºç¡€æ¦‚å¿µ
- **ç›®æ ‡**ï¼šç»Ÿä¸€å…¨çƒæ‰€æœ‰å­—ç¬¦ç¼–ç 
- **ç¼–ç ç©ºé—´**ï¼š1,114,112 ä¸ªç ä½ï¼ˆU+0000 ~ U+10FFFFï¼‰
- **åˆ†åŒº**ï¼š
  - **åŸºæœ¬å¤šæ–‡ç§å¹³é¢ï¼ˆBMPï¼‰**ï¼šU+0000 ~ U+FFFFï¼ˆ65,536 å­—ç¬¦ï¼‰
  - **è¾…åŠ©å¹³é¢**ï¼šU+10000 ~ U+10FFFFï¼ˆéœ€è¦ä»£ç†å¯¹ï¼‰

#### ä¸‰ã€`char` ä¸ Unicode çš„å…³ç³»
```java
// 1. ç›´æ¥å­—ç¬¦èµ‹å€¼
char c1 = 'A';           // æ‹‰ä¸å­—æ¯
char c2 = 'æ±‰';           // æ±‰å­—
char c3 = 'ã‚';          // å¹³å‡å
char c4 = 'Î”';           // å¸Œè…Šå­—æ¯

// 2. Unicode è½¬ä¹‰åºåˆ—
char u1 = '\u0041';      // 'A' (16è¿›åˆ¶)
char u2 = '\u6C49';      // 'æ±‰'

// 3. æ•´æ•°èµ‹å€¼ï¼ˆè‡ªåŠ¨è½¬æ¢ï¼‰
char i1 = 65;            // 'A' (åè¿›åˆ¶)
char i2 = 0x6C49;        // 'æ±‰' (16è¿›åˆ¶)
```

#### å››ã€Unicode åœ¨ Java ä¸­çš„å®ç°
##### 1. ç¼–ç æ–¹æ¡ˆï¼šUTF-16
- **BMP å­—ç¬¦**ï¼š1 ä¸ª `char` è¡¨ç¤ºï¼ˆå¦‚ `'A'` â†’ `\u0041`ï¼‰
- **è¾…åŠ©å¹³é¢å­—ç¬¦**ï¼š2 ä¸ª `char`ï¼ˆä»£ç†å¯¹ï¼‰
  - é«˜ä»£ç†ï¼šU+D800 ~ U+DBFF
  - ä½ä»£ç†ï¼šU+DC00 ~ U+DFFF

```java
// è¡¨æƒ…ç¬¦å·ï¼šğŸ˜‚ (U+1F602)
String emoji = "\uD83D\uDE02";  // ä»£ç†å¯¹
System.out.println(emoji);       // è¾“å‡º ğŸ˜‚
```

##### 2. ç ç‚¹æ“ä½œ
```java
String text = "Helloæ±‰ğŸ˜‚";

// è·å–ç ç‚¹æ•°é‡ï¼ˆå®é™…å­—ç¬¦æ•°ï¼‰
int charCount = text.length();       // 7ï¼ˆåŒ…æ‹¬ä»£ç†å¯¹ï¼‰
int codePointCount = text.codePointCount(0, text.length()); // 6

// éå†ç ç‚¹
for (int i = 0; i < text.length(); ) {
    int codePoint = text.codePointAt(i);
    System.out.printf("U+%04X ", codePoint); // U+0048 U+0065...
    i += Character.charCount(codePoint);
}
// è¾“å‡ºï¼šU+0048 U+0065 U+006C U+006C U+006F U+6C49 U+1F602
```

#### äº”ã€å…³é”®æ–¹æ³•è¯¦è§£
##### 1. `Character` åŒ…è£…ç±»æ–¹æ³•
```java
// å­—ç¬¦åˆ†ç±»
boolean isLetter = Character.isLetter('æ¼¢');    // true
boolean isDigit = Character.isDigit('ï¼™');      // trueï¼ˆå…¨è§’æ•°å­—ï¼‰
boolean isSpace = Character.isWhitespace('ã€€'); // trueï¼ˆå…¨è§’ç©ºæ ¼ï¼‰

// å¤§å°å†™è½¬æ¢
char upper = Character.toUpperCase('Ã©');        // 'Ã‰'
char lower = Character.toLowerCase('Î©');        // 'Ï‰'

// Unicode å—åˆ¤æ–­
boolean isCJK = Character.UnicodeBlock.of('æ¼¢') 
                == Character.UnicodeBlock.CJK_UNIFIED_IDEOGRAPHS; // true
```

##### 2. ç ç‚¹è½¬æ¢
```java
// å­—ç¬¦ â†” ç ç‚¹
int codePoint = Character.codePointAt("A", 0); // 65
char[] chars = Character.toChars(0x1F602);     // [0xD83D, 0xDE02]

// ä»£ç†å¯¹åˆ¤æ–­
char high = '\uD83D', low = '\uDE02';
boolean isHigh = Character.isHighSurrogate(high); // true
boolean isLow = Character.isLowSurrogate(low);    // true
int emojiCode = Character.toCodePoint(high, low); // 128514 (0x1F602)
```

#### å…­ã€å­—ç¬¦ä¸²ä¸ Unicode
```java
// 1. å­—ç¬¦ä¸²é•¿åº¦é™·é˜±
String emoji = "ğŸ˜‚";
int length = emoji.length();          // 2ï¼ˆä»£ç†å¯¹æ•°é‡ï¼‰
int trueLength = emoji.codePointCount(0, emoji.length()); // 1

// 2. æ­£ç¡®éå†å­—ç¬¦
String text = "Aæ±‰ğŸ˜‚";
IntStream codePoints = text.codePoints(); // Java 8+
codePoints.forEach(cp -> 
    System.out.println(new String(Character.toChars(cp)));
// è¾“å‡ºï¼šA, æ±‰, ğŸ˜‚

// 3. å­å­—ç¬¦ä¸²å¤„ç†
String sub = text.substring(0, 3); // "Aæ±‰"ï¼ˆä¸ä¼šæˆªæ–­ ğŸ˜‚ï¼‰
```

#### ä¸ƒã€ç¼–ç è½¬æ¢å®è·µ
```java
// 1. å­—ç¬¦ä¸² â†” å­—èŠ‚æ•°ç»„
String original = "æ—¥æœ¬èª";
byte[] utf8Bytes = original.getBytes(StandardCharsets.UTF_8); 
String decoded = new String(utf8Bytes, StandardCharsets.UTF_8);

// 2. å¤„ç†ä¹±ç é—®é¢˜
byte[] data = {(byte)0xE6, (byte)0x97, (byte)0xA5}; // "æ—¥"çš„UTF-8
String correct = new String(data, StandardCharsets.UTF_8); // "æ—¥"
String wrong = new String(data, StandardCharsets.ISO_8859_1); // "Ã¦Â—Â¥"
```

#### å…«ã€æœ€ä½³å®è·µ
1. **å­—ç¬¦å¤„ç†åŸåˆ™**ï¼š
   
   - ä¼˜å…ˆä½¿ç”¨ç ç‚¹æ“ä½œè€Œé `char`
   - ä½¿ç”¨ `String.codePointCount()` è·å–çœŸå®å­—ç¬¦æ•°
   - é¿å…ä½¿ç”¨ `char` å¤„ç†è¾…åŠ©å¹³é¢å­—ç¬¦
   
2. **æ–‡ä»¶è¯»å†™ç¼–ç **ï¼š
   ```java
   // æ˜ç¡®æŒ‡å®š UTF-8
   try (BufferedWriter writer = Files.newBufferedWriter(path, StandardCharsets.UTF_8)) {
       writer.write("æ—¥æœ¬èª");
   }
   ```

3. **æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ**ï¼š
   
   ```java
   // åŒ¹é…ä»»ä½• Unicode å­—æ¯
   boolean isWord = "æ¼¢å­—".matches("\\p{L}+"); // true
   ```
   
4. **å­—ä½“æ¸²æŸ“é—®é¢˜è§£å†³**ï¼š
   ```java
   // ç¡®ä¿æ”¯æŒæ‰€æœ‰ Unicode åŒºå—
   Font font = new Font("Noto Sans CJK SC", Font.PLAIN, 12);
   ```



#### ä¹ã€å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
1. **ä¹±ç é—®é¢˜**ï¼š
   - ç°è±¡ï¼š`???` æˆ– `Ã¦Â˜Â` 
   - è§£å†³ï¼šç»Ÿä¸€ä½¿ç”¨ UTF-8 ç¼–ç 
     ```java
     -Dfile.encoding=UTF-8
     ```

2. **å­—ç¬¦æˆªæ–­é”™è¯¯**ï¼š
   
   ```java
   // é”™è¯¯ï¼šæˆªæ–­ä»£ç†å¯¹
   String emoji = "ğŸ˜‚";
   char first = emoji.charAt(0); // 0xD83Dï¼ˆæ— æ•ˆå­—ç¬¦ï¼‰
   
   // æ­£ç¡®ï¼šä½¿ç”¨ç ç‚¹
   int codePoint = emoji.codePointAt(0); // 128514
   ```
   
3. **æ’åºæœ¬åœ°åŒ–**ï¼š
   
   ```java
   // ä¸­æ–‡æ’åº
   Collator cnCollator = Collator.getInstance(Locale.CHINA);
   cnCollator.compare("åŒ—äº¬", "ä¸Šæµ·"); // -1ï¼ˆåŒ— < ä¸Šï¼‰
   ```
   
4. **ç‰¹æ®Šå­—ç¬¦éªŒè¯**ï¼š
   ```java
   // æ£€æŸ¥æ˜¯å¦ä¸ºè¡¨æƒ…ç¬¦å·
   boolean isEmoji(int codePoint) {
       return Character.UnicodeBlock.of(codePoint) 
              == Character.UnicodeBlock.EMOTICONS;
   }
   ```

> **å…³é”®ç»“è®º**ï¼šJava çš„ `char` ç±»å‹æ˜¯ UTF-16 ç¼–ç çš„åŸºæœ¬å•å…ƒï¼Œä½†å¤„ç†ç°ä»£ Unicode åº”ä¼˜å…ˆä½¿ç”¨ç ç‚¹ï¼ˆ`int`ï¼‰æ“ä½œã€‚éšç€ Unicode æ ‡å‡†æ¼”è¿›ï¼ˆç›®å‰14.0ï¼‰ï¼ŒJava æŒç»­æ›´æ–°æ”¯æŒï¼Œå¼€å‘ä¸­åº”å§‹ç»ˆè€ƒè™‘å¤šè¯­è¨€ç¯å¢ƒå’Œè¾…åŠ©å¹³é¢å­—ç¬¦çš„å…¼å®¹æ€§ã€‚





### <span id="variable">Java å˜é‡ä¸å¸¸é‡è¯¦è§£</span>

#### ä¸€ã€å˜é‡ï¼ˆVariableï¼‰
å˜é‡æ˜¯ç¨‹åºä¸­å­˜å‚¨æ•°æ®çš„åŸºæœ¬å•å…ƒï¼Œå…¶å€¼å¯åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ”¹å˜ã€‚

##### 1. å˜é‡å£°æ˜ä¸åˆå§‹åŒ–
```java
// å£°æ˜å˜é‡ï¼ˆæœªåˆå§‹åŒ–ï¼‰
int age;
String name;

// å£°æ˜å¹¶åˆå§‹åŒ–
double price = 19.99;
boolean isActive = true;

// åŒæ—¶å£°æ˜å¤šä¸ªåŒç±»å‹å˜é‡
int x = 5, y = 10, z = 15;
```

##### 2. å˜é‡å‘½åè§„èŒƒ
- **è§„åˆ™**ï¼ˆå¿…é¡»éµå®ˆï¼‰ï¼š
  - ä»¥å­—æ¯ã€`_`æˆ–`$`å¼€å¤´
  - åç»­å­—ç¬¦å¯ä»¥æ˜¯å­—æ¯ã€æ•°å­—ã€`_`æˆ–`$`
  - åŒºåˆ†å¤§å°å†™
  - ä¸èƒ½æ˜¯å…³é”®å­—ï¼ˆå¦‚ `int`, `class`ï¼‰
  
- **æƒ¯ä¾‹**ï¼ˆæ¨èéµå®ˆï¼‰ï¼š
  - é©¼å³°å‘½åæ³•ï¼š`userName`, `totalCount`
  - æœ‰æ„ä¹‰çš„åå­—ï¼šé¿å… `a`, `b` ç­‰æ— æ„ä¹‰åç§°
  - å¸ƒå°”å˜é‡ä»¥ `is`/`has` å¼€å¤´ï¼š`isValid`, `hasPermission`

##### 3. å˜é‡ä½œç”¨åŸŸ
| ç±»å‹         | å£°æ˜ä½ç½®          | ç”Ÿå‘½å‘¨æœŸ       | è®¿é—®èŒƒå›´     |
| ------------ | ----------------- | -------------- | ------------ |
| **å±€éƒ¨å˜é‡** | æ–¹æ³•/ä»£ç å—å†…éƒ¨   | ä»£ç å—æ‰§è¡ŒæœŸé—´ | ä»…åœ¨å£°æ˜å—å†… |
| **å®ä¾‹å˜é‡** | ç±»å†…éƒ¨ã€æ–¹æ³•å¤–éƒ¨  | å¯¹è±¡å­˜åœ¨æœŸé—´   | æ•´ä¸ªå¯¹è±¡å®ä¾‹ |
| **ç±»å˜é‡**   | ç±»å†…éƒ¨ + `static` | ç¨‹åºè¿è¡ŒæœŸé—´   | æ•´ä¸ªç±»       |

```java
public class ScopeExample {
    // å®ä¾‹å˜é‡
    private int count = 0;
    
    // ç±»å˜é‡ï¼ˆé™æ€å˜é‡ï¼‰
    public static final double PI = 3.14159;
    
    public void calculate() {
        // å±€éƒ¨å˜é‡
        int result = 0;
        
        if (count > 0) {
            // å—çº§å±€éƒ¨å˜é‡
            int temp = count * 10;
            result = temp;
        }
        // temp åœ¨æ­¤ä¸å¯è®¿é—®ï¼ˆè¶…å‡ºä½œç”¨åŸŸï¼‰
    }
}
```

#### äºŒã€å¸¸é‡ï¼ˆConstantï¼‰
å¸¸é‡æ˜¯å€¼ä¸å¯å˜çš„é‡ï¼Œä½¿ç”¨ `final` å…³é”®å­—å£°æ˜ã€‚

##### 1. å¸¸é‡å£°æ˜
```java
// åŸºæœ¬ç±»å‹å¸¸é‡
final int MAX_USERS = 100;
final double TAX_RATE = 0.08;

// å¼•ç”¨ç±»å‹å¸¸é‡ï¼ˆå¼•ç”¨ä¸å¯å˜ï¼Œå¯¹è±¡å†…å®¹å¯èƒ½å¯å˜ï¼‰
final List<String> COLORS = new ArrayList<>();
COLORS.add("Red");  // å…è®¸ä¿®æ”¹å†…å®¹
// COLORS = new ArrayList<>(); // ç¼–è¯‘é”™è¯¯ï¼ˆä¸èƒ½æ”¹å˜å¼•ç”¨ï¼‰

// ç¼–è¯‘æ—¶å¸¸é‡ï¼ˆç¼–è¯‘æ—¶å€¼å³ç¡®å®šï¼‰
final int HOURS_PER_DAY = 24;
final String GREETING = "Hello, " + "World!";
```

##### 2. å¸¸é‡å‘½åè§„èŒƒ
- å…¨å¤§å†™å­—æ¯
- å•è¯é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”
- é™æ€å¸¸é‡é€šå¸¸å£°æ˜ä¸º `public static final`
```java
public class Constants {
    // å…¬å…±é™æ€å¸¸é‡
    public static final double EARTH_GRAVITY = 9.80665;
    public static final String DEFAULT_COUNTRY = "CN";
}
```

#### ä¸‰ã€å˜é‡ä¸å¸¸é‡å¯¹æ¯”
| ç‰¹æ€§           | å˜é‡             | å¸¸é‡             |
| -------------- | ---------------- | ---------------- |
| **å…³é”®å­—**     | æ—                | `final`          |
| **å€¼å¯å˜æ€§**   | æ˜¯               | å¦               |
| **å‘½åè§„èŒƒ**   | é©¼å³°å‘½åæ³•       | å…¨å¤§å†™+ä¸‹åˆ’çº¿    |
| **å†…å­˜ä½ç½®**   | æ ˆ/å †            | æ–¹æ³•åŒºï¼ˆå¸¸é‡æ± ï¼‰ |
| **åˆå§‹åŒ–è¦æ±‚** | ä½¿ç”¨å‰å¿…é¡»åˆå§‹åŒ– | å£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ– |
| **çº¿ç¨‹å®‰å…¨**   | éœ€åŒæ­¥æ§åˆ¶       | å¤©ç„¶çº¿ç¨‹å®‰å…¨     |
| **å…¸å‹ç”¨é€”**   | ä¸´æ—¶æ•°æ®å­˜å‚¨     | é…ç½®å‚æ•°ã€é­”æ³•å€¼ |

#### å››ã€æœ€ä½³å®è·µ

##### 1. å˜é‡ä½¿ç”¨åŸåˆ™
```java
// 1. æœ€å°ä½œç”¨åŸŸåŸåˆ™
{
    int temp = calculateValue(); // ä»…åœ¨éœ€è¦æ—¶å£°æ˜
    use(temp);
} // temp åœ¨æ­¤é”€æ¯

// 2. é¿å…å…¨å±€å˜é‡æ±¡æŸ“
class GoodDesign {
    private int instanceVar; // ä¼˜äº public å…¨å±€å˜é‡
    
    public void method() {
        int localVar = 0; // ä¼˜å…ˆä½¿ç”¨å±€éƒ¨å˜é‡
    }
}

// 3. å»¶è¿Ÿåˆå§‹åŒ–
String message = null;
if (condition) {
    message = "Condition met";
} else {
    message = "Condition not met";
}
```

##### 2. å¸¸é‡ä½¿ç”¨åŸåˆ™
```java
// 1. æ›¿æ¢é­”æ³•æ•°å­—
// åä¾‹
if (status == 2) { /* ... */ }

// æ­£è§£
public static final int STATUS_ACTIVE = 2;
if (status == STATUS_ACTIVE) { /* ... */ }

// 2. ä½¿ç”¨æšä¸¾ä»£æ›¿å¸¸é‡ç»„
// åä¾‹
public static final int COLOR_RED = 1;
public static final int COLOR_BLUE = 2;

// æ­£è§£
enum Color { RED, BLUE, GREEN }

// 3. ä¸å¯å˜é›†åˆ
// å¯ä¿®æ”¹çš„"å¸¸é‡"ï¼ˆä¸å®‰å…¨ï¼‰
final List<String> MODIFIABLE_LIST = new ArrayList<>();

// çœŸæ­£çš„ä¸å¯å˜å¸¸é‡
final List<String> IMMUTABLE_LIST = Collections.unmodifiableList(
    Arrays.asList("A", "B", "C")
);
```

#### äº”ã€ç‰¹æ®Šå˜é‡ç±»å‹

##### 1. æ˜“å¤±å˜é‡ï¼ˆ`volatile`ï¼‰
```java
// ä¿è¯å¤šçº¿ç¨‹é—´çš„å¯è§æ€§
private volatile boolean shutdownRequested;

public void shutdown() {
    shutdownRequested = true;
}

public void doWork() {
    while (!shutdownRequested) {
        // æ‰§è¡Œä»»åŠ¡
    }
}
```

##### 2. çº¿ç¨‹å±€éƒ¨å˜é‡ï¼ˆ`ThreadLocal`ï¼‰
```java
// æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹å‰¯æœ¬
private static final ThreadLocal<SimpleDateFormat> dateFormat =
    ThreadLocal.withInitial(() -> new SimpleDateFormat("yyyy-MM-dd"));

public String formatDate(Date date) {
    return dateFormat.get().format(date); // çº¿ç¨‹å®‰å…¨
}
```

#### å…­ã€å†…å­˜æ¨¡å‹è§£æ
```mermaid
graph TD
    A[æ ˆå†…å­˜ Stack] --> B[å±€éƒ¨å˜é‡]
    A --> C[æ–¹æ³•è°ƒç”¨]
    D[å †å†…å­˜ Heap] --> E[å¯¹è±¡å®ä¾‹]
    D --> F[æ•°ç»„]
    G[æ–¹æ³•åŒº Method Area] --> H[ç±»å˜é‡]
    G --> I[å¸¸é‡æ± ]
    
    B -.-> E
    H -.-> E
```

- **æ ˆå†…å­˜**ï¼šå­˜å‚¨å±€éƒ¨å˜é‡å’Œæ–¹æ³•è°ƒç”¨ï¼Œè‡ªåŠ¨ç®¡ç†
- **å †å†…å­˜**ï¼šå­˜å‚¨å¯¹è±¡å’Œæ•°ç»„ï¼Œç”±åƒåœ¾å›æ”¶å™¨ç®¡ç†
- **æ–¹æ³•åŒº**ï¼šå­˜å‚¨ç±»ç»“æ„ã€é™æ€å˜é‡å’Œå¸¸é‡æ± 

#### ä¸ƒã€å¸¸è§é”™è¯¯åŠè§£å†³

1. **æœªåˆå§‹åŒ–å˜é‡**
   ```java
   int total;
   System.out.println(total); // ç¼–è¯‘é”™è¯¯
   ```
   **è§£å†³**ï¼šå£°æ˜æ—¶åˆå§‹åŒ–æˆ–ç¡®ä¿ä½¿ç”¨å‰èµ‹å€¼

2. **å¸¸é‡æœªåˆå§‹åŒ–**
   ```java
   final int MAX_VALUE; // ç¼–è¯‘é”™è¯¯
   ```
   **è§£å†³**ï¼šå£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–

3. **ä¿®æ”¹å¸¸é‡å€¼**
   ```java
   final int LIMIT = 100;
   LIMIT = 200; // ç¼–è¯‘é”™è¯¯
   ```
   **è§£å†³**ï¼šé‡æ–°è®¾è®¡é€»è¾‘ï¼Œå¸¸é‡å€¼ä¸å¯å˜

4. **ä½œç”¨åŸŸå†²çª**
   ```java
   int count = 5;
   {
       int count = 10; // ç¼–è¯‘é”™è¯¯ï¼ˆé‡å¤å®šä¹‰ï¼‰
   }
   ```
   **è§£å†³**ï¼šå†…å±‚ä½œç”¨åŸŸä½¿ç”¨ä¸åŒå˜é‡å

5. **é™æ€å¸¸é‡åˆå§‹åŒ–é¡ºåº**
   ```java
   static final int A = B * 10; // å¯èƒ½ä¸º0
   static final int B = 5;
   ```
   **è§£å†³**ï¼šæŒ‰ä¾èµ–é¡ºåºå£°æ˜å¸¸é‡

#### å…«ã€Java 10+ å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ \-å…³é”®å­—`var`
```java
// ä½¿ç”¨ var å…³é”®å­—ï¼ˆJava 10+ï¼‰
var list = new ArrayList<String>(); // æ¨æ–­ä¸º ArrayList<String>
var stream = list.stream();         // æ¨æ–­ä¸º Stream<String>

// é€‚ç”¨åœºæ™¯ï¼š
var entries = Map.of("A", 1, "B", 2).entrySet();

// é™åˆ¶ï¼š
var x;              // é”™è¯¯ï¼šå¿…é¡»åˆå§‹åŒ–
var y = null;       // é”™è¯¯ï¼šä¸èƒ½ä¸ºnull
var z = {1, 2, 3};  // é”™è¯¯ï¼šéœ€è¦æ˜¾å¼ç±»å‹
```

> **æœ€ä½³å®è·µ**ï¼šå˜é‡å’Œå¸¸é‡æ˜¯ç¨‹åºçš„åŸºç¡€æ„å»ºå—ã€‚éµå¾ª"æœ€å°ä½œç”¨åŸŸ"åŸåˆ™ï¼Œåˆç†ä½¿ç”¨ `final` åˆ›å»ºå¸¸é‡ï¼Œé¿å…é­”æ³•å€¼ï¼Œèƒ½æ˜¾è‘—æå‡ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¯¹äºå¤æ‚ç¨‹åºï¼Œä¼˜å…ˆè€ƒè™‘çº¿ç¨‹å®‰å…¨çš„å˜é‡ç±»å‹å¦‚ `volatile` å’Œ `ThreadLocal`ã€‚





### <span id="operator">è¿ç®—ç¬¦</span>

Javaè¿ç®—ç¬¦ï¼ŒåŒ…æ‹¬ç®—æœ¯è¿ç®—ç¬¦ã€å…³ç³»è¿ç®—ç¬¦ã€é€»è¾‘è¿ç®—ç¬¦ã€ä½è¿ç®—ç¬¦ã€èµ‹å€¼è¿ç®—ç¬¦ã€æ¡ä»¶è¿ç®—ç¬¦ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦`condition ? expression1: expression2` ï¼‰ä»¥åŠå…¶ä»–è¿ç®—ç¬¦ï¼ˆå¦‚instanceofï¼‰ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¼šè®¨è®ºè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å’Œç»“åˆæ€§ã€‚

### Java è¿ç®—ç¬¦å…¨é¢æŒ‡å—

Java æä¾›äº†ä¸°å¯Œçš„è¿ç®—ç¬¦ç”¨äºæ‰§è¡Œå„ç§è®¡ç®—å’Œé€»è¾‘æ“ä½œã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„è¿ç®—ç¬¦åˆ†ç±»ä¸ç”¨æ³•è¯¦è§£ï¼š

---

#### ä¸€ã€ç®—æœ¯è¿ç®—ç¬¦
| è¿ç®—ç¬¦ | åç§° | ç¤ºä¾‹          | ç»“æœï¼ˆa=10, b=3ï¼‰ |
| ------ | ---- | ------------- | ----------------- |
| `+`    | åŠ æ³• | `a + b`       | 13                |
| `-`    | å‡æ³• | `a - b`       | 7                 |
| `*`    | ä¹˜æ³• | `a * b`       | 30                |
| `/`    | é™¤æ³• | `a / b`       | 3ï¼ˆæ•´æ•°é™¤æ³•ï¼‰     |
| `%`    | å–æ¨¡ | `a % b`       | 1                 |
| `++`   | è‡ªå¢ | `a++` / `++a` | 10â†’11 / 11â†’11     |
| `--`   | è‡ªå‡ | `b--` / `--b` | 3â†’2 / 2â†’2         |

**æ³¨æ„äº‹é¡¹**ï¼š

```java
// 1. æ•´æ•°é™¤æ³•æˆªæ–­
int result = 10 / 4;  // 2ï¼ˆé2.5ï¼‰

// 2. è‡ªå¢/è‡ªå‡åŒºåˆ«
int x = 5;
int y = x++;  // y=5, x=6ï¼ˆå…ˆç”¨åå¢ï¼‰
int z = ++x;  // z=7, x=7ï¼ˆå…ˆå¢åç”¨ï¼‰
```



---

#### äºŒã€å…³ç³»è¿ç®—ç¬¦
| è¿ç®—ç¬¦ | åç§°     | ç¤ºä¾‹     | ç»“æœï¼ˆa=5, b=3ï¼‰ |
| ------ | -------- | -------- | ---------------- |
| `==`   | ç­‰äº     | `a == b` | false            |
| `!=`   | ä¸ç­‰äº   | `a != b` | true             |
| `>`    | å¤§äº     | `a > b`  | true             |
| `<`    | å°äº     | `a < b`  | false            |
| `>=`   | å¤§äºç­‰äº | `a >= 5` | true             |
| `<=`   | å°äºç­‰äº | `a <= 4` | false            |

**æµ®ç‚¹æ•°æ¯”è¾ƒæŠ€å·§**ï¼š

```java
double d1 = 0.1 + 0.2; // â‰ˆ0.3
double d2 = 0.3;
final double EPSILON = 1e-10;

// é”™è¯¯æ–¹å¼
boolean wrong = (d1 == d2); // false

// æ­£ç¡®æ–¹å¼
boolean correct = Math.abs(d1 - d2) < EPSILON; // true
```

---

#### ä¸‰ã€é€»è¾‘è¿ç®—ç¬¦
| è¿ç®—ç¬¦ | åç§° | ç¤ºä¾‹     | ç»“æœï¼ˆa=true, b=falseï¼‰ |
| ------ | ---- | -------- | ----------------------- |
| `&&`   | ä¸   | `a && b` | false                   |
| `||`   | æˆ–   | `a || b` | true                    |
| `!`    | é   | `!a`     | false                   |
| `&`    | é•¿ä¸ | `a & b`  | false                   |
| `|`    | é•¿æˆ– | `a | b`  | true                    |
| `^`    | å¼‚æˆ– | `a ^ b`  | true                    |

**çŸ­è·¯ç‰¹æ€§**ï¼š

```java
// && çŸ­è·¯ï¼šå½“å·¦ä¾§ä¸ºfalseæ—¶ä¸è®¡ç®—å³ä¾§
int x = 5;
if (false && (x++ > 0)) { /* xä¸ä¼šè‡ªå¢ */ }

// || çŸ­è·¯ï¼šå½“å·¦ä¾§ä¸ºtrueæ—¶ä¸è®¡ç®—å³ä¾§
if (true || (x-- < 0)) { /* xä¸ä¼šè‡ªå‡ */ }

// éçŸ­è·¯ç‰ˆæœ¬ï¼šå§‹ç»ˆè®¡ç®—ä¸¤ä¾§
boolean result = (x > 0) | (y++ > 0); // yå¿…å®šè‡ªå¢
```

---

#### å››ã€ä½è¿ç®—ç¬¦
| è¿ç®—ç¬¦ | åç§°           | ç¤ºä¾‹      | ç»“æœï¼ˆa=60=00111100, b=13=00001101ï¼‰ |
| ------ | -------------- | --------- | ------------------------------------ |
| `&`    | ä½ä¸           | `a & b`   | 12ï¼ˆ00001100ï¼‰                       |
| `|`    | ä½æˆ–           | `a | b`   | 61ï¼ˆ00111101ï¼‰                       |
| `^`    | ä½å¼‚æˆ–         | `a ^ b`   | 49ï¼ˆ00110001ï¼‰                       |
| `~`    | ä½å–å         | `~a`      | -61ï¼ˆ11000011ï¼‰                      |
| `<<`   | å·¦ç§»           | `a << 2`  | 240ï¼ˆ11110000ï¼‰                      |
| `>>`   | å³ç§»ï¼ˆå¸¦ç¬¦å·ï¼‰ | `a >> 2`  | 15ï¼ˆ00001111ï¼‰                       |
| `>>>`  | å³ç§»ï¼ˆæ— ç¬¦å·ï¼‰ | `a >>> 2` | 15ï¼ˆ00001111ï¼‰                       |

**å®ç”¨æŠ€å·§**ï¼š

```java
// 1. å¿«é€Ÿä¹˜é™¤2çš„å¹‚æ¬¡
int n = 8;
int doubleN = n << 1; // 16ï¼ˆ2å€ï¼‰
int halfN = n >> 1;   // 4ï¼ˆ1/2ï¼‰

// 2. åˆ¤æ–­å¥‡å¶
boolean isOdd = (num & 1) == 1;

// 3. äº¤æ¢ä¸¤æ•°ï¼ˆæ— éœ€ä¸´æ—¶å˜é‡ï¼‰
a = a ^ b;
b = a ^ b;
a = a ^ b;
```

---

#### äº”ã€èµ‹å€¼è¿ç®—ç¬¦
| è¿ç®—ç¬¦ | ç¤ºä¾‹       | ç­‰ä»·äº        |
| ------ | ---------- | ------------- |
| `=`    | `a = 5`    | `a = 5`       |
| `+=`   | `a += 3`   | `a = a + 3`   |
| `-=`   | `a -= 2`   | `a = a - 2`   |
| `*=`   | `a *= 4`   | `a = a * 4`   |
| `/=`   | `a /= 2`   | `a = a / 2`   |
| `%=`   | `a %= 3`   | `a = a % 3`   |
| `&=`   | `a &= b`   | `a = a & b`   |
| `|=`   | `a |= b`   | `a = a | b`   |
| `^=`   | `a ^= b`   | `a = a ^ b`   |
| `<<=`  | `a <<= 2`  | `a = a << 2`  |
| `>>=`  | `a >>= 2`  | `a = a >> 2`  |
| `>>>=` | `a >>>= 2` | `a = a >>> 2` |

**å¤åˆèµ‹å€¼ç‰¹æ€§**ï¼š
```java
int x = 10;
x += 5;      // x=15
x *= 2;      // x=30

// è‡ªåŠ¨ç±»å‹è½¬æ¢
byte b = 100;
b += 50;     // æ­£ç¡®ï¼ˆç­‰ä»·äº b = (byte)(b + 50)ï¼‰
b = b + 50;  // é”™è¯¯ï¼ˆéœ€è¦å¼ºåˆ¶è½¬æ¢ï¼‰
```

---

#### å…­ã€æ¡ä»¶è¿ç®—ç¬¦ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦ï¼‰
**è¯­æ³•**ï¼š`æ¡ä»¶ ? è¡¨è¾¾å¼1 : è¡¨è¾¾å¼2`

```java
// åŸºæœ¬ç”¨æ³•
int score = 85;
String result = (score >= 60) ? "åŠæ ¼" : "ä¸åŠæ ¼"; // "åŠæ ¼"

// åµŒå¥—ç”¨æ³•
String grade = (score >= 90) ? "A" : 
               (score >= 80) ? "B" : 
               (score >= 70) ? "C" : "D"; // B

// æ›¿ä»£ç®€å•if-else
int max = (a > b) ? a : b;
```

---

#### ä¸ƒã€å…¶ä»–è¿ç®—ç¬¦
| è¿ç®—ç¬¦       | åç§°     | ç¤ºä¾‹                    | è¯´æ˜                   |
| ------------ | -------- | ----------------------- | ---------------------- |
| `instanceof` | ç±»å‹æ£€æŸ¥ | `obj instanceof String` | æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šç±»å‹ |
| `.`          | æˆå‘˜è®¿é—® | `person.age`            | è®¿é—®å¯¹è±¡æˆå‘˜           |
| `[]`         | æ•°ç»„è®¿é—® | `arr[0]`                | è®¿é—®æ•°ç»„å…ƒç´            |
| `()`         | æ–¹æ³•è°ƒç”¨ | `System.out.println()`  | è°ƒç”¨æ–¹æ³•               |
| `new`        | å¯¹è±¡åˆ›å»º | `new ArrayList<>()`     | åˆ›å»ºæ–°å¯¹è±¡             |
| `::`         | æ–¹æ³•å¼•ç”¨ | `System.out::println`   | Java 8+ æ–¹æ³•å¼•ç”¨       |

```java
// instanceof ç¤ºä¾‹
Object obj = "Hello";
if (obj instanceof String) {
    String s = (String) obj; // å®‰å…¨è½¬æ¢
    System.out.println(s.length());
}

// æ–¹æ³•å¼•ç”¨ç¤ºä¾‹
List<String> list = Arrays.asList("A", "B", "C");
list.forEach(System.out::println);
```

---

#### å…«ã€è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰
| ä¼˜å…ˆçº§ | è¿ç®—ç¬¦                               | ç»“åˆæ€§ |
| ------ | ------------------------------------ | ------ |
| 1      | `()` `[]` `.` `new` `::`             | å·¦â†’å³  |
| 2      | `++` `--` `~` `!` `+`(æ­£) `-`(è´Ÿ)    | å³â†’å·¦  |
| 3      | `*` `/` `%`                          | å·¦â†’å³  |
| 4      | `+` `-`                              | å·¦â†’å³  |
| 5      | `<<` `>>` `>>>`                      | å·¦â†’å³  |
| 6      | `<` `<=` `>` `>=` `instanceof`       | å·¦â†’å³  |
| 7      | `==` `!=`                            | å·¦â†’å³  |
| 8      | `&`                                  | å·¦â†’å³  |
| 9      | `^`                                  | å·¦â†’å³  |
| 10     | `|`                                  | å·¦â†’å³  |
| 11     | `&&`                                 | å·¦â†’å³  |
| 12     | `||`                                 | å·¦â†’å³  |
| 13     | `?:`                                 | å³â†’å·¦  |
| 14     | `=` `+=` `-=` `*=` `/=` ç­‰èµ‹å€¼è¿ç®—ç¬¦ | å³â†’å·¦  |

**ä¼˜å…ˆçº§ç¤ºä¾‹**ï¼š
```java
int a = 10, b = 5, c = 2;
int result = a + b * c;   // 10 + (5*2) = 20ï¼ˆä¹˜æ³•ä¼˜å…ˆï¼‰
boolean flag = a > b && b < c; // (a>b) && (b<c)
```

---

#### ä¹ã€ç‰¹æ®Šè¿ç®—ç¬¦æŠ€å·§

1. **ç©ºå®‰å…¨è®¿é—®ï¼ˆJava 8+ï¼‰**ï¼š
   ```java
   String str = null;
   int length = (str != null) ? str.length() : 0; // ä¼ ç»Ÿæ–¹å¼
   int safeLength = Optional.ofNullable(str).map(String::length).orElse(0); // Optional
   ```

2. **æ•°å€¼æº¢å‡ºæ£€æµ‹**ï¼š
   ```java
   int max = Integer.MAX_VALUE;
   try {
       int overflow = Math.addExact(max, 1); // æŠ›å‡ºArithmeticException
   } catch (ArithmeticException e) {
       System.out.println("æ•°å€¼æº¢å‡ºï¼");
   }
   ```

3. **ä½æ“ä½œé«˜çº§æŠ€å·§**ï¼š
   ```java
   // åˆ¤æ–­æ˜¯å¦ä¸º2çš„å¹‚æ¬¡
   boolean isPowerOfTwo = (n > 0) && ((n & (n - 1)) == 0);
   
   // å¿«é€Ÿè®¡ç®—ç»å¯¹å€¼
   int abs = (n ^ (n >> 31)) - (n >> 31);
   ```

4. **ç±»å‹å®‰å…¨è½¬æ¢**ï¼š
   ```java
   Number num = 3.14;
   if (num instanceof Double) {
       double d = (Double) num; // å®‰å…¨è½¬æ¢
   }
   ```

---

#### åã€å¸¸è§é”™è¯¯åŠé¿å…

1. **æ•´æ•°æº¢å‡º**ï¼š
   ```java
   // é”™è¯¯
   int billion = 1_000_000_000;
   int result = billion * 3; // -1,294,967,296ï¼ˆæº¢å‡ºï¼‰
   
   // è§£å†³
   long safeResult = (long)billion * 3;
   ```

2. **æµ®ç‚¹æ•°ç­‰å€¼æ¯”è¾ƒ**ï¼š
   ```java
   // é”™è¯¯
   if (0.1 + 0.2 == 0.3) { /* ä¸ä¼šæ‰§è¡Œ */ }
   
   // æ­£ç¡®
   final double EPSILON = 1e-10;
   if (Math.abs(0.1 + 0.2 - 0.3) < EPSILON) { /* æ‰§è¡Œ */ }
   ```

3. **ç©ºæŒ‡é’ˆå¼‚å¸¸**ï¼š
   ```java
   // é”™è¯¯
   String str = null;
   if (str.equals("test")) { /* NullPointerException */ }
   
   // æ­£ç¡®
   if ("test".equals(str)) { /* å®‰å…¨ */ }
   ```

4. **è¿ç®—ç¬¦ä¼˜å…ˆçº§æ··æ·†**ï¼š
   ```java
   // é”™è¯¯é¢„æœŸ
   boolean flag = a & b == c; // ç­‰ä»·äº a & (b == c)
   
   // æ­£ç¡®æ–¹å¼
   boolean correct = (a & b) == c;
   ```

> **æœ€ä½³å®è·µ**ï¼šå¤æ‚è¡¨è¾¾å¼ä½¿ç”¨æ‹¬å·æ˜ç¡®ä¼˜å…ˆçº§ï¼Œé¿å…ä¾èµ–é»˜è®¤ä¼˜å…ˆçº§è§„åˆ™ã€‚å¯¹äºå…³é”®è®¡ç®—ï¼Œæ·»åŠ æº¢å‡ºæ£€æµ‹å’Œæµ®ç‚¹è¯¯å·®å¤„ç†ï¼Œç¡®ä¿è®¡ç®—ç»“æœçš„æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚



## <span id="string">å­—ç¬¦ä¸²</span>

ç°åœ¨æˆ‘ä»¬æ¥æ·±å…¥æ¢è®¨Javaä¸­çš„å­—ç¬¦ä¸²ï¼ˆStringï¼‰ç±»å‹ã€‚å­—ç¬¦ä¸²åœ¨Javaä¸­æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç±»ï¼Œç”¨äºè¡¨ç¤ºå’Œæ“ä½œå­—ç¬¦åºåˆ—ã€‚ç”±äºå­—ç¬¦ä¸²åœ¨ç¼–ç¨‹ä¸­æ— å¤„ä¸åœ¨ï¼Œå› æ­¤Javaæä¾›äº†ä¸°å¯Œçš„APIæ¥æ”¯æŒå­—ç¬¦ä¸²æ“ä½œã€‚

## Java å­—ç¬¦ä¸²æ·±åº¦è§£æ

### ä¸€ã€å­—ç¬¦ä¸²çš„æœ¬è´¨ä¸ç‰¹æ€§

#### 1. å­—ç¬¦ä¸²åœ¨ Java ä¸­çš„å®šä½
- **å¼•ç”¨ç±»å‹**ï¼š`java.lang.String` ç±»çš„å®ä¾‹
- **ä¸å¯å˜æ€§(Immutability)**ï¼šå­—ç¬¦ä¸²å¯¹è±¡ä¸€æ—¦åˆ›å»ºï¼Œå…¶å†…å®¹**ä¸å¯æ›´æ”¹**
- **å­˜å‚¨æœºåˆ¶**ï¼šä½¿ç”¨ UTF-16 ç¼–ç å­˜å‚¨ Unicode å­—ç¬¦åºåˆ—

#### 2. å­—ç¬¦ä¸²ä¸å¯å˜æ€§çš„ä¼˜åŠ¿
```java
String s1 = "hello";
String s2 = s1.toUpperCase(); // åˆ›å»ºæ–°å¯¹è±¡"HELLO"ï¼Œs1ä»ä¸º"hello"

// ä¼˜åŠ¿ï¼š
// 1. çº¿ç¨‹å®‰å…¨ï¼ˆæ— éœ€åŒæ­¥ï¼‰
// 2. å“ˆå¸Œå€¼å¯ç¼“å­˜ï¼ˆæé«˜HashMapæ€§èƒ½ï¼‰
// 3. å­—ç¬¦ä¸²å¸¸é‡æ± ä¼˜åŒ–
```

#### 3. å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Poolï¼‰
- **JVM ç‰¹æ®Šå†…å­˜åŒºåŸŸ**ï¼šå­˜å‚¨å­—ç¬¦ä¸²å­—é¢é‡
- **å­—é¢é‡åˆ›å»ºæµç¨‹**ï¼š
  
  ```mermaid
  graph LR
    A[åˆ›å»ºå­—ç¬¦ä¸²å­—é¢é‡] --> B{æ± ä¸­å·²å­˜åœ¨?}
    B -->|æ˜¯| C[è¿”å›æ± ä¸­å¼•ç”¨]
    B -->|å¦| D[æ± ä¸­åˆ›å»ºæ–°å¯¹è±¡]
  ```

```java
String s1 = "Java";    // æ± ä¸­åˆ›å»º
String s2 = "Java";    // å¤ç”¨æ± ä¸­å¯¹è±¡
String s3 = new String("Java"); // å †ä¸­æ–°å»ºå¯¹è±¡

System.out.println(s1 == s2); // trueï¼ˆåŒä¸€å¯¹è±¡ï¼‰
System.out.println(s1 == s3); // falseï¼ˆä¸åŒå¯¹è±¡ï¼‰
```

### äºŒã€å­—ç¬¦ä¸²åˆ›å»ºæ–¹å¼å¯¹æ¯”

| åˆ›å»ºæ–¹å¼                  | å†…å­˜ä½ç½® | æ˜¯å¦å…¥æ±  | é€‚ç”¨åœºæ™¯         |
| ------------------------- | -------- | -------- | ---------------- |
| å­—é¢é‡èµ‹å€¼ `String s="a"` | å¸¸é‡æ±    | æ˜¯       | æ¨èå¸¸è§„ä½¿ç”¨     |
| `new String("a")`         | å †å†…å­˜   | å¦       | éœ€è¦ç‹¬ç«‹å¯¹è±¡æ—¶   |
| `new String(char[])`      | å †å†…å­˜   | å¦       | å­—ç¬¦æ•°ç»„è½¬å­—ç¬¦ä¸² |
| `StringBuilder.toString`  | å †å†…å­˜   | å¦       | åŠ¨æ€æ„å»ºå­—ç¬¦ä¸²   |
| `intern()` æ–¹æ³•           | å¸¸é‡æ±    | æ˜¯       | æ‰‹åŠ¨å…¥æ± ä¼˜åŒ–å†…å­˜ |

### ä¸‰ã€å­—ç¬¦ä¸²æ ¸å¿ƒæ“ä½œ API

#### 1. åŸºç¡€æŸ¥è¯¢æ“ä½œ
```java
String str = "Hello, ä¸–ç•Œ!";

// é•¿åº¦è·å–ï¼ˆUTF-16ä»£ç å•å…ƒæ•°é‡ï¼‰
int len = str.length(); // 10ï¼ˆæ³¨æ„ï¼šä¸­æ–‡å 1ä¸ªä»£ç å•å…ƒï¼‰

// çœŸå®å­—ç¬¦æ•°é‡ï¼ˆç ç‚¹æ•°é‡ï¼‰
int trueLength = str.codePointCount(0, str.length()); // 9

// å­—ç¬¦è·å–
char firstChar = str.charAt(0); // 'H'
int codePoint = str.codePointAt(7); // 19990ï¼ˆ'ä¸–'çš„Unicodeç ç‚¹ï¼‰

// å­ä¸²æŸ¥æ‰¾
int index = str.indexOf("ä¸–ç•Œ"); // 7
int lastIndex = str.lastIndexOf("l"); // 3
boolean contains = str.contains("Hello"); // true
```

#### 2. å­—ç¬¦ä¸²æ¯”è¾ƒ
```java
String a = "Java";
String b = "java";

// åŒºåˆ†å¤§å°å†™æ¯”è¾ƒ
boolean equals1 = a.equals(b); // false

// å¿½ç•¥å¤§å°å†™æ¯”è¾ƒ
boolean equals2 = a.equalsIgnoreCase(b); // true

// å­—å…¸åºæ¯”è¾ƒ
int cmp = a.compareTo(b); // -32ï¼ˆè´Ÿæ•°è¡¨ç¤ºa<bï¼‰
int cmpIgnoreCase = a.compareToIgnoreCase(b); // 0

// å†…å®¹ä¸ç±»å‹å®‰å…¨æ¯”è¾ƒ
boolean contentEquals = a.contentEquals(new StringBuilder("Java")); // true
```

#### 3. å­—ç¬¦ä¸²è½¬æ¢ä¸ç”Ÿæˆ
```java
// å¤§å°å†™è½¬æ¢
String upper = "hello".toUpperCase(); // "HELLO"
String lower = "WORLD".toLowerCase(); // "world"

// å»é™¤ç©ºç™½
String trimmed = "  text  ".trim(); // "text"
String stripped = " \u2000text\u2000 ".strip(); // "text"ï¼ˆJava 11+ï¼‰

// æ ¼å¼åŒ–å­—ç¬¦ä¸²
String formatted = String.format("%,d", 1000000); // "1,000,000"

// é‡å¤å­—ç¬¦ä¸²ï¼ˆJava 11+ï¼‰
String repeated = "ab".repeat(3); // "ababab"
```

#### 4. å­ä¸²æ“ä½œ
```java
String full = "Hello, World!";

// å­ä¸²æˆªå–
String sub1 = full.substring(7); // "World!"
String sub2 = full.substring(0, 5); // "Hello"

// åˆ†å‰²å­—ç¬¦ä¸²
String[] parts = "a,b,c".split(","); // ["a", "b", "c"]
String[] regexSplit = "a b  c".split("\\s+"); // ["a", "b", "c"]

// æ­£åˆ™åŒ¹é…
boolean matches = "123abc".matches("\\d+.*"); // true
```

#### 5. æ›¿æ¢æ“ä½œ
```java
String original = "apple orange apple";

// ç®€å•æ›¿æ¢
String replacedChar = original.replace('a', 'A'); // "Apple orAnge Apple"
String replacedSeq = original.replace("apple", "APPLE"); // "APPLE orange APPLE"

// æ­£åˆ™æ›¿æ¢
String regexReplaced = original.replaceAll("a\\w+e", "FRUIT"); // "FRUIT orFRUIT FRUIT"
```

### å››ã€å­—ç¬¦ä¸²æ€§èƒ½ä¼˜åŒ–

#### 1. æ‹¼æ¥æ“ä½œæ€§èƒ½å¯¹æ¯”
| æ‹¼æ¥æ–¹å¼          | é€‚ç”¨åœºæ™¯                 | æ€§èƒ½ç‰¹ç‚¹               |
| ----------------- | ------------------------ | ---------------------- |
| `+` è¿ç®—ç¬¦        | å°‘é‡å›ºå®šå­—ç¬¦ä¸²æ‹¼æ¥       | ç¼–è¯‘æœŸä¼˜åŒ–ï¼ˆå¸¸é‡æŠ˜å ï¼‰ |
| `String.concat()` | å°‘é‡æ‹¼æ¥                 | æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡         |
| `StringBuilder`   | å¾ªç¯å†…æˆ–å¤§é‡å­—ç¬¦ä¸²æ‹¼æ¥   | å¯å˜ï¼Œé«˜æ€§èƒ½           |
| `StringBuffer`    | å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å­—ç¬¦ä¸²æ‹¼æ¥ | çº¿ç¨‹å®‰å…¨ï¼Œç¨æ…¢         |
| `String.join()`   | é›†åˆå…ƒç´ æ‹¼æ¥             | ç®€æ´é«˜æ•ˆï¼ˆJava 8+ï¼‰    |

```java
// é”™è¯¯ç¤ºä¾‹ï¼šå¾ªç¯ä¸­ä½¿ç”¨ + æ‹¼æ¥
String result = "";
for (int i = 0; i < 10000; i++) {
    result += i; // åˆ›å»º10000ä¸ªä¸­é—´å¯¹è±¡ï¼
}

// æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨StringBuilder
StringBuilder sb = new StringBuilder();
for (int i = 0; i < 10000; i++) {
    sb.append(i);
}
String optimized = sb.toString();
```

#### 2. å†…å­˜ä¼˜åŒ–æŠ€å·§
```java
// 1. ä½¿ç”¨intern()æ–¹æ³•å…¥æ± 
String s1 = new String("Java").intern(); // å°è¯•åŠ å…¥å¸¸é‡æ± 
String s2 = "Java";
System.out.println(s1 == s2); // true

// 2. é‡ç”¨ä¸å¯å˜å¯¹è±¡
public static final String CONST_STRING = "Constant Value";

// 3. é¿å…å¤§å­—ç¬¦ä¸²å­ä¸²å†…å­˜æ³„æ¼ï¼ˆJava 7u6+å·²ä¿®å¤ï¼‰
String big = new String(new byte[10_000_000]); // å¤§å­—ç¬¦ä¸²
String sub = big.substring(0, 5); // Java 7u6å‰ä¼šä¿ç•™æ•´ä¸ªchar[]

// 4. ä½¿ç”¨å­—ç¬¦æ•°ç»„å¤„ç†æ•æ„Ÿæ•°æ®
char[] password = {'s', 'e', 'c', 'r', 'e', 't'};
// ä½¿ç”¨åç«‹å³æ¸…é™¤
Arrays.fill(password, '\0');
```

### äº”ã€å­—ç¬¦ä¸²ä¸ç¼–ç å¤„ç†

#### 1. ç¼–ç è½¬æ¢
```java
String text = "ä½ å¥½ï¼Œä¸–ç•Œï¼";

// å­—ç¬¦ä¸² â†’ å­—èŠ‚æ•°ç»„ï¼ˆæŒ‡å®šç¼–ç ï¼‰
byte[] utf8Bytes = text.getBytes(StandardCharsets.UTF_8);
byte[] gbkBytes = text.getBytes("GBK");

// å­—èŠ‚æ•°ç»„ â†’ å­—ç¬¦ä¸²ï¼ˆæŒ‡å®šç¼–ç ï¼‰
String fromUtf8 = new String(utf8Bytes, StandardCharsets.UTF_8);
String fromGbk = new String(gbkBytes, "GBK");

// å¸¸è§ä¹±ç é—®é¢˜è§£å†³
byte[] data = {(byte)0xC4, (byte)0xE3}; // "ä½ "çš„GBKç¼–ç 
String wrong = new String(data, StandardCharsets.UTF_8); // ä¹±ç 
String correct = new String(data, "GBK"); // "ä½ "
```

#### 2. ç¼–ç æ£€æµ‹ä¸å¤„ç†
```java
// è‡ªåŠ¨æ£€æµ‹ç¼–ç ï¼ˆä½¿ç”¨juniversalchardetç­‰åº“ï¼‰
byte[] unknownData = ...;
Charset detectedCharset = Charset.forName("UTF-8"); // ç®€åŒ–ç¤ºä¾‹
String decoded = new String(unknownData, detectedCharset);

// å¤„ç†BOMï¼ˆByte Order Markï¼‰
String withBom = "\uFEFF" + "Content";
String trimmed = withBom.replace("\uFEFF", "");
```

### å…­ã€Java 8+ æ–°ç‰¹æ€§

#### 1. å­—ç¬¦ä¸²è¿æ¥å™¨ï¼ˆJava 8ï¼‰
```java
// ä½¿ç”¨StringJoiner
StringJoiner joiner = new StringJoiner(", ", "[", "]");
joiner.add("Apple").add("Orange").add("Banana");
String result = joiner.toString(); // "[Apple, Orange, Banana]"

// ä½¿ç”¨String.join
String joined = String.join(" - ", "A", "B", "C"); // "A - B - C"
```

#### 2. æ–‡æœ¬å—ï¼ˆText Blocksï¼ŒJava 15+ï¼‰
```java
// ä¼ ç»Ÿå¤šè¡Œå­—ç¬¦ä¸²
String oldHtml = "<html>\n" +
                 "    <body>\n" +
                 "        <p>Hello</p>\n" +
                 "    </body>\n" +
                 "</html>";

// æ–‡æœ¬å—è¯­æ³•
String newHtml = """
                 <html>
                     <body>
                         <p>Hello</p>
                     </body>
                 </html>
                 """;
```

#### 3. æ–°å¢æ–¹æ³•ï¼ˆJava 11+ï¼‰
```java
// åˆ¤æ–­ç©ºç™½
boolean isBlank = "   ".isBlank(); // true

// å»é™¤é¦–å°¾ç©ºç™½
String stripped = "  hello  ".strip(); // "hello"

// å»é™¤é¦–éƒ¨ç©ºç™½
String leading = "  text".stripLeading(); // "text"

// å»é™¤å°¾éƒ¨ç©ºç™½
String trailing = "text  ".stripTrailing(); // "text"

// æŒ‰è¡Œåˆ†å‰²
String lines = "Line1\nLine2\r\nLine3";
List<String> lineList = lines.lines().collect(Collectors.toList());
```

### ä¸ƒã€æœ€ä½³å®è·µä¸é™·é˜±è§„é¿

#### 1. å­—ç¬¦ä¸²æ¯”è¾ƒé™·é˜±
```java
// é”™è¯¯æ–¹å¼
if (str == "literal") { ... } // å¯èƒ½å¤±è´¥

// æ­£ç¡®æ–¹å¼
if ("literal".equals(str)) { ... } // é¿å…NPE
if (str != null && str.equals("literal")) { ... }
```

#### 2. å­—ç¬¦ä¸²æ‹¼æ¥ä¼˜åŒ–
```java
// ç¼–è¯‘å™¨ä¼˜åŒ–ï¼ˆå¸¸é‡æŠ˜å ï¼‰
String optimized = "a" + "b" + "c"; // ç¼–è¯‘ä¸º "abc"

// è¿è¡Œæ—¶æ‹¼æ¥ï¼ˆä½¿ç”¨StringBuilderï¼‰
String dynamic = "a" + getValue() + "c"; 
// ç­‰ä»·äºï¼šnew StringBuilder().append("a").append(getValue()).append("c")
```

#### 3. æ•æ„Ÿæ•°æ®å¤„ç†
```java
// é¿å…åœ¨æ—¥å¿—ä¸­è¾“å‡ºæ•æ„Ÿä¿¡æ¯
String password = "secret";
System.out.println("Password: " + password); // å±é™©ï¼

// ä½¿ç”¨å ä½ç¬¦æˆ–æ©ç 
log.debug("User login: {}", username);
log.debug("Password attempt: ******");

// ä½¿ç”¨åç«‹å³æ¸…é™¤ï¼ˆå­—ç¬¦æ•°ç»„ï¼‰
char[] sensitive = passwordField.getPassword();
try {
    // ä½¿ç”¨æ•æ„Ÿæ•°æ®...
} finally {
    Arrays.fill(sensitive, '\0');
}
```

#### 4. æ­£åˆ™è¡¨è¾¾å¼é¢„ç¼–è¯‘
```java
// é¿å…æ¯æ¬¡è°ƒç”¨é‡æ–°ç¼–è¯‘
private static final Pattern EMAIL_PATTERN = 
    Pattern.compile("^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,6}$", Pattern.CASE_INSENSITIVE);

boolean isValidEmail(String email) {
    return EMAIL_PATTERN.matcher(email).matches();
}
```

### å…«ã€å­—ç¬¦ä¸²åº”ç”¨åœºæ™¯

#### 1. æ¨¡æ¿å¼•æ“å®ç°
```java
String template = "Hello, ${name}! Your balance is ${balance}";
Map<String, Object> data = Map.of("name", "Alice", "balance", 100.50);

String result = template;
for (Map.Entry<String, Object> entry : data.entrySet()) {
    result = result.replace("${" + entry.getKey() + "}", 
                            entry.getValue().toString());
}
// "Hello, Alice! Your balance is 100.5"
```

#### 2. å­—ç¬¦ä¸²å‹ç¼©ç®—æ³•
```java
// ç®€å•æ¸¸ç¨‹ç¼–ç ï¼ˆRun-Length Encodingï¼‰
String input = "AAAABBBCCDAA";
StringBuilder compressed = new StringBuilder();
int count = 1;

for (int i = 1; i <= input.length(); i++) {
    if (i == input.length() || input.charAt(i) != input.charAt(i - 1)) {
        compressed.append(count).append(input.charAt(i - 1));
        count = 1;
    } else {
        count++;
    }
}
// "4A3B2C1D2A"
```

#### 3. å›½é™…åŒ–å’Œæœ¬åœ°åŒ–
```java
// èµ„æºåŒ…ç®¡ç†
ResourceBundle bundle = ResourceBundle.getBundle("Messages", Locale.CHINA);
String greeting = bundle.getString("greeting"); // è·å–"ä½ å¥½"

// æ¶ˆæ¯æ ¼å¼åŒ–
String pattern = bundle.getString("welcome");
String formatted = MessageFormat.format(pattern, "Alice", 3);
// æ¨¡å¼: "æ¬¢è¿{0}ï¼Œæ‚¨æ˜¯ä»Šå¤©ç¬¬{1}ä½è®¿å®¢"
```

### æ€»ç»“
Java å­—ç¬¦ä¸²æ˜¯å¼€å‘ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œå…¶æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š
1. **ä¸å¯å˜æ€§**ï¼šç¡®ä¿çº¿ç¨‹å®‰å…¨å’Œæ€§èƒ½ä¼˜åŒ–
2. **å­—ç¬¦ä¸²å¸¸é‡æ± **ï¼šå‡å°‘å†…å­˜å¼€é”€ï¼Œæé«˜æ•ˆç‡
3. **ä¸°å¯Œçš„ API**ï¼šæä¾›å…¨é¢çš„å­—ç¬¦ä¸²æ“ä½œèƒ½åŠ›
4. **ç¼–ç æ”¯æŒ**ï¼šå®Œå–„çš„ Unicode å’Œå­—ç¬¦é›†å¤„ç†

åœ¨å®é™…å¼€å‘ä¸­ï¼š
- ä¼˜å…ˆä½¿ç”¨å­—é¢é‡åˆ›å»ºå­—ç¬¦ä¸²
- å¾ªç¯æ‹¼æ¥ä½¿ç”¨ `StringBuilder`
- æ¯”è¾ƒå†…å®¹ä½¿ç”¨ `equals()` è€Œé `==`
- å¤„ç†æ–‡æœ¬æ³¨æ„å­—ç¬¦ç¼–ç 
- åˆ©ç”¨ Java æ–°ç‰¹æ€§ç®€åŒ–ä»£ç 

æŒæ¡å­—ç¬¦ä¸²çš„åº•å±‚æœºåˆ¶å’Œæœ€ä½³å®è·µï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡ Java ç¨‹åºçš„æ€§èƒ½å’Œå¥å£®æ€§ã€‚

> [!IMPORTANT]
>
> ## Java å­—ç¬¦ä¸²å¤„ç†ä¸‰å‰‘å®¢ï¼šStringã€StringBufferã€StringBuilder
>
> > **æ ¸å¿ƒåŒºåˆ«ä¸€å¥è¯æ€»ç»“**ï¼š  
> > `String` æ˜¯**ä¸å¯å˜**å­—ç¬¦åºåˆ—ï¼Œé€‚ç”¨äºé™æ€å­—ç¬¦ä¸²ï¼›  
> > `StringBuffer` æ˜¯**çº¿ç¨‹å®‰å…¨**çš„å¯å˜å­—ç¬¦åºåˆ—ï¼›  
> > `StringBuilder` æ˜¯**éçº¿ç¨‹å®‰å…¨**çš„é«˜æ€§èƒ½å¯å˜å­—ç¬¦åºåˆ—ã€‚
>
> ---
>
> ### 1. Stringï¼šä¸å¯å˜å­—ç¬¦ä¸²
>
> #### æ ¸å¿ƒç‰¹æ€§
> - **ä¸å¯å˜æ€§**ï¼šä¸€æ—¦åˆ›å»ºï¼Œå†…å®¹ä¸å¯ä¿®æ”¹ï¼ˆæ‰€æœ‰"ä¿®æ”¹"æ“ä½œå®é™…åˆ›å»ºæ–°å¯¹è±¡ï¼‰
> - **å­—ç¬¦ä¸²å¸¸é‡æ± **ï¼šé€šè¿‡å­—é¢é‡åˆ›å»ºæ—¶ä¼šå¤ç”¨æ± ä¸­å¯¹è±¡ï¼ˆäº«å…ƒæ¨¡å¼ï¼‰
> - **çº¿ç¨‹å®‰å…¨**ï¼šå¤©ç„¶çº¿ç¨‹å®‰å…¨ï¼ˆå› ä¸å¯å˜ï¼‰
>
> ```java
> // åˆ›å»ºæ–¹å¼
> String s1 = "Hello";         // å­—é¢é‡ï¼ˆä½¿ç”¨å¸¸é‡æ± ï¼‰
> String s2 = new String("Hello"); // æ˜¾å¼åˆ›å»ºæ–°å¯¹è±¡
> 
> // "ä¿®æ”¹"æ“ä½œå®é™…åˆ›å»ºæ–°å¯¹è±¡
> String s3 = s1.concat(" World"); // æ–°å¯¹è±¡"Hello World"
> ```
>
> #### å†…å­˜ç¤ºæ„å›¾
> ```
> æ ˆå†…å­˜           å †å†…å­˜ï¼ˆå­—ç¬¦ä¸²å¸¸é‡æ± ï¼‰
> s1 â”€â”€â”€â”€â”€â”€â”€â”€â†’ "Hello"
> s2 â”€â”€â”€â”€â”€â”€â”€â”€â†’ new String("Hello") â”€â”€â”€â”
> s3 â”€â”€â”€â”€â”€â”€â”€â”€â†’ "Hello World"          â”‚
>                    â†‘                â”‚
>                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
> ```
>
> #### é€‚ç”¨åœºæ™¯
> âœ… å­—ç¬¦ä¸²å†…å®¹ä¸é¢‘ç¹å˜åŒ–  
> âœ… éœ€è¦çº¿ç¨‹å®‰å…¨çš„ç¯å¢ƒ  
> âœ… ä½œä¸º HashMap é”®å€¼ï¼ˆå› ä¸å¯å˜å“ˆå¸Œå€¼ç¨³å®šï¼‰
>
> ---
>
> ### 2. StringBufferï¼šçº¿ç¨‹å®‰å…¨çš„å¯å˜å­—ç¬¦ä¸²
>
> #### æ ¸å¿ƒç‰¹æ€§
> - **å¯å˜æ€§**ï¼šç›´æ¥ä¿®æ”¹åŸå¯¹è±¡å†…å®¹ï¼ˆæ— éœ€åˆ›å»ºæ–°å¯¹è±¡ï¼‰
> - **çº¿ç¨‹å®‰å…¨**ï¼šæ‰€æœ‰æ–¹æ³•ç”¨ `synchronized` ä¿®é¥°
> - **æ€§èƒ½å¼€é”€**ï¼šåŒæ­¥é”å¸¦æ¥é¢å¤–æ€§èƒ½æŸè€—
>
> ```java
> StringBuffer sb = new StringBuffer("Hello");
> sb.append(" World");  // ä¿®æ”¹åŸå¯¹è±¡ â†’ "Hello World"
> sb.insert(5, ",");    // â†’ "Hello, World"
> sb.reverse();         // â†’ "dlroW ,olleH"
> ```
>
> #### å…³é”®æ–¹æ³•
> | æ–¹æ³•                   | ä½œç”¨         |
> | ---------------------- | ------------ |
> | `append(x)`            | è¿½åŠ å†…å®¹     |
> | `insert(offset, x)`    | æŒ‡å®šä½ç½®æ’å…¥ |
> | `delete(start, end)`   | åˆ é™¤å­ä¸²     |
> | `reverse()`            | åè½¬å­—ç¬¦ä¸²   |
> | `setCharAt(index, ch)` | æ›¿æ¢å•ä¸ªå­—ç¬¦ |
>
> #### é€‚ç”¨åœºæ™¯
> âœ… å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å­—ç¬¦ä¸²æ“ä½œ  
> âœ… éœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨çš„å¤æ‚å­—ç¬¦ä¸²å¤„ç†
>
> ---
>
> ### 3. StringBuilderï¼šé«˜æ€§èƒ½çš„å¯å˜å­—ç¬¦ä¸²
>
> #### æ ¸å¿ƒç‰¹æ€§
> - **å¯å˜æ€§**ï¼šåŒ StringBuffer ç›´æ¥ä¿®æ”¹å†…å®¹
> - **éçº¿ç¨‹å®‰å…¨**ï¼šæ— åŒæ­¥é”ï¼ˆæ€§èƒ½æ¯” StringBuffer é«˜ 10-15%ï¼‰
> - **API å…¼å®¹**ï¼šæ–¹æ³•ä¸ StringBuffer å®Œå…¨ä¸€è‡´
>
> ```java
> StringBuilder sb = new StringBuilder("Hello");
> sb.append(" World");  // â†’ "Hello World"
> sb.replace(5, 6, ","); // â†’ "Hello, World"
> ```
>
> #### æ€§èƒ½å¯¹æ¯”ï¼ˆå•çº¿ç¨‹ç¯å¢ƒï¼‰
> ```
> æ“ä½œæ¬¡æ•°  | String   | StringBuffer | StringBuilder
> --------|----------|--------------|--------------
> 10,000  | 150 ms   | 5 ms         | 3 ms
> 100,000 | 15,000 ms| 25 ms        | 15 ms
> ```
>
> #### é€‚ç”¨åœºæ™¯
> âœ… å•çº¿ç¨‹ç¯å¢ƒä¸‹çš„å­—ç¬¦ä¸²æ“ä½œ  
> âœ… é«˜æ€§èƒ½è¦æ±‚çš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆå¦‚å¾ªç¯ä½“å†…ï¼‰
>
> ---
>
> ### ä¸‰è€…çš„æ ¸å¿ƒå·®å¼‚å¯¹æ¯”
>
> | ç‰¹æ€§         | String             | StringBuffer     | StringBuilder    |
> | ------------ | ------------------ | ---------------- | ---------------- |
> | **å¯å˜æ€§**   | âŒ ä¸å¯å˜           | âœ… å¯å˜           | âœ… å¯å˜           |
> | **çº¿ç¨‹å®‰å…¨** | âœ…ï¼ˆå› ä¸å¯å˜ï¼‰      | âœ…ï¼ˆåŒæ­¥æ–¹æ³•ï¼‰    | âŒ                |
> | **æ€§èƒ½**     | ä½ï¼ˆé¢‘ç¹åˆ›å»ºå¯¹è±¡ï¼‰ | ä¸­ï¼ˆæœ‰åŒæ­¥å¼€é”€ï¼‰ | é«˜ï¼ˆæ— åŒæ­¥å¼€é”€ï¼‰ |
> | **å­˜å‚¨ä½ç½®** | å¸¸é‡æ± æˆ–å †         | å †               | å †               |
> | **å†…å­˜æ•ˆç‡** | ä½ï¼ˆå¤§é‡ä¸­é—´å¯¹è±¡ï¼‰ | é«˜               | é«˜               |
> | **é€‚ç”¨åœºæ™¯** | é™æ€å­—ç¬¦ä¸²         | å¤šçº¿ç¨‹å­—ç¬¦ä¸²æ“ä½œ | å•çº¿ç¨‹å­—ç¬¦ä¸²æ“ä½œ |
>
> ---
>
> ### ä½¿ç”¨æœ€ä½³å®è·µ
>
> #### 1. æ‹¼æ¥æ“ä½œé€‰æ‹©
> ```java
> // âŒ æ€§èƒ½ç¾éš¾ï¼ˆäº§ç”Ÿå¤§é‡ä¸´æ—¶å¯¹è±¡ï¼‰
> String result = "";
> for (int i = 0; i < 10000; i++) {
>     result += i; 
> }
> 
> // âœ… å•çº¿ç¨‹é¦–é€‰
> StringBuilder sb = new StringBuilder();
> for (int i = 0; i < 10000; i++) {
>     sb.append(i);
> }
> ```
>
> #### 2. åˆå§‹åŒ–å®¹é‡ä¼˜åŒ–
> ```java
> // é¢„ä¼°å¤§å°å‡å°‘æ‰©å®¹æ¬¡æ•°ï¼ˆé»˜è®¤å®¹é‡16ï¼‰
> StringBuilder sb = new StringBuilder(1024); 
> ```
>
> #### 3. é“¾å¼è°ƒç”¨
> ```java
> String message = new StringBuilder()
>     .append("User: ").append(userName)
>     .append(", Login at: ").append(new Date())
>     .toString();
> ```
>
> #### 4. çº¿ç¨‹å®‰å…¨é€‰æ‹©
> ```java
> // å¤šçº¿ç¨‹ç¯å¢ƒ
> StringBuffer safeBuffer = new StringBuffer();
> ExecutorService executor = Executors.newFixedThreadPool(4);
> for (int i = 0; i < 10; i++) {
>     executor.submit(() -> {
>         synchronized(safeBuffer) { // ä»éœ€å¤–éƒ¨åŒæ­¥ï¼
>             safeBuffer.append(Thread.currentThread().getName());
>         }
>     });
> }
> ```
>
> ---
>
> ### åº•å±‚åŸç†æ­ç§˜
>
> #### æ‰©å®¹æœºåˆ¶
> 1. åˆå§‹å®¹é‡ï¼š**16å­—ç¬¦**
> 2. æ‰©å®¹è§„åˆ™ï¼š`æ–°å®¹é‡ = åŸå®¹é‡ * 2 + 2`
> 3. æ•°æ®è¿ç§»ï¼š`Arrays.copyOf()`
>
> ```java
> // StringBuilder æ‰©å®¹æºç  (JDK 17)
> void expandCapacity(int minimumCapacity) {
>     int newCapacity = value.length * 2 + 2;
>     if (newCapacity < minimumCapacity) {
>         newCapacity = minimumCapacity;
>     }
>     value = Arrays.copyOf(value, newCapacity);
> }
> ```
>
> #### String + è¿ç®—ç¬¦çš„çœŸç›¸
> ```java
> // ç¼–è¯‘å‰
> String s = "A" + "B" + 123;
> 
> // ç¼–è¯‘åï¼ˆJDK 1.5+ï¼‰
> String s = new StringBuilder()
>                .append("A")
>                .append("B")
>                .append(123)
>                .toString();
> ```
>
> ---
>
> ### ç»å…¸é¢è¯•é¢˜è§£æ
>
> #### é—®é¢˜ï¼šä¸‹é¢ä»£ç åˆ›å»ºäº†å¤šå°‘ä¸ªå¯¹è±¡ï¼Ÿ
> ```java
> String s = new String("Hello");
> ```
> **ç­”æ¡ˆ**ï¼š1 æˆ– 2 ä¸ªå¯¹è±¡  
> - è‹¥å¸¸é‡æ± å·²æœ‰ "Hello"ï¼šä»… `new String()` åˆ›å»º 1 ä¸ªå †å¯¹è±¡
> - è‹¥å¸¸é‡æ± æ—  "Hello"ï¼šå…ˆåˆ›å»ºå­—é¢é‡å¯¹è±¡ï¼Œå†åˆ›å»º `new String()` å¯¹è±¡
>
> #### é—®é¢˜ï¼š`StringBuilder` å’Œ `StringBuffer` å¦‚ä½•é€‰æ‹©ï¼Ÿ
> **ç­”**ï¼š  
> - å•çº¿ç¨‹ç¯å¢ƒ â†’ `StringBuilder`ï¼ˆæ€§èƒ½ä¼˜å…ˆï¼‰  
> - å¤šçº¿ç¨‹ç¯å¢ƒ â†’ `StringBuffer`ï¼ˆå®‰å…¨ä¼˜å…ˆï¼‰æˆ– `StringBuilder + å¤–éƒ¨åŒæ­¥`
>
> ---
>
> ### æ€»ç»“æŒ‡å—
>
> | **åœºæ™¯**               | **æ¨èé€‰æ‹©**    | **åŸå› **           |
> | ---------------------- | --------------- | ------------------ |
> | å®šä¹‰é™æ€å­—ç¬¦ä¸²å¸¸é‡     | `String`        | åˆ©ç”¨å¸¸é‡æ± èŠ‚çœå†…å­˜ |
> | å•çº¿ç¨‹ä¸‹çš„å­—ç¬¦ä¸²æ‹¼æ¥   | `StringBuilder` | æœ€é«˜æ€§èƒ½           |
> | å¤šçº¿ç¨‹å…±äº«çš„å­—ç¬¦ä¸²æ“ä½œ | `StringBuffer`  | å†…ç½®çº¿ç¨‹å®‰å…¨       |
> | é«˜é¢‘ä¿®æ”¹çš„å¤§æ–‡æœ¬å¤„ç†   | `StringBuilder` | é¿å…ä¸­é—´å¯¹è±¡åˆ›å»º   |
> | SQL è¯­å¥/JSON åŠ¨æ€æ„å»º | `StringBuilder` | é“¾å¼è°ƒç”¨ä»£ç ç®€æ´   |
>
> > **ç»ˆæé€‰æ‹©ç­–ç•¥**ï¼š  
> > - ä¼˜å…ˆç”¨ `String`ï¼šå½“å­—ç¬¦ä¸²**ä¸éœ€ä¿®æ”¹**æ—¶  
> > - ä¼˜å…ˆç”¨ `StringBuilder`ï¼šå½“å­—ç¬¦ä¸²**é¢‘ç¹ä¿®æ”¹**ä¸”**çº¿ç¨‹å®‰å…¨æ— è¦æ±‚**æ—¶  
> > - ä¸å¾—ä¸ç”¨ `StringBuffer`ï¼šå½“**å¤šçº¿ç¨‹ä¿®æ”¹**åŒä¸€å­—ç¬¦ä¸²æ—¶



## <span id="scanner">`Scanner`çš„è¯»å–è¾“å…¥ä¸æ ¼å¼åŒ–è¾“å‡º</span>

### Java çš„ Scanner è¯»å–è¾“å…¥ä¸æ ¼å¼åŒ–è¾“å‡ºè¯¦è§£

#### ä¸€ã€Scanner è¯»å–è¾“å…¥
`java.util.Scanner` æ˜¯ Java ä¸­ç”¨äºè§£æåŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²çš„æ–‡æœ¬æ‰«æå™¨ï¼Œå¸¸ç”¨äºè¯»å–ç”¨æˆ·è¾“å…¥æˆ–æ–‡ä»¶å†…å®¹ã€‚

**1. åŸºç¡€ç”¨æ³•**

```java
import java.util.Scanner;

public class ScannerExample {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in); // åˆ›å»ºScannerå¯¹è±¡
        
        System.out.print("è¾“å…¥æ•´æ•°: ");
        int num = scanner.nextInt(); // è¯»å–æ•´æ•°
        
        System.out.print("è¾“å…¥æµ®ç‚¹æ•°: ");
        double d = scanner.nextDouble(); // è¯»å–åŒç²¾åº¦æµ®ç‚¹æ•°
        
        System.out.print("è¾“å…¥å­—ç¬¦ä¸²: ");
        String str = scanner.next(); // è¯»å–å•è¯ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰
        
        scanner.nextLine(); // æ¸…é™¤æ¢è¡Œç¬¦
        
        System.out.print("è¾“å…¥æ•´è¡Œæ–‡æœ¬: ");
        String line = scanner.nextLine(); // è¯»å–æ•´è¡Œ
        
        scanner.close(); // å…³é—­Scanner
    }
}
```

**2. å¸¸ç”¨æ–¹æ³•**
| æ–¹æ³•            | è¯´æ˜                                        |
| --------------- | ------------------------------------------- |
| `nextInt()`     | è¯»å– int ç±»å‹                               |
| `nextDouble()`  | è¯»å– double ç±»å‹                            |
| `nextBoolean()` | è¯»å– boolean ç±»å‹                           |
| `next()`        | è¯»å–å•ä¸ªå•è¯ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰                    |
| `nextLine()`    | è¯»å–æ•´è¡Œæ–‡æœ¬ï¼ˆå«ç©ºæ ¼ï¼‰                      |
| `hasNextXxx()`  | æ£€æŸ¥æ˜¯å¦æœ‰æŒ‡å®šç±»å‹è¾“å…¥ï¼ˆå¦‚ `hasNextInt()`ï¼‰ |

**3. æ³¨æ„äº‹é¡¹**
- **æ¢è¡Œç¬¦é—®é¢˜**ï¼š`nextInt()`/`nextDouble()` åæ¥ `nextLine()` éœ€é¢å¤–å¤„ç†
  ```java
  int num = scanner.nextInt();
  scanner.nextLine(); // æ¶ˆè€—é—ç•™çš„æ¢è¡Œç¬¦
  String text = scanner.nextLine();
  ```
- **è¾“å…¥éªŒè¯**ï¼šä½¿ç”¨ `hasNextXxx()` é¿å…è¾“å…¥é”™è¯¯
  ```java
  while (!scanner.hasNextInt()) {
      System.out.println("è¯·è¾“å…¥æ•´æ•°ï¼");
      scanner.next(); // æ¸…é™¤é”™è¯¯è¾“å…¥
  }
  int num = scanner.nextInt();
  ```

---

#### äºŒã€æ ¼å¼åŒ–è¾“å‡º
Java æä¾›ä¸¤ç§ä¸»è¦æ ¼å¼åŒ–æ–¹å¼ï¼š`printf()` å’Œ `String.format()`ã€‚

**1. printf() æ–¹æ³•**
```java
System.out.printf("æ ¼å¼å­—ç¬¦ä¸²", å‚æ•°1, å‚æ•°2, ...);
```

**2. å¸¸ç”¨æ ¼å¼ç¬¦**
| æ ¼å¼ç¬¦ | è¯´æ˜               | ç¤ºä¾‹                      | è¾“å‡º        |
| ------ | ------------------ | ------------------------- | ----------- |
| `%d`   | åè¿›åˆ¶æ•´æ•°         | `printf("%d", 100)`       | `100`       |
| `%f`   | æµ®ç‚¹æ•°             | `printf("%.2f", 3.14159)` | `3.14`      |
| `%s`   | å­—ç¬¦ä¸²             | `printf("%s", "Java")`    | `Java`      |
| `%c`   | å­—ç¬¦               | `printf("%c", 'A')`       | `A`         |
| `%b`   | å¸ƒå°”å€¼             | `printf("%b", true)`      | `true`      |
| `%n`   | æ¢è¡Œç¬¦ï¼ˆå¹³å°æ— å…³ï¼‰ | `printf("Hello%nWorld")`  | åˆ†ä¸¤è¡Œè¾“å‡º  |
| `%%`   | è¾“å‡ºç™¾åˆ†å·         | `printf("æŠ˜æ‰£: 50%%")`    | `æŠ˜æ‰£: 50%` |

**3. é«˜çº§æ ¼å¼æ§åˆ¶**
- **å®½åº¦ä¸å¯¹é½**ï¼š
  ```java
  System.out.printf("|%5d|%n", 100);    // |  100| (å³å¯¹é½)
  System.out.printf("|%-5d|%n", 100);   // |100  | (å·¦å¯¹é½)
  ```
- **æµ®ç‚¹æ•°ç²¾åº¦**ï¼š
  ```java
  System.out.printf("PI: %.3f", Math.PI); // PI: 3.142
  ```
- **æ—¥æœŸæ ¼å¼åŒ–**ï¼š
  ```java
  Date now = new Date();
  System.out.printf("%tT%n", now);       // 14:30:45
  System.out.printf("%1$tY-%1$tm-%1$td", now); // 2023-10-05
  ```

**4. String.format()**
```java
String formatted = String.format("å§“å: %s, å¹´é¾„: %d", "Alice", 25);
System.out.println(formatted); // å§“å: Alice, å¹´é¾„: 25
```

---

#### ä¸‰ã€ç»¼åˆç¤ºä¾‹
```java
import java.util.Scanner;

public class ScannerFormatDemo {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        
        System.out.print("è¯·è¾“å…¥å•†å“åç§°: ");
        String product = scanner.nextLine();
        
        System.out.print("è¯·è¾“å…¥å•ä»·: ");
        double price = scanner.nextDouble();
        
        System.out.print("è¯·è¾“å…¥æ•°é‡: ");
        int quantity = scanner.nextInt();
        
        double total = price * quantity;
        
        // æ ¼å¼åŒ–è¾“å‡ºè¡¨æ ¼
        System.out.println("\n============== è´­ç‰©æ¸…å• ==============");
        System.out.printf("| %-10s | %-8s | %-6s | %-10s |%n", 
                          "å•†å“", "å•ä»·", "æ•°é‡", "æ€»ä»·");
        System.out.println("----------------------------------------");
        System.out.printf("| %-10s | Â¥%-7.2f | %-6d | Â¥%-9.2f |%n",
                          product, price, quantity, total);
        System.out.println("========================================");
        
        scanner.close();
    }
}
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
============== è´­ç‰©æ¸…å• ==============
| å•†å“       | å•ä»·     | æ•°é‡   | æ€»ä»·        |
----------------------------------------
| æ‰‹æœº       | Â¥5999.00 | 2      | Â¥11998.00  |
========================================
```

> **å…³é”®ç‚¹æ€»ç»“**ï¼š
> 1. Scanner è¯»å–åæ³¨æ„å¤„ç†æ¢è¡Œç¬¦
> 2. ä½¿ç”¨ `hasNextXxx()` éªŒè¯è¾“å…¥ç±»å‹
> 3. `printf` æ ¼å¼ç¬¦ä¸­ï¼š
>    - æ­£æ•°ä¸ºå³å¯¹é½ï¼Œè´Ÿæ•°ä¸ºå·¦å¯¹é½ï¼ˆå¦‚ `%-10s`ï¼‰
>    - æµ®ç‚¹æ•°ç²¾åº¦ç”¨ `.` æŒ‡å®šï¼ˆå¦‚ `%.2f`ï¼‰
> 4. å¤æ‚æ ¼å¼å»ºè®®ä½¿ç”¨ `String.format()` æ„å»º

------



### Java æ–‡ä»¶è¾“å…¥ä¸è¾“å‡ºè¯¦è§£ï¼ˆä½¿ç”¨ Scanner å’Œ FileWriter/PrintWriterï¼‰

#### ä¸€ã€Scanner æ–‡ä»¶è¾“å…¥
`Scanner` ä¸ä»…å¯ä»¥è¯»å–æ§åˆ¶å°è¾“å…¥ï¼Œè¿˜èƒ½é«˜æ•ˆè¯»å–æ–‡ä»¶å†…å®¹ï¼Œæ˜¯å¤„ç†æ–‡æœ¬æ–‡ä»¶çš„å¸¸ç”¨å·¥å…·ã€‚

**1. åŸºç¡€æ–‡ä»¶è¯»å–**
```java
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class FileInputExample {
    public static void main(String[] args) {
        try {
            Scanner fileScanner = new Scanner(new File("data.txt"));
            
            while (fileScanner.hasNextLine()) {
                String line = fileScanner.nextLine();
                System.out.println(line);
            }
            
            fileScanner.close();
        } catch (FileNotFoundException e) {
            System.out.println("æ–‡ä»¶æœªæ‰¾åˆ°: " + e.getMessage());
        }
    }
}
```

**2. æ–‡ä»¶è¯»å–æœ€ä½³å®è·µ**
- **ä½¿ç”¨ try-with-resources**ï¼ˆè‡ªåŠ¨å…³é—­èµ„æºï¼‰
  ```java
  try (Scanner fileScanner = new Scanner(new File("data.txt"))) {
      while (fileScanner.hasNextLine()) {
          System.out.println(fileScanner.nextLine());
      }
  } catch (FileNotFoundException e) {
      System.out.println("æ–‡ä»¶é”™è¯¯: " + e.getMessage());
  }
  ```

- **æŒ‡å®šæ–‡ä»¶ç¼–ç **ï¼ˆå¤„ç†ä¸­æ–‡ç­‰ç‰¹æ®Šå­—ç¬¦ï¼‰
  ```java
  Scanner fileScanner = new Scanner(
      new File("data.txt"), "UTF-8");
  ```

- **è§£æç»“æ„åŒ–æ•°æ®**
  ```java
  // data.csv å†…å®¹ç¤ºä¾‹ï¼š
  // John,Doe,25
  // Jane,Smith,30
  try (Scanner sc = new Scanner(new File("data.csv"))) {
      sc.useDelimiter(",|\n"); // è®¾ç½®åˆ†éš”ç¬¦ä¸ºé€—å·æˆ–æ¢è¡Œ
      
      while (sc.hasNext()) {
          String firstName = sc.next();
          String lastName = sc.next();
          int age = sc.nextInt();
          
          System.out.printf("%s %s (%då²)%n", 
                          firstName, lastName, age);
      }
  }
  ```

**3. å¸¸è§æ–‡ä»¶è¯»å–æ–¹æ³•**
| æ–¹æ³•                | ç”¨é€”                           |
| ------------------- | ------------------------------ |
| `hasNextLine()`     | æ£€æŸ¥æ˜¯å¦æœ‰ä¸‹ä¸€è¡Œ               |
| `nextLine()`        | è¯»å–æ•´è¡Œæ–‡æœ¬                   |
| `hasNext()`         | æ£€æŸ¥æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªæ ‡è®°           |
| `next()`            | è¯»å–ä¸‹ä¸€ä¸ªæ ‡è®°ï¼ˆé»˜è®¤ç©ºæ ¼åˆ†éš”ï¼‰ |
| `useDelimiter(";")` | è®¾ç½®è‡ªå®šä¹‰åˆ†éš”ç¬¦               |

---

#### äºŒã€æ–‡ä»¶è¾“å‡ºï¼ˆFileWriter å’Œ PrintWriterï¼‰
Java ä½¿ç”¨ `FileWriter` å’Œ `PrintWriter` å®ç°æ–‡ä»¶å†™å…¥åŠŸèƒ½ã€‚

**1. åŸºç¡€æ–‡ä»¶å†™å…¥**
```java
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

public class FileOutputExample {
    public static void main(String[] args) {
        // ä½¿ç”¨ try-with-resources ç¡®ä¿èµ„æºå…³é—­
        try (PrintWriter writer = new PrintWriter(new FileWriter("output.txt"))) {
            
            writer.println("=== æ•°æ®æŠ¥å‘Š ===");
            writer.printf("æ—¥æœŸ: %tF%n", new java.util.Date());
            writer.println("----------------");
            
            // å†™å…¥æ ¼å¼åŒ–æ•°æ®
            writer.printf("%-15s %-10s %s%n", "äº§å“", "ä»·æ ¼", "åº“å­˜");
            writer.printf("%-15s Â¥%-9.2f %d%n", "ç¬”è®°æœ¬ç”µè„‘", 6999.99, 15);
            writer.printf("%-15s Â¥%-9.2f %d%n", "æ™ºèƒ½æ‰‹æœº", 3999.50, 30);
            
        } catch (IOException e) {
            System.out.println("æ–‡ä»¶å†™å…¥é”™è¯¯: " + e.getMessage());
        }
    }
}
```

**2. è¾“å‡ºç±»å¯¹æ¯”**
| ç±»å            | ç‰¹ç‚¹                                                         |
| --------------- | ------------------------------------------------------------ |
| **FileWriter**  | åŸºç¡€å­—ç¬¦æµå†™å…¥å™¨ï¼Œç›´æ¥å†™å…¥å­—ç¬¦ä¸²æˆ–å­—ç¬¦æ•°ç»„                   |
| **PrintWriter** | é«˜çº§å°è£…ç±»ï¼Œæä¾› `print()`ã€`printf()`ã€`println()` ç­‰æ ¼å¼åŒ–æ–¹æ³• |

**3. æ–‡ä»¶å†™å…¥æ¨¡å¼**
- **è¦†ç›–æ¨¡å¼**ï¼ˆé»˜è®¤ï¼‰ï¼š
  ```java
  new FileWriter("data.txt") // æ–‡ä»¶å­˜åœ¨åˆ™è¦†ç›–
  ```
- **è¿½åŠ æ¨¡å¼**ï¼š
  ```java
  new FileWriter("data.txt", true) // è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾
  ```

---

#### ä¸‰ã€ç»¼åˆç¤ºä¾‹ï¼šæ–‡ä»¶æ•°æ®å¤„ç†
```java
import java.io.*;
import java.util.*;

public class FileProcessingDemo {
    public static void main(String[] args) {
        String inputFile = "sales.txt";
        String outputFile = "report.txt";
        
        // 1. è¯»å–å¹¶å¤„ç†è¾“å…¥æ–‡ä»¶
        try (Scanner fileIn = new Scanner(new File(inputFile));
             PrintWriter fileOut = new PrintWriter(outputFile)) {
            
            // å†™å…¥æŠ¥å‘Šå¤´
            fileOut.println("é”€å”®æŠ¥å‘Š");
            fileOut.println("================");
            fileOut.printf("%-12s %-10s %-8s %s%n", 
                          "äº§å“", "å•ä»·", "æ•°é‡", "æ€»ä»·");
            
            double totalRevenue = 0;
            
            // å¤„ç†æ¯è¡Œæ•°æ® (æ ¼å¼: äº§å“å,å•ä»·,æ•°é‡)
            while (fileIn.hasNextLine()) {
                String[] data = fileIn.nextLine().split(",");
                
                if (data.length < 3) continue; // è·³è¿‡æ— æ•ˆè¡Œ
                
                String product = data[0].trim();
                double price = Double.parseDouble(data[1]);
                int quantity = Integer.parseInt(data[2]);
                double total = price * quantity;
                
                totalRevenue += total;
                
                // å†™å…¥æ ¼å¼åŒ–æ•°æ®
                fileOut.printf("%-12s Â¥%-9.2f %-8d Â¥%.2f%n",
                              product, price, quantity, total);
            }
            
            // å†™å…¥æ±‡æ€»ä¿¡æ¯
            fileOut.println("----------------");
            fileOut.printf("æ€»é”€å”®é¢: Â¥%.2f%n", totalRevenue);
            fileOut.printf("ç”Ÿæˆæ—¶é—´: %tT %tF%n", 
                          new Date(), new Date());
            
        } catch (FileNotFoundException e) {
            System.out.println("æ–‡ä»¶é”™è¯¯: " + e.getMessage());
        }
    }
}
```

**è¾“å…¥æ–‡ä»¶ (sales.txt)**ï¼š
```
ç¬”è®°æœ¬ç”µè„‘, 7999.99, 5
æ™ºèƒ½æ‰‹æœº, 3999.50, 12
å¹³æ¿ç”µè„‘, 2999.00, 8
```

**è¾“å‡ºæ–‡ä»¶ (report.txt)**ï¼š
```
é”€å”®æŠ¥å‘Š
================
äº§å“         å•ä»·       æ•°é‡      æ€»ä»·
ç¬”è®°æœ¬ç”µè„‘   Â¥7999.99   5        Â¥39999.95
æ™ºèƒ½æ‰‹æœº     Â¥3999.50   12       Â¥47994.00
å¹³æ¿ç”µè„‘     Â¥2999.00   8        Â¥23992.00
----------------
æ€»é”€å”®é¢: Â¥111985.95
ç”Ÿæˆæ—¶é—´: 14:30:45 2025-07-27
```

---

#### å››ã€å…³é”®æ³¨æ„äº‹é¡¹
1. **å¼‚å¸¸å¤„ç†**ï¼š
   - å¿…é¡»å¤„ç† `FileNotFoundException` å’Œ `IOException`
   - ä½¿ç”¨ try-with-resources ç¡®ä¿èµ„æºå…³é—­

2. **è·¯å¾„é—®é¢˜**ï¼š
   - ç›¸å¯¹è·¯å¾„ï¼šç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ï¼ˆIDEï¼‰æˆ–å½“å‰å·¥ä½œç›®å½•ï¼ˆå‘½ä»¤è¡Œï¼‰
   - ç»å¯¹è·¯å¾„ï¼š`new File("C:/data/input.txt")`ï¼ˆWindowsï¼‰æˆ– `/home/user/data.txt`ï¼ˆLinuxï¼‰

3. **å¤§æ–‡ä»¶å¤„ç†**ï¼š
   ```java
   // ä½¿ç”¨ç¼“å†²åŒºæå‡å¤§æ–‡ä»¶è¯»å–æ€§èƒ½
   try (Scanner sc = new Scanner(
           new BufferedReader(new FileReader("largefile.txt")))) {
       // å¤„ç†é€»è¾‘
   }
   ```

4. **è·¨å¹³å°æ¢è¡Œç¬¦**ï¼š
   ```java
   // ä½¿ç”¨ %n æˆ– System.lineSeparator() ä¿è¯è·¨å¹³å°å…¼å®¹æ€§
   writer.printf("ç¬¬ä¸€è¡Œ%nç¬¬äºŒè¡Œ");
   writer.print("å†…å®¹" + System.lineSeparator());
   ```

5. **æ–‡ä»¶é”é—®é¢˜**ï¼š
   - æ–‡ä»¶æ‰“å¼€æ—¶ä¼šè¢«é”å®š
   - å¤„ç†å®Œæˆåå¿…é¡»è°ƒç”¨ `close()` é‡Šæ”¾èµ„æº
   - é¿å…å¤šä¸ªç¨‹åºåŒæ—¶å†™å…¥åŒä¸€æ–‡ä»¶

> **æœ€ä½³å®è·µæ€»ç»“**ï¼š
> 1. è¾“å…¥ä¼˜å…ˆä½¿ç”¨ `Scanner` + `try-with-resources`
> 2. è¾“å‡ºä¼˜å…ˆä½¿ç”¨ `PrintWriter`ï¼ˆæ”¯æŒæ ¼å¼åŒ–ï¼‰
> 3. é‡è¦æ•°æ®æ“ä½œæ·»åŠ å¼‚å¸¸å¤„ç†
> 4. å¤§æ–‡ä»¶ä½¿ç”¨ç¼“å†²æµï¼ˆ`BufferedReader`/`BufferedWriter`ï¼‰
> 5. è·¯å¾„ä½¿ç”¨å¸¸é‡æˆ–é…ç½®æ–‡ä»¶ç®¡ç†





## <span id="control">æ§åˆ¶æµç¨‹</span>

æˆ‘ä»¬å³å°†ä»‹ç»Javaçš„æ§åˆ¶æµç¨‹ï¼ŒåŒ…æ‹¬æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥å’Œè·³è½¬è¯­å¥ã€‚æ§åˆ¶æµç¨‹æ˜¯ç¼–ç¨‹ä¸­çš„åŸºç¡€ï¼Œç”¨äºæ§åˆ¶ä»£ç çš„æ‰§è¡Œé¡ºåºã€‚

### Java æ§åˆ¶æµç¨‹è¯¦è§£

æ§åˆ¶æµç¨‹æ˜¯ç¼–ç¨‹ä¸­ç”¨äºæ§åˆ¶ä»£ç æ‰§è¡Œé¡ºåºçš„å…³é”®ç»“æ„ï¼ŒJava æä¾›äº†ä»¥ä¸‹ä¸»è¦æ§åˆ¶æµç¨‹è¯­å¥ï¼š

#### ä¸€ã€æ¡ä»¶è¯­å¥
1. **if è¯­å¥**
```java
if (condition) {
    // æ¡ä»¶ä¸ºçœŸæ—¶æ‰§è¡Œ
}
```

2. **if-else è¯­å¥**
```java
if (condition) {
    // æ¡ä»¶ä¸ºçœŸæ—¶æ‰§è¡Œ
} else {
    // æ¡ä»¶ä¸ºå‡æ—¶æ‰§è¡Œ
}
```

3. **if-else if é“¾**
```java
if (condition1) {
    // æ¡ä»¶1ä¸ºçœŸ
} else if (condition2) {
    // æ¡ä»¶2ä¸ºçœŸ
} else {
    // æ‰€æœ‰æ¡ä»¶ä¸ºå‡
}
```

4. **switch è¯­å¥**ï¼ˆJava 14+ æ”¯æŒç®­å¤´è¡¨è¾¾å¼ï¼‰
```java
switch (expression) {
    case value1 -> System.out.println("Value 1");
    case value2, value3 -> System.out.println("Value 2 or 3");
    default -> System.out.println("Default");
}
```

### Java æ¡ä»¶è¯­å¥ä½¿ç”¨æ³¨æ„ç‚¹è¯¦è§£

æ¡ä»¶è¯­å¥æ˜¯ç¼–ç¨‹ä¸­æœ€åŸºç¡€ä¹Ÿæœ€å®¹æ˜“å‡ºé”™çš„é€»è¾‘ç»“æ„ï¼Œä»¥ä¸‹æ˜¯å…³é”®æ³¨æ„ç‚¹å’Œæœ€ä½³å®è·µï¼š

---

#### ä¸€ã€åŸºç¡€é™·é˜±é˜²èŒƒ
1. **ç©ºæ‚¬ else é—®é¢˜**  
   else æ€»æ˜¯åŒ¹é…æœ€è¿‘çš„ ifï¼š
   ```java
   if (x > 0)
       if (y > 0) 
           System.out.println("A");
   else  // å®é™…åŒ¹é…å†…å±‚ if
       System.out.println("B"); 
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼šå§‹ç»ˆä½¿ç”¨èŠ±æ‹¬å·
   ```java
   if (x > 0) {
       if (y > 0) {
           System.out.println("A");
       }
   } else {
       System.out.println("B");  // æ˜ç¡®åŒ¹é…å¤–å±‚ if
   }
   ```

2. **è¯¯ç”¨ `=` ä»£æ›¿ `==`**  
   ç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™çš„ä¸¥é‡é”™è¯¯ï¼š
   ```java
   boolean flag = false;
   if (flag = true) {  // èµ‹å€¼æ“ä½œï¼Œæ°¸è¿œä¸ºçœŸï¼
       System.out.println("æ€»æ˜¯æ‰§è¡Œ");
   }
   ```
   **é˜²å¾¡æ–¹æ¡ˆ**ï¼šå¸¸é‡æ”¾å·¦ä¾§
   ```java
   if (true == flag) {  // è¯¯å†™ = ä¼šç¼–è¯‘æŠ¥é”™
       // ...
   }
   ```

3. **æµ®ç‚¹æ•°æ¯”è¾ƒé™·é˜±**  
   æµ®ç‚¹æ•°å­˜åœ¨ç²¾åº¦è¯¯å·®ï¼Œé¿å…ç›´æ¥ `==`ï¼š
   ```java
   double a = 1.0 - 0.9;
   double b = 0.1;
   if (a == b) {  // å®é™… false!
       System.out.println("ä¸ä¼šæ‰§è¡Œ");
   }
   ```
   **æ­£ç¡®åšæ³•**ï¼šå…è®¸è¯¯å·®èŒƒå›´
   ```java
   final double EPSILON = 1e-9;
   if (Math.abs(a - b) < EPSILON) {
       System.out.println("è§†ä¸ºç›¸ç­‰");
   }
   ```

---

#### äºŒã€å¯¹è±¡æ¯”è¾ƒè¦ç‚¹
1. **å­—ç¬¦ä¸²æ¯”è¾ƒ**  
   ä½¿ç”¨ `equals()` è€Œé `==`ï¼š
   ```java
   String s1 = "Java";
   String s2 = new String("Java");
   
   if (s1 == s2) {          // falseï¼ˆä¸åŒå¯¹è±¡ï¼‰
   if (s1.equals(s2)) {     // trueï¼ˆå†…å®¹ç›¸åŒï¼‰
   ```

2. **é¿å… NullPointerException**  
   å¤„ç†å¯èƒ½ä¸º null çš„å¯¹è±¡ï¼š
   ```java
   String input = getPossibleNullInput();
   
   // å±é™©å†™æ³•
   if (input.equals("yes"))  // è‹¥ input=null åˆ™å´©æºƒ
   
   // å®‰å…¨å†™æ³•
   if ("yes".equals(input))  // æ¨èï¼šå¸¸é‡åœ¨å‰
   if (Objects.equals(input, "yes")) // Java 7+
   ```

---

#### ä¸‰ã€Switch è¯­å¥æ³¨æ„äº‹é¡¹
1. **case ç©¿é€é—®é¢˜**  
   å¿˜è®° break ä¼šå¯¼è‡´æ„å¤–ç©¿é€ï¼š
   ```java
   int code = 2;
   switch (code) {
       case 1: System.out.println("A");
       case 2: System.out.println("B"); // è¾“å‡º B
       case 3: System.out.println("C"); // æ„å¤–è¾“å‡º Cï¼
   }
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼š
   - ä½¿ç”¨ç®­å¤´è¯­æ³•ï¼ˆJava 14+ï¼‰
     ```java
     switch (code) {
         case 1 -> System.out.println("A");
         case 2 -> System.out.println("B"); // ä»…è¾“å‡º B
         case 3 -> System.out.println("C");
     }
     ```
   - æ˜ç¡®æ³¨é‡Šç©¿é€æ„å›¾
     ```java
     case 2:
         System.out.println("B");
         // FALL THROUGH (å¿…é¡»æ³¨é‡Šè¯´æ˜)
     case 3:
         System.out.println("C");
         break;
     ```

2. **default ä½ç½®**  
   æ€»æ˜¯æ·»åŠ  default åˆ†æ”¯å¤„ç†æ„å¤–æƒ…å†µï¼š
   ```java
   switch (day) {
       case "MON","TUE","WED","THU","FRI" -> 
           System.out.println("å·¥ä½œæ—¥");
       case "SAT","SUN" -> 
           System.out.println("å‘¨æœ«");
       default -> throw new IllegalArgumentException("æ— æ•ˆæ—¥æœŸ");
   }
   ```

3. **Null å€¼å¤„ç†**  
   Switch é‡åˆ° null ä¼šæŠ›å‡º NPEï¼š
   ```java
   String status = null;
   switch (status) {  // æŠ›å‡º NullPointerException
       // ...
   }
   ```
   **é˜²å¾¡æ–¹æ¡ˆ**ï¼š
   ```java
   switch (Optional.ofNullable(status).orElse("UNKNOWN")) {
       // ...
   }
   ```

---

#### å››ã€å¤æ‚æ¡ä»¶ä¼˜åŒ–
1. **é¿å…æ·±å±‚åµŒå¥—**  
   é‡æ„å‰ï¼ˆå¯è¯»æ€§å·®ï¼‰ï¼š
   ```java
   if (user != null) {
       if (user.isActive()) {
           if (order != null) {
               // ä¸šåŠ¡é€»è¾‘
           }
       }
   }
   ```
   é‡æ„åï¼ˆå«è¯­å¥æ¨¡å¼ï¼‰ï¼š
   ```java
   if (user == null) return;
   if (!user.isActive()) return;
   if (order == null) return;
   // ä¸»ä¸šåŠ¡é€»è¾‘
   ```

2. **å¾·Â·æ‘©æ ¹å®šå¾‹åº”ç”¨**  
   å¤æ‚æ¡ä»¶è½¬æ¢ï¼š
   ```java
   // åŸå§‹æ¡ä»¶
   if (!(a && b || c)) 
   
   // å¾·Â·æ‘©æ ¹è½¬æ¢
   if (!a || !b) && !c
   ```

3. **æå–æ¡ä»¶å˜é‡**  
   æå‡å¯è¯»æ€§ï¼š
   ```java
   // é‡æ„å‰
   if (age >= 18 && hasLicense && !isExpired) 
   
   // é‡æ„å
   boolean isEligible = age >= 18 && hasLicense;
   boolean isValid = isEligible && !isExpired;
   if (isValid) 
   ```

---

#### äº”ã€æœ€ä½³å®è·µæ€»ç»“
| **åœºæ™¯**    | **é”™è¯¯ç¤ºä¾‹**       | **æ­£ç¡®åšæ³•**                |
| ----------- | ------------------ | --------------------------- |
| å¯¹è±¡æ¯”è¾ƒ    | `str == "text"`    | `"text".equals(str)`        |
| æµ®ç‚¹æ•°æ¯”è¾ƒ  | `a == 0.3`         | `Math.abs(a-0.3) < EPSILON` |
| Switch åˆ†æ”¯ | ç¼ºå°‘ `break`       | ä½¿ç”¨ç®­å¤´è¯­æ³•æˆ–æ˜¾å¼æ³¨é‡Š      |
| Null å®‰å…¨   | `obj.method()`     | `Optional.ofNullable(obj)`  |
| å¤æ‚æ¡ä»¶    | å¤šå±‚åµŒå¥— if        | å«è¯­å¥ + æ¡ä»¶æå–           |
| å¸ƒå°”è¡¨è¾¾å¼  | `if (flag = true)` | `if (true == flag)`         |

> **å…³é”®åŸåˆ™**ï¼š
> 1. èŠ±æ‹¬å· **æ°¸ä¸çœç•¥**ï¼šå³ä½¿åªæœ‰ä¸€è¡Œä»£ç 
> 2. å¸¸é‡æ”¾å·¦ä¾§ï¼šé˜²èŒƒ `=` è¯¯å†™
> 3. ä¼˜å…ˆä½¿ç”¨æ–°ç‰¹æ€§ï¼šSwitch è¡¨è¾¾å¼ã€æ¨¡å¼åŒ¹é…
> 4. é˜²å¾¡æ€§ç¼–ç¨‹ï¼šå¤„ç† null å’Œè¾¹ç•Œå€¼
> 5. å¤æ‚åº¦æ§åˆ¶ï¼šå•ä¸ªæ¡ä»¶ä¸è¶…è¿‡ 3 ä¸ªå­æ¡ä»¶

#### å…­ã€Java 17 æ¨¡å¼åŒ¹é…ç¤ºä¾‹
```java
// instanceof æ¨¡å¼åŒ¹é…
Object obj = "Hello Pattern Matching";
if (obj instanceof String s && s.length() > 5) {
    System.out.println(s.toUpperCase()); // ç›´æ¥ä½¿ç”¨s
}

// Switch æ¨¡å¼åŒ¹é… (é¢„è§ˆç‰¹æ€§)
switch (obj) {
    case Integer i -> System.out.println("æ•´æ•°: " + i);
    case String s  -> System.out.println("å­—ç¬¦ä¸²: " + s);
    case null      -> System.out.println("ç©ºå€¼");
    default        -> System.out.println("å…¶ä»–ç±»å‹");
}
```

æ­£ç¡®ä½¿ç”¨æ¡ä»¶è¯­å¥èƒ½æ˜¾è‘—æå‡ä»£ç å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå§‹ç»ˆå°†é˜²å¾¡æ€§ç¼–ç¨‹å’Œä»£ç å¯è¯»æ€§æ”¾åœ¨é¦–ä½ã€‚



#### äºŒã€å¾ªç¯è¯­å¥

1. **for å¾ªç¯**
```java
for (int i = 0; i < 5; i++) {
    System.out.println(i);
}
```

2. **å¢å¼º for å¾ªç¯**ï¼ˆéå†é›†åˆ/æ•°ç»„ï¼‰
```java
int[] numbers = {1, 2, 3};
for (int num : numbers) {
    System.out.println(num);
}
```

3. **while å¾ªç¯**
```java
int count = 0;
while (count < 3) {
    System.out.println(count);
    count++;
}
```

4. **do-while å¾ªç¯**
```java
int x = 5;
do {
    System.out.println(x);
    x--;
} while (x > 0);
```

### Java å¾ªç¯è¯­å¥æ˜“é”™ç‚¹è¯¦è§£

å¾ªç¯æ˜¯ç¼–ç¨‹ä¸­æœ€å®¹æ˜“äº§ç”Ÿé”™è¯¯çš„ç»“æ„ä¹‹ä¸€ï¼Œä»¥ä¸‹æ˜¯ Java å¾ªç¯ä¸­å¸¸è§çš„é™·é˜±åŠè§£å†³æ–¹æ¡ˆï¼š

#### ä¸€ã€å¾ªç¯è¾¹ç•Œé—®é¢˜
1. **å·®ä¸€é”™è¯¯ï¼ˆOff-by-one Errorï¼‰**
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     // æ„å›¾ï¼šæ‰“å°0åˆ°9
     for (int i = 0; i <= 10; i++) {  // å®é™…è¾“å‡º0åˆ°10
         System.out.println(i);
     }
     ```
   - æ­£ç¡®åšæ³•ï¼š
     ```java
     for (int i = 0; i < 10; i++) {  // ä½¿ç”¨ < è€Œä¸æ˜¯ <=
         System.out.println(i);
     }
     ```

2. **æ•°ç»„è¶Šç•Œ**
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     int[] arr = {1, 2, 3};
     for (int i = 0; i <= arr.length; i++) {  // æœ€åä¸€æ¬¡ i=3 å¯¼è‡´è¶Šç•Œ
         System.out.println(arr[i]);
     }
     ```
   - æ­£ç¡®åšæ³•ï¼š
     ```java
     for (int i = 0; i < arr.length; i++) {  // æ ‡å‡†å®‰å…¨å†™æ³•
         System.out.println(arr[i]);
     }
     ```

#### äºŒã€å¾ªç¯æ§åˆ¶é—®é¢˜
1. **æ— é™å¾ªç¯**
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     // å¿˜è®°æ›´æ–°å¾ªç¯å˜é‡
     int count = 0;
     while (count < 5) {
         System.out.println("Stuck here forever!");
         // ç¼ºå°‘ count++
     }
     
     // é”™è¯¯çš„æ¡ä»¶
     for (int i = 10; i > 0; i++) {  // i æ°¸è¿œå¤§äº0
         // æ— é™å¾ªç¯
     }
     ```

2. **å¾ªç¯å˜é‡æ±¡æŸ“**
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     for (int i = 0; i < 5; i++) {
         // å†…éƒ¨ä¿®æ”¹å¾ªç¯å˜é‡
         if (i == 2) i = 10;  // ç ´åå¾ªç¯é€»è¾‘
     }
     ```

#### ä¸‰ã€é›†åˆéå†é™·é˜±
1. **å¹¶å‘ä¿®æ”¹å¼‚å¸¸**
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     List<String> list = new ArrayList<>();
     list.add("A"); list.add("B"); list.add("C");
     
     for (String s : list) {
         if ("B".equals(s)) {
             list.remove(s);  // æŠ›å‡º ConcurrentModificationException
         }
     }
     ```
   - æ­£ç¡®è§£å†³æ–¹æ¡ˆï¼š
     ```java
     // ä½¿ç”¨è¿­ä»£å™¨
     Iterator<String> it = list.iterator();
     while (it.hasNext()) {
         String s = it.next();
         if ("B".equals(s)) {
             it.remove();  // å®‰å…¨ç§»é™¤
         }
     }
     
     // Java 8+ removeIf
     list.removeIf(s -> "B".equals(s));
     
     // ä½¿ç”¨ä¼ ç»Ÿforå¾ªç¯
     for (int i = 0; i < list.size(); i++) {
         if ("B".equals(list.get(i))) {
             list.remove(i);
             i--;  // è°ƒæ•´ç´¢å¼•
         }
     }
     ```

#### å››ã€æ€§èƒ½é™·é˜±
1. **é‡å¤è®¡ç®—å¾ªç¯æ¡ä»¶**
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     // æ¯æ¬¡å¾ªç¯éƒ½è°ƒç”¨size()
     for (int i = 0; i < list.size(); i++) {
         // ä½æ•ˆ
     }
     ```
   - ä¼˜åŒ–æ–¹æ¡ˆï¼š
     ```java
     int size = list.size();  // é¢„å…ˆè®¡ç®—
     for (int i = 0; i < size; i++) {
         // é«˜æ•ˆ
     }
     ```

2. **å¾ªç¯å†…åˆ›å»ºå¯¹è±¡**
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     while (condition) {
         StringBuilder sb = new StringBuilder();  // æ¯æ¬¡å¾ªç¯åˆ›å»ºæ–°å¯¹è±¡
         // ...
     }
     ```
   - ä¼˜åŒ–æ–¹æ¡ˆï¼š
     ```java
     StringBuilder sb = new StringBuilder();
     while (condition) {
         sb.setLength(0);  // é‡ç”¨å¯¹è±¡
         // ...
     }
     ```

#### äº”ã€åµŒå¥—å¾ªç¯é—®é¢˜
1. **æ ‡ç­¾ä½¿ç”¨é”™è¯¯**
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     outerLoop:
     for (int i = 0; i < 3; i++) {
         for (int j = 0; j < 3; j++) {
             if (i == 1 && j == 1) break;  // åªè·³å‡ºå†…å±‚å¾ªç¯
         }
     }
     ```
   - æ­£ç¡®ä½¿ç”¨ï¼š
     ```java
     outerLoop:
     for (int i = 0; i < 3; i++) {
         for (int j = 0; j < 3; j++) {
             if (i == 1 && j == 1) break outerLoop;  // è·³å‡ºå¤–å±‚å¾ªç¯
         }
     }
     ```

2. **åµŒå¥—å±‚æ¬¡è¿‡æ·±**
   - è¶…è¿‡3å±‚çš„åµŒå¥—å¾ªç¯åº”é‡æ„ï¼š
     ```java
     // é‡æ„å‰
     for (int i = 0; i < 10; i++) {
         for (int j = 0; j < 10; j++) {
             for (int k = 0; k < 10; k++) {
                 // å¤æ‚é€»è¾‘...
             }
         }
     }
     
     // é‡æ„å
     for (int i = 0; i < 10; i++) {
         processInner(i);
     }
     
     void processInner(int i) {
         for (int j = 0; j < 10; j++) {
             for (int k = 0; k < 10; k++) {
                 // ...
             }
         }
     }
     ```

#### å…­ã€å¢å¼ºforå¾ªç¯é™åˆ¶
1. **ä¸èƒ½ä¿®æ”¹é›†åˆå…ƒç´ **
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     List<String> list = Arrays.asList("A", "B", "C");
     for (String s : list) {
         s = "X";  // ä¿®æ”¹æ— æ•ˆï¼ŒåŸå§‹é›†åˆä¸å˜
     }
     ```
   - æ­£ç¡®åšæ³•ï¼ˆä½¿ç”¨ä¼ ç»Ÿforå¾ªç¯ï¼‰ï¼š
     ```java
     for (int i = 0; i < list.size(); i++) {
         list.set(i, "X");  // ç›´æ¥ä¿®æ”¹å…ƒç´ 
     }
     ```

2. **ä¸æ”¯æŒåå‘éå†**
   
   - å¢å¼ºforå¾ªç¯åªèƒ½æ­£å‘éå†é›†åˆ

#### ä¸ƒã€ç©ºé›†åˆå¤„ç†
1. **NPEé£é™©**
   - é”™è¯¯ç¤ºä¾‹ï¼š
     ```java
     List<String> data = getData();  // å¯èƒ½è¿”å›null
     for (String s : data) {  // æŠ›å‡ºNullPointerException
         // ...
     }
     ```
   - é˜²å¾¡æ–¹æ¡ˆï¼š
     ```java
     if (data != null) {
         for (String s : data) {
             // ...
         }
     }
     ```

#### å…«ã€å¾ªç¯æœ€ä½³å®è·µæ€»ç»“

| **é—®é¢˜ç±»å‹** | **é”™è¯¯ç¤ºä¾‹**             | **æ­£ç¡®è§£å†³æ–¹æ¡ˆ**              |
| ------------ | ------------------------ | ----------------------------- |
| è¾¹ç•Œé”™è¯¯     | `i <= length`            | `i < length`                  |
| æ— é™å¾ªç¯     | ç¼ºå°‘å¾ªç¯å˜é‡æ›´æ–°         | ç¡®ä¿æ¯æ¬¡è¿­ä»£æ›´æ–°å¾ªç¯æ¡ä»¶      |
| é›†åˆä¿®æ”¹å¼‚å¸¸ | å¢å¼ºforå¾ªç¯ä¸­ä¿®æ”¹é›†åˆ    | ä½¿ç”¨`Iterator.remove()`       |
| æ€§èƒ½é—®é¢˜     | å¾ªç¯å†…é‡å¤åˆ›å»ºå¯¹è±¡       | å¯¹è±¡æåˆ°å¾ªç¯å¤–éƒ¨é‡ç”¨          |
| åµŒå¥—è¿‡æ·±     | è¶…è¿‡3å±‚åµŒå¥—              | æå–æ–¹æ³•åˆ†è§£é€»è¾‘              |
| ç©ºæŒ‡é’ˆé£é™©   | ç›´æ¥éå†å¯èƒ½ä¸ºnullçš„é›†åˆ | æ·»åŠ nullæ£€æŸ¥                  |
| å·®ä¸€é”™è¯¯     | ç´¢å¼•ä»1å¼€å§‹åˆ°`<= length` | åšæŒ`0-index`å’Œ`< length`æ¨¡å¼ |

> **å…³é”®é˜²å¾¡ç­–ç•¥**ï¼š
> 1. **æœ€å°åŒ–ä½œç”¨åŸŸ**ï¼šå¾ªç¯å˜é‡åªåœ¨å¾ªç¯å†…æœ‰æ•ˆ
>   ```java
>   for (int i = 0; i < 10; i++) { ... }  // iåªåœ¨å¾ªç¯å†…
>   ```
>
> 2. **ä½¿ç”¨finalé˜²æ­¢ä¿®æ”¹**ï¼ˆé€‚ç”¨æ—¶ï¼‰ï¼š
>   ```java
>   for (final String item : collection) {
>       // itemä¸èƒ½ä¿®æ”¹
>   }
>   ```
>
> 3. **æ·»åŠ å®‰å…¨é˜²æŠ¤**ï¼š
>   ```java
>   // é˜²æ­¢æ— é™å¾ªç¯
>   int guard = 0;
>   while (condition && guard++ < MAX_ITERATIONS) {
>       // ...
>   }
>   ```
>
> 4. **ä¼˜å…ˆä½¿ç”¨å¢å¼ºforå¾ªç¯**ï¼ˆå½“ä¸éœ€è¦ç´¢å¼•æ—¶ï¼‰ï¼š
>   ```java
>   for (String s : stringList) {  // æ›´ç®€æ´å®‰å…¨
>       System.out.println(s);
>   }
>   ```

#### ä¹ã€Java 8+ æ›¿ä»£æ–¹æ¡ˆ
```java
// ä¼ ç»Ÿå¾ªç¯
List<String> filtered = new ArrayList<>();
for (String s : list) {
    if (s.length() > 3) {
        filtered.add(s.toUpperCase());
    }
}

// Streamæ›¿ä»£æ–¹æ¡ˆ
List<String> filtered = list.stream()
    .filter(s -> s.length() > 3)
    .map(String::toUpperCase)
    .collect(Collectors.toList());
```

> **å¾ªç¯é€‰æ‹©æŒ‡å—**ï¼š
>
> 1. éœ€è¦ç´¢å¼• â†’ ä¼ ç»Ÿforå¾ªç¯
> 2. åªè¯»éå† â†’ å¢å¼ºforå¾ªç¯
> 3. å¤æ‚è¿‡æ»¤/è½¬æ¢ â†’ Stream API
> 4. éœ€è¦æå‰é€€å‡º â†’ while/ä¼ ç»Ÿforå¾ªç¯
> 5. å¯èƒ½ç©ºé›†åˆ â†’ å§‹ç»ˆæ·»åŠ nullæ£€æŸ¥

é€šè¿‡é¿å…è¿™äº›å¸¸è§é™·é˜±ï¼Œå¯ä»¥æ˜¾è‘—æé«˜å¾ªç¯ä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚



#### ä¸‰ã€è·³è½¬è¯­å¥

1. **break**
```java
for (int i = 0; i < 10; i++) {
    if (i == 5) break; // ç«‹å³é€€å‡ºå¾ªç¯
    System.out.println(i);
}
```

2. **continue**
```java
for (int i = 0; i < 5; i++) {
    if (i == 2) continue; // è·³è¿‡å½“å‰è¿­ä»£
    System.out.println(i);
}
```

3. **return**
```java
public int add(int a, int b) {
    return a + b; // é€€å‡ºæ–¹æ³•å¹¶è¿”å›å€¼
}
```

### Java è·³è½¬è¯­å¥ï¼ˆbreak/continue/returnï¼‰æ˜“é”™ç‚¹è¯¦è§£

è·³è½¬è¯­å¥æ˜¯æ§åˆ¶ç¨‹åºæµç¨‹çš„é‡è¦å·¥å…·ï¼Œä½†ä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´é€»è¾‘æ··ä¹±å’Œéš¾ä»¥ç»´æŠ¤çš„ä»£ç ã€‚ä»¥ä¸‹æ˜¯å…³é”®æ˜“é”™ç‚¹åŠè§£å†³æ–¹æ¡ˆï¼š

#### ä¸€ã€break è¯­å¥é™·é˜±
1. **æ„å¤–ä¸­æ–­å¤–å±‚å¾ªç¯**
   ```java
   for (int i = 0; i < 3; i++) {
       for (int j = 0; j < 3; j++) {
           if (j == 1) break; // åªä¸­æ–­å†…å±‚å¾ªç¯
           System.out.print(i + "-" + j + " ");
       }
   }
   // è¾“å‡º: 0-0 1-0 2-0
   ```
   **éœ€æ±‚**ï¼šå½“ j==1 æ—¶å®Œå…¨ç»ˆæ­¢æ‰€æœ‰å¾ªç¯  
   **è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨æ ‡ç­¾
   ```java
   outerLoop: // å®šä¹‰æ ‡ç­¾
   for (int i = 0; i < 3; i++) {
       for (int j = 0; j < 3; j++) {
           if (j == 1) break outerLoop; // ä¸­æ–­å¤–å±‚å¾ªç¯
           System.out.print(i + "-" + j + " ");
       }
   }
   // è¾“å‡º: 0-0
   ```

2. **switch ä¸­çš„ç©¿é€é—®é¢˜**
   ```java
   int code = 2;
   switch (code) {
       case 1: System.out.println("A");
       case 2: System.out.println("B"); // è¾“å‡ºB
       case 3: System.out.println("C"); // ç»§ç»­è¾“å‡ºC!
   }
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼š
   - Java 14+ ä½¿ç”¨ç®­å¤´è¯­æ³•
     ```java
     switch (code) {
         case 1 -> System.out.println("A");
         case 2 -> System.out.println("B"); // åªè¾“å‡ºB
         case 3 -> System.out.println("C");
     }
     ```
   - æ˜ç¡®æ·»åŠ  break
     ```java
     case 2: 
         System.out.println("B");
         break; // æ˜¾å¼ä¸­æ–­
     ```

#### äºŒã€continue è¯­å¥è¯¯åŒº
1. **è·³è¿‡å…³é”®ä»£ç **
   ```java
   for (int i = 0; i < 5; i++) {
       if (i == 2) continue;
       System.out.println("Processing: " + i);
       saveToDatabase(i); // å½“i=2æ—¶è¢«è·³è¿‡ï¼
   }
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼šé‡æ„é€»è¾‘é¡ºåº
   ```java
   for (int i = 0; i < 5; i++) {
       if (i == 2) continue;
       
       // å…³é”®æ“ä½œæ”¾åœ¨continueä¹‹å
       System.out.println("Processing: " + i);
       saveToDatabase(i);
   }
   ```

2. **å¾ªç¯å˜é‡æ›´æ–°è¢«è·³è¿‡**
   ```java
   int count = 0;
   while (count < 5) {
       if (count == 3) {
           count++; // å¿…é¡»æ‰‹åŠ¨æ›´æ–°ï¼
           continue;
       }
       System.out.println(count);
       count++; // å½“count=3æ—¶è·³è¿‡æ­¤æ›´æ–°
   }
   // è¾“å‡ºï¼š0 1 2 4 (ç¼ºå°‘3)
   ```
   **ä¿®å¤æ–¹æ¡ˆ**ï¼šç»Ÿä¸€æ›´æ–°ç‚¹
   ```java
   for (int count = 0; count < 5; count++) {
       if (count == 3) continue;
       System.out.println(count);
   }
   ```

#### ä¸‰ã€return è¯­å¥å¸¸è§é”™è¯¯
1. **æœªè¦†ç›–æ‰€æœ‰è·¯å¾„**
   ```java
   int calculate(int a) {
       if (a > 0) return a * 2;
       if (a < 0) return a / 2;
       // ç¼–è¯‘é”™è¯¯ï¼šç¼ºå°‘a=0æ—¶çš„è¿”å›å€¼
   }
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿å…¨è·¯å¾„è¦†ç›–
   ```java
   int calculate(int a) {
       if (a > 0) return a * 2;
       if (a < 0) return a / 2;
       return 0; // é»˜è®¤è¿”å›
   }
   ```

2. **finally å—è¦†ç›–è¿”å›å€¼**
   ```java
   int test() {
       try {
           return 1;
       } finally {
           return 2; // å®é™…è¿”å›2ï¼
       }
   }
   ```
   **æœ€ä½³å®è·µ**ï¼šfinally ä¸­é¿å… return
   ```java
   int test() {
       int result = 0;
       try {
           result = 1;
       } finally {
           cleanup(); // åªåšæ¸…ç†æ“ä½œ
       }
       return result;
   }
   ```

#### å››ã€æ ‡ç­¾æ»¥ç”¨é—®é¢˜
1. **è¿‡åº¦ä½¿ç”¨æ ‡ç­¾å¯¼è‡´é¢æ¡ä»£ç **
   ```java
   outer: for (...) {
       mid: for (...) {
           inner: for (...) {
               if (...) break outer;
               if (...) continue mid;
           }
       }
   }
   ```
   **é‡æ„æ–¹æ¡ˆ**ï¼šæå–æ–¹æ³•
   ```java
   void processData() {
       for (...) {
           if (!processInner()) break;
       }
   }
   
   boolean processInner() {
       for (...) {
           if (...) return false;
           if (...) continue;
       }
       return true;
   }
   ```

#### äº”ã€èµ„æºæ³„éœ²é£é™©
1. **return å‰å¿˜è®°å…³é—­èµ„æº**
   ```java
   void readFile() {
       FileReader fr = new FileReader("data.txt");
       if (error) return; // èµ„æºæ³„éœ²ï¼
       fr.close();
   }
   ```
   **è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ try-with-resources
   ```java
   void readFile() {
       try (FileReader fr = new FileReader("data.txt")) {
           if (error) return; // è‡ªåŠ¨å…³é—­
       }
   }
   ```

#### å…­ã€æœ€ä½³å®è·µæ€»ç»“

| **åœºæ™¯**     | **é”™è¯¯åšæ³•**         | **æ­£ç¡®åšæ³•**              |
| ------------ | -------------------- | ------------------------- |
| å¤šå±‚å¾ªç¯ä¸­æ–­ | æ— æ ‡ç­¾break          | ä½¿ç”¨å¸¦æ ‡ç­¾break           |
| switch case  | çœç•¥break            | æ˜¾å¼break/ç®­å¤´è¯­æ³•        |
| å¾ªç¯è·³è¿‡     | continueåæœ‰å…³é”®æ“ä½œ | å…³é”®æ“ä½œæ”¾åœ¨continueå‰    |
| è¿”å›å€¼è¦†ç›–   | finallyä¸­ä½¿ç”¨return  | finallyåªåšæ¸…ç†ï¼Œé¿å…è¿”å› |
| èµ„æºç®¡ç†     | returnå‰å¿˜è®°å…³é—­     | try-with-resources        |
| å¤æ‚è·³è½¬é€»è¾‘ | å¤šå±‚åµŒå¥—æ ‡ç­¾         | æå–æ–¹æ³•åˆ†è§£é€»è¾‘          |

> **è·³è½¬è¯­å¥é»„é‡‘æ³•åˆ™**ï¼š
> 1. **æœ€å°åŒ–ä½¿ç”¨èŒƒå›´**ï¼šä»…åœ¨å¿…è¦æƒ…å†µä¸‹ä½¿ç”¨è·³è½¬è¯­å¥
> 2. **é¿å…è¶…è¿‡1å±‚è·³è½¬**ï¼šä½¿ç”¨æ ‡ç­¾è·³è½¬ä¸è¶…è¿‡1å±‚åµŒå¥—
> 3. **èµ„æºå®‰å…¨ä¼˜å…ˆ**ï¼šreturnå‰ç¡®ä¿èµ„æºé‡Šæ”¾ï¼ˆä½¿ç”¨try-with-resourcesï¼‰
> 4. **ä¿æŒä»£ç çº¿æ€§**ï¼šå•ä¸ªæ–¹æ³•ä¸­returnä¸è¶…è¿‡3æ¬¡
> 5. **æ·»åŠ æ³¨é‡Šè¯´æ˜**ï¼šéå¸¸è§„è·³è½¬éœ€æ³¨é‡Šè¯´æ˜æ„å›¾

#### ä¸ƒã€æ›¿ä»£æ–¹æ¡ˆæ¨è
```java
// ä¼ ç»Ÿbreak
for (int i = 0; i < 100; i++) {
    if (foundTarget) break;
}

// æµå¼å¤„ç†æ›¿ä»£ï¼ˆJava 8+ï¼‰
IntStream.range(0, 100)
    .takeWhile(i -> !foundTarget) // é‡åˆ°falseåœæ­¢
    .forEach(i -> process(i));

// å¤æ‚æ¡ä»¶é‡æ„
while (condition) {
    if (shouldBreak) break;
}

// æ”¹ä¸ºçŠ¶æ€å˜é‡
boolean keepRunning = true;
while (condition && keepRunning) {
    if (shouldBreak) keepRunning = false;
}
```

**è·³è½¬è¯­å¥é€‰æ‹©æŒ‡å—**ï¼š
- éœ€è¦å®Œå…¨é€€å‡º â†’ `break` æˆ– `return`
- è·³è¿‡å½“å‰è¿­ä»£ â†’ `continue`
- é€€å‡ºæ·±å±‚åµŒå¥— â†’ å¸¦æ ‡ç­¾çš„ `break`
- é€€å‡ºæ–¹æ³• â†’ `return`
- é”™è¯¯å¤„ç† â†’ æŠ›å‡ºå¼‚å¸¸ï¼ˆè€Œéè·³è½¬ï¼‰

é€šè¿‡éµå¾ªè¿™äº›å®è·µï¼Œå¯æ˜¾è‘—æå‡ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œé¿å…è·³è½¬è¯­å¥å¯¼è‡´çš„éšè”½é”™è¯¯ã€‚



#### å››ã€åµŒå¥—æ§åˆ¶ç»“æ„

```java
// åµŒå¥—å¾ªç¯ç¤ºä¾‹
for (int i = 1; i <= 3; i++) {
    for (int j = 1; j <= 3; j++) {
        System.out.println(i + " x " + j + " = " + (i*j));
    }
}

// å¾ªç¯å†…åµŒæ¡ä»¶è¯­å¥
for (int num : Arrays.asList(1, 2, 3, 4, 5)) {
    if (num % 2 == 0) {
        System.out.println(num + " æ˜¯å¶æ•°");
    } else {
        System.out.println(num + " æ˜¯å¥‡æ•°");
    }
}
```

#### äº”ã€æ ‡ç­¾è·³è½¬ï¼ˆé«˜çº§ç”¨æ³•ï¼‰
```java
outerLoop: // å®šä¹‰æ ‡ç­¾
for (int i = 0; i < 5; i++) {
    innerLoop:
    for (int j = 0; j < 5; j++) {
        if (i == 2 && j == 2) break outerLoop; // è·³å‡ºå¤–å±‚å¾ªç¯
        if (j == 3) continue innerLoop; // ç»§ç»­å†…å±‚å¾ªç¯
        System.out.println(i + "," + j);
    }
}
```

#### å…­ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹
1. **é¿å…æ·±åº¦åµŒå¥—**ï¼šè¶…è¿‡3å±‚åµŒå¥—åº”è€ƒè™‘é‡æ„
   
   ```java
   // é‡æ„å‰
   if (condition1) {
       if (condition2) {
           if (condition3) {
               // å¤æ‚é€»è¾‘
           }
       }
   }
   
   // é‡æ„åï¼ˆä½¿ç”¨å«è¯­å¥ï¼‰
   if (!condition1) return;
   if (!condition2) return;
   if (!condition3) return;
   // ä¸»é€»è¾‘
   ```
   
2. **å¾ªç¯ä¼˜åŒ–æŠ€å·§**
   
   - å°†ä¸å˜è®¡ç®—ç§»å‡ºå¾ªç¯ï¼š
     ```java
     // ä½æ•ˆ
     for (int i = 0; i < list.size(); i++) {...}
     
     // é«˜æ•ˆ
     int size = list.size();
     for (int i = 0; i < size; i++) {...}
     ```
   - é¿å…åœ¨å¾ªç¯å†…åˆ›å»ºå¯¹è±¡ï¼š
     ```java
     // ä½æ•ˆ
     while (condition) {
         StringBuilder sb = new StringBuilder();
         // ...
     }
     
     // é«˜æ•ˆ
     StringBuilder sb = new StringBuilder();
     while (condition) {
         sb.setLength(0);
         // ...
     }
     ```
   
3. **switch è¡¨è¾¾å¼**ï¼ˆJava 14+ï¼‰
   
   ```java
   String dayType = switch (day) {
       case "MON", "TUE", "WED", "THU", "FRI" -> "å·¥ä½œæ—¥";
       case "SAT", "SUN" -> "å‘¨æœ«";
       default -> throw new IllegalArgumentException("æ— æ•ˆæ—¥æœŸ");
   };
   ```
   
4. **æ¨¡å¼åŒ¹é…**ï¼ˆJava 17+ é¢„è§ˆç‰¹æ€§ï¼‰
   ```java
   Object obj = "Hello";
   if (obj instanceof String s) { // æ¨¡å¼åŒ¹é…
       System.out.println(s.length());
   }
   ```

#### ä¸ƒã€ç»¼åˆç¤ºä¾‹ï¼šç”¨æˆ·èœå•ç³»ç»Ÿ
```java
import java.util.Scanner;

public class MenuSystem {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        boolean running = true;
        
        while (running) {
            System.out.println("\n==== ä¸»èœå• ====");
            System.out.println("1. æŸ¥çœ‹ç”¨æˆ·");
            System.out.println("2. æ·»åŠ ç”¨æˆ·");
            System.out.println("3. é€€å‡ºç³»ç»Ÿ");
            System.out.print("è¯·é€‰æ‹©: ");
            
            String choice = scanner.nextLine();
            
            switch (choice) {
                case "1" -> displayUsers();
                case "2" -> addUser(scanner);
                case "3" -> {
                    System.out.println("ç³»ç»Ÿé€€å‡º");
                    running = false;
                }
                default -> System.out.println("æ— æ•ˆé€‰é¡¹ï¼Œè¯·é‡æ–°è¾“å…¥");
            }
        }
        scanner.close();
    }
    
    private static void displayUsers() {
        System.out.println("\nç”¨æˆ·åˆ—è¡¨ï¼š");
        // æ¨¡æ‹Ÿæ•°æ®
        String[] users = {"Alice", "Bob", "Charlie"};
        for (int i = 0; i < users.length; i++) {
            System.out.println((i+1) + ". " + users[i]);
        }
    }
    
    private static void addUser(Scanner scanner) {
        System.out.print("\nè¾“å…¥ç”¨æˆ·å: ");
        String username = scanner.nextLine();
        
        if (username.isBlank()) {
            System.out.println("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
            return;
        }
        
        System.out.println("ç”¨æˆ· '" + username + "' æ·»åŠ æˆåŠŸ");
    }
}
```

#### å…³é”®æ¦‚å¿µæ€»ç»“ï¼š
1. **æ¡ä»¶åˆ†æ”¯**ï¼šif/else å¤„ç†äºŒå…ƒé€‰æ‹©ï¼Œswitch å¤„ç†å¤šè·¯åˆ†æ”¯
2. **å¾ªç¯ç»“æ„**ï¼š
   - `for`ï¼šç²¾ç¡®æ§åˆ¶è¿­ä»£æ¬¡æ•°
   - `while`ï¼šæ¡ä»¶æ»¡è¶³æ—¶æŒç»­æ‰§è¡Œ
   - `do-while`ï¼šè‡³å°‘æ‰§è¡Œä¸€æ¬¡
3. **æµç¨‹æ§åˆ¶**ï¼š
   - `break`ï¼šé€€å‡ºå¾ªç¯æˆ–switch
   - `continue`ï¼šè·³è¿‡å½“å‰è¿­ä»£
   - `return`ï¼šé€€å‡ºæ–¹æ³•
4. **ç°ä»£ç‰¹æ€§**ï¼š
   - Switch è¡¨è¾¾å¼ï¼ˆè¿”å›ç»“æœï¼‰
   - æ¨¡å¼åŒ¹é…ï¼ˆç®€åŒ–ç±»å‹æ£€æŸ¥ï¼‰
   - æ–‡æœ¬å—ï¼ˆå¤šè¡Œå­—ç¬¦ä¸²ï¼‰

> **æœ€ä½³å®è·µ**ï¼š
> 1. ä¼˜å…ˆä½¿ç”¨å¢å¼º for å¾ªç¯éå†é›†åˆ
> 2. å¤æ‚æ¡ä»¶ä½¿ç”¨å¸ƒå°”å˜é‡æé«˜å¯è¯»æ€§
> 3. é¿å…è¶…è¿‡ 3 å±‚çš„åµŒå¥—ç»“æ„
> 4. å¾ªç¯ä¸­ä½¿ç”¨ `StringBuilder` æ›¿ä»£å­—ç¬¦ä¸²æ‹¼æ¥
> 5. ä½¿ç”¨ try-with-resources ç®¡ç† Scanner ç­‰èµ„æº





## å¤§æ•°

åœ¨Javaä¸­ï¼Œå½“åŸºæœ¬æ•´æ•°ç±»å‹ï¼ˆå¦‚intã€longï¼‰å’Œæµ®ç‚¹ç±»å‹ï¼ˆå¦‚floatã€doubleï¼‰çš„æ•°å€¼èŒƒå›´æˆ–ç²¾åº¦æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¤§æ•°ç±»ã€‚Javaæä¾›äº†ä¸¤ä¸ªç”¨äºé«˜ç²¾åº¦è®¡ç®—çš„ç±»ï¼š`BigInteger`ï¼ˆå¤„ç†ä»»æ„ç²¾åº¦çš„æ•´æ•°ï¼‰å’Œ`BigDecimal`ï¼ˆå¤„ç†ä»»æ„ç²¾åº¦çš„å®šç‚¹æ•°ï¼Œé€‚ç”¨äºè´§å¸è®¡ç®—ç­‰åœºæ™¯ï¼‰ã€‚ä¸‹é¢å°†è¯¦ç»†ä»‹ç»è¿™ä¸¤ä¸ªç±»çš„ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹ã€‚

### Java å¤§æ•°å¤„ç†ï¼ˆBigInteger ä¸ BigDecimalï¼‰è¯¦è§£

Java æä¾›äº†ä¸¤ä¸ªå¼ºå¤§çš„ç±»æ¥å¤„ç†è¶…å‡ºåŸºæœ¬æ•°æ®ç±»å‹èŒƒå›´çš„å¤§æ•°è¿ç®—ï¼š**BigInteger**ï¼ˆä»»æ„ç²¾åº¦æ•´æ•°ï¼‰å’Œ **BigDecimal**ï¼ˆä»»æ„ç²¾åº¦æµ®ç‚¹æ•°ï¼‰ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒçŸ¥è¯†ç‚¹å’Œä½¿ç”¨è¦ç‚¹ï¼š

---

#### ä¸€ã€BigIntegerï¼ˆå¤§æ•´æ•°ï¼‰
å½“æ•°å­—è¶…è¿‡ `long` çš„èŒƒå›´ï¼ˆ-9,223,372,036,854,775,808 åˆ° 9,223,372,036,854,775,807ï¼‰æ—¶ä½¿ç”¨ã€‚

##### 1. åˆ›å»º BigInteger
```java
// é€šè¿‡å­—ç¬¦ä¸²åˆ›å»ºï¼ˆæœ€å¸¸ç”¨ï¼‰
BigInteger big1 = new BigInteger("123456789012345678901234567890");

// é€šè¿‡å­—èŠ‚æ•°ç»„åˆ›å»º
byte[] bytes = {0x12, 0x34, 0x56};
BigInteger big2 = new BigInteger(1, bytes); // å‚æ•°1ï¼šæ­£è´Ÿå·ï¼ˆ1ä¸ºæ­£ï¼‰

// ä½¿ç”¨å¸¸é‡
BigInteger zero = BigInteger.ZERO;
BigInteger one = BigInteger.ONE;
BigInteger ten = BigInteger.TEN;
```

##### 2. åŸºç¡€è¿ç®—ï¼ˆè¿”å›æ–°å¯¹è±¡ï¼‰
```java
BigInteger a = new BigInteger("1000000000000");
BigInteger b = new BigInteger("999999999999");

BigInteger sum = a.add(b);          // åŠ æ³•
BigInteger diff = a.subtract(b);    // å‡æ³•
BigInteger product = a.multiply(b); // ä¹˜æ³•
BigInteger quotient = a.divide(b);  // é™¤æ³•
BigInteger mod = a.mod(b);          // å–æ¨¡
BigInteger pow = a.pow(100);        // å¹‚è¿ç®—ï¼ˆ100æ¬¡æ–¹ï¼‰
```

##### 3. ä½è¿ç®—
```java
BigInteger and = a.and(b);       // ä¸
BigInteger or = a.or(b);         // æˆ–
BigInteger xor = a.xor(b);       // å¼‚æˆ–
BigInteger not = a.not();        // é
BigInteger shiftLeft = a.shiftLeft(3);   // å·¦ç§»3ä½
```

##### 4. æ¯”è¾ƒæ“ä½œ
```java
int cmp = a.compareTo(b); // a<b: -1, a==b: 0, a>b: 1
boolean isEqual = a.equals(b); 
boolean isProbablePrime = a.isProbablePrime(100); // æ¦‚ç‡æ€§è´¨æ•°æ£€æµ‹ï¼ˆ100ä¸ºç¡®å®šæ€§å‚æ•°ï¼‰
```

---

#### äºŒã€BigDecimalï¼ˆé«˜ç²¾åº¦æµ®ç‚¹æ•°ï¼‰
ç”¨äºéœ€è¦ç²¾ç¡®è®¡ç®—çš„åœºæ™¯ï¼ˆå¦‚é‡‘èè®¡ç®—ï¼‰ï¼Œé¿å… `double` çš„ç²¾åº¦æŸå¤±ã€‚

##### 1. åˆ›å»º BigDecimal
```java
// æ¨èä½¿ç”¨å­—ç¬¦ä¸²æ„é€ ï¼ˆé¿å…doubleç²¾åº¦é—®é¢˜ï¼‰
BigDecimal dec1 = new BigDecimal("123.45678901234567890");

// ä½¿ç”¨doubleï¼ˆå¯èƒ½å¼•å…¥ç²¾åº¦è¯¯å·®ï¼‰
BigDecimal dec2 = BigDecimal.valueOf(0.1); // æ¨èæ–¹å¼
BigDecimal dec3 = new BigDecimal(0.1);     // ä¸æ¨èï¼šå®é™…å€¼â‰ˆ0.10000000000000000555...

// ä½¿ç”¨æ•´æ•°åˆ›å»º
BigDecimal fromInt = new BigDecimal(100);
```

##### 2. ç²¾ç¡®è¿ç®—ï¼ˆå¿…é¡»æŒ‡å®šèˆå…¥æ¨¡å¼ï¼‰
```java
BigDecimal x = new BigDecimal("10.00");
BigDecimal y = new BigDecimal("3.00");

BigDecimal sum = x.add(y);       // 13.00
BigDecimal diff = x.subtract(y); // 7.00
BigDecimal prod = x.multiply(y); // 30.00

// é™¤æ³•å¿…é¡»æŒ‡å®šèˆå…¥è§„åˆ™
BigDecimal quotient = x.divide(y, 4, RoundingMode.HALF_UP); // 3.3333ï¼ˆä¿ç•™4ä½å°æ•°ï¼‰

// å¼€å¹³æ–¹ï¼ˆéœ€æŒ‡å®šç²¾åº¦ï¼‰
BigDecimal sqrt = x.sqrt(new MathContext(10)); // 3.16227766
```

##### 3. èˆå…¥æ¨¡å¼ï¼ˆRoundingModeï¼‰
| æ¨¡å¼             | è¡Œä¸ºç¤ºä¾‹ (9.5) | è¡Œä¸ºç¤ºä¾‹ (9.4) |
| ---------------- | -------------- | -------------- |
| `UP`             | 10             | 10             |
| `DOWN`           | 9              | 9              |
| `CEILING`        | 10             | 10             |
| `FLOOR`          | 9              | 9              |
| `HALF_UP` (å¸¸ç”¨) | 10             | 9              |
| `HALF_DOWN`      | 9              | 9              |
| `HALF_EVEN`      | 10             | 9              |

##### 4. ç²¾åº¦æ§åˆ¶
```java
BigDecimal num = new BigDecimal("123.456789");

// è®¾ç½®ç²¾åº¦ï¼ˆä¿ç•™4ä½å°æ•°ï¼Œå››èˆäº”å…¥ï¼‰
BigDecimal rounded = num.setScale(4, RoundingMode.HALF_UP); // 123.4568

// è·å–ç²¾åº¦ä¿¡æ¯
int scale = num.scale();       // å°æ•°ä½æ•°ï¼š6
int precision = num.precision(); // æ€»ä½æ•°ï¼š9
```

---

#### ä¸‰ã€å…³é”®æ³¨æ„äº‹é¡¹

##### 1. ä¸å¯å˜æ€§ï¼ˆImmutabilityï¼‰
```java
BigInteger a = BigInteger.ONE;
a.add(BigInteger.ONE); // æ“ä½œæ— æ•ˆï¼
System.out.println(a); // è¾“å‡º 1

// æ­£ç¡®ï¼šèµ‹å€¼ç»™æ–°å˜é‡
BigInteger b = a.add(BigInteger.ONE); // b=2
```

##### 2. æ€§èƒ½è€ƒè™‘
- å¤§æ•°è¿ç®—æ¯”åŸºæœ¬ç±»å‹æ…¢ **100-1000å€**
- é¿å…åœ¨æ€§èƒ½æ•æ„Ÿåœºæ™¯ä½¿ç”¨
- ä¼˜åŒ–æ–¹æ¡ˆï¼š
  ```java
  // åï¼šå¾ªç¯å†…é‡å¤åˆ›å»º
  for (int i=0; i<1000; i++) {
      BigDecimal sum = a.add(b);
  }
  
  // å¥½ï¼šæå‰è®¡ç®—
  BigDecimal sum = a.add(b);
  for (int i=0; i<1000; i++) {
      // ä½¿ç”¨å·²è®¡ç®—çš„sum
  }
  ```

##### 3. ç­‰å€¼æ¯”è¾ƒé™·é˜±
```java
BigDecimal d1 = new BigDecimal("1.0");
BigDecimal d2 = new BigDecimal("1.00");

d1.equals(d2);  // falseï¼ˆæ¯”è¾ƒå€¼å’Œç²¾åº¦ï¼‰
d1.compareTo(d2) == 0; // trueï¼ˆä»…æ¯”è¾ƒæ•°å€¼ï¼‰
```

##### 4. é™¤æ³•å¼‚å¸¸
```java
BigDecimal a = new BigDecimal("10");
BigDecimal b = new BigDecimal("3");

a.divide(b); // æŠ›å‡º ArithmeticExceptionï¼ˆæ— é™å°æ•°ï¼‰

// æ­£ç¡®ï¼šæŒ‡å®šç²¾åº¦å’Œèˆå…¥æ¨¡å¼
a.divide(b, 10, RoundingMode.HALF_UP);
```

---

#### å››ã€æœ€ä½³å®è·µç¤ºä¾‹ï¼šé‡‘èè®¡ç®—
```java
import java.math.BigDecimal;
import java.math.RoundingMode;

public class FinancialCalculator {
    // è´§å¸è®¡ç®—å¿…é¡»ä½¿ç”¨BigDecimal
    private static final BigDecimal TAX_RATE = new BigDecimal("0.20");
    
    public static void main(String[] args) {
        BigDecimal price = new BigDecimal("99.99");
        int quantity = 5;
        
        // è®¡ç®—å°è®¡ï¼ˆå•ä»·Ã—æ•°é‡ï¼‰
        BigDecimal subtotal = price.multiply(BigDecimal.valueOf(quantity));
        
        // è®¡ç®—ç¨è´¹ï¼ˆå°è®¡Ã—ç¨ç‡ï¼‰
        BigDecimal tax = subtotal.multiply(TAX_RATE)
                                 .setScale(2, RoundingMode.HALF_UP);
        
        // è®¡ç®—æ€»é¢ï¼ˆå°è®¡+ç¨è´¹ï¼‰
        BigDecimal total = subtotal.add(tax);
        
        // æ ¼å¼åŒ–è¾“å‡º
        System.out.println("å°è®¡: Â¥" + subtotal);
        System.out.println("ç¨è´¹ (20%): Â¥" + tax);
        System.out.println("æ€»è®¡: Â¥" + total);
    }
}
```

**è¾“å‡º**ï¼š
```
å°è®¡: Â¥499.95
ç¨è´¹ (20%): Â¥100.00
æ€»è®¡: Â¥599.95
```

---

#### äº”ã€ä½¿ç”¨åœºæ™¯å¯¹æ¯”
| **åœºæ™¯**       | **æ¨èç±»å‹** | **ç†ç”±**                |
| -------------- | ------------ | ----------------------- |
| è¶…å¤§æ•´æ•°è¿ç®—   | BigInteger   | è¶…å‡º long èŒƒå›´ï¼ˆ>19ä½ï¼‰ |
| é‡‘èè´§å¸è®¡ç®—   | BigDecimal   | é¿å…æµ®ç‚¹ç²¾åº¦é—®é¢˜        |
| ç§‘å­¦è®¡ç®—       | double       | æ€§èƒ½ä¼˜å…ˆï¼Œæ¥å—å¾®å°è¯¯å·®  |
| ç®€å•è®¡æ•°å™¨     | int/long     | æ€§èƒ½æœ€ä½³                |
| é«˜ç²¾åº¦ç§‘å­¦è®¡ç®— | BigDecimal   | éœ€è¦ç²¾ç¡®æ§åˆ¶ç²¾åº¦æ—¶      |

> **é»„é‡‘æ³•åˆ™**ï¼š
> 1. é‡‘èè®¡ç®— â†’ **å¿…é¡»ç”¨ BigDecimal**
> 2. è¶…è¿‡ 19 ä½æ•´æ•° â†’ **å¿…é¡»ç”¨ BigInteger**
> 3. é™¤æ³•æ“ä½œ â†’ **å¿…é¡»æŒ‡å®šèˆå…¥æ¨¡å¼**
> 4. æ¯”è¾ƒæ•°å€¼ â†’ **ä½¿ç”¨ compareTo() è€Œé equals()**
> 5. æ€§èƒ½ä¼˜åŒ– â†’ **é¿å…åœ¨å¾ªç¯å†…é‡å¤åˆ›å»º**

é€šè¿‡åˆç†ä½¿ç”¨ BigInteger å’Œ BigDecimalï¼Œå¯ç¡®ä¿æ•°å€¼è®¡ç®—çš„ç²¾ç¡®æ€§å’Œå®‰å…¨æ€§ï¼Œå°¤å…¶åœ¨é‡‘èã€å¯†ç å­¦ç­‰å…³é”®é¢†åŸŸã€‚



## <span id="array">Java æ•°ç»„è¯¦è§£</span>

#### 1. **æ•°ç»„çš„æ¦‚å¿µ**
- **å®šä¹‰**ï¼šæ•°ç»„æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨**å›ºå®šå¤§å°**ã€**ç›¸åŒç±»å‹**å…ƒç´ çš„çº¿æ€§æ•°æ®ç»“æ„ã€‚
- **ç‰¹ç‚¹**ï¼š
  - é•¿åº¦å›ºå®šï¼ˆåˆ›å»ºåä¸å¯æ”¹å˜ï¼‰ã€‚
  - å†…å­˜è¿ç»­åˆ†é…ï¼Œæ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚
  - ç´¢å¼•ä» `0` å¼€å§‹ï¼Œåˆ° `length - 1` ç»“æŸã€‚
  - å¯å­˜å‚¨åŸºæœ¬ç±»å‹ï¼ˆå¦‚ `int`, `char`ï¼‰æˆ–å¯¹è±¡ç±»å‹ï¼ˆå¦‚ `String`, è‡ªå®šä¹‰ç±»ï¼‰ã€‚

---

#### 2. **æ•°ç»„çš„å£°æ˜ä¸åˆå§‹åŒ–**
```java
// å£°æ˜ï¼ˆæœªåˆ†é…å†…å­˜ï¼‰
int[] arr1;      // æ¨èæ–¹å¼
int arr2[];      // å…¼å®¹Cé£æ ¼ï¼ˆä¸æ¨èï¼‰

// åˆå§‹åŒ–æ–¹å¼
int[] arr3 = new int[5];           // åŠ¨æ€åˆå§‹åŒ–ï¼šé»˜è®¤å€¼ï¼ˆ0/null/falseï¼‰
int[] arr4 = {1, 2, 3, 4};         // é™æ€åˆå§‹åŒ–ï¼šç›´æ¥èµ‹å€¼
int[] arr5 = new int[]{5, 6, 7};   // åŒ¿åæ•°ç»„ï¼ˆæ— éœ€æŒ‡å®šé•¿åº¦ï¼‰
```

---

#### 3. **è®¿é—®ä¸éå†**
```java
// è®¿é—®å…ƒç´ 
int first = arr4[0];  // è·å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆå€¼=1ï¼‰
arr4[1] = 20;         // ä¿®æ”¹ç¬¬äºŒä¸ªå…ƒç´ 

// éå†æ•°ç»„
for (int i = 0; i < arr4.length; i++) {
    System.out.println(arr4[i]);
}

// å¢å¼ºforå¾ªç¯ï¼ˆåªè¯»ï¼‰
for (int num : arr4) {
    System.out.println(num);
}
```

---

#### 4. **å¤šç»´æ•°ç»„**
```java
// äºŒç»´æ•°ç»„ï¼ˆæ•°ç»„çš„æ•°ç»„ï¼‰
int[][] matrix = {
    {1, 2, 3},
    {4, 5},
    {6, 7, 8, 9}
};

// è®¿é—®å…ƒç´ 
int value = matrix[0][2];  // å€¼=3

// éå†äºŒç»´æ•°ç»„
for (int i = 0; i < matrix.length; i++) {
    for (int j = 0; j < matrix[i].length; j++) {
        System.out.print(matrix[i][j] + " ");
    }
    System.out.println();
}
```

---

#### 5. **å¸¸è§æ“ä½œä¸å·¥å…·ç±»**
- **æ•°ç»„å¤åˆ¶**ï¼š
  ```java
  int[] copy = Arrays.copyOf(arr4, arr4.length);  // å¤åˆ¶æ•´ä¸ªæ•°ç»„
  System.arraycopy(src, 0, dest, 0, src.length); // é«˜æ•ˆå¤åˆ¶
  ```

- **æ’åºä¸æŸ¥æ‰¾**ï¼š
  
  ```java
  Arrays.sort(arr4);                          // å‡åºæ’åº
  int index = Arrays.binarySearch(arr4, 3);   // äºŒåˆ†æŸ¥æ‰¾ï¼ˆéœ€å…ˆæ’åºï¼‰
  ```
  
- **å…¶ä»–å·¥å…·æ–¹æ³•**ï¼š
  
  ```java
  Arrays.fill(arr4, 0);       // å¡«å……æ‰€æœ‰å…ƒç´ ä¸º0
  Arrays.equals(arr1, arr2);   // æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„å†…å®¹
  String str = Arrays.toString(arr4); // è½¬å­—ç¬¦ä¸²è¾“å‡º
  ```

---

#### 6. **æ³¨æ„äº‹é¡¹**
- **ç´¢å¼•è¶Šç•Œ**ï¼šè®¿é—® `arr[-1]` æˆ– `arr[arr.length]` ä¼šæŠ›å‡º `ArrayIndexOutOfBoundsException`ã€‚
- **ç©ºæŒ‡é’ˆå¼‚å¸¸**ï¼šæœªåˆå§‹åŒ–çš„æ•°ç»„å˜é‡ï¼ˆå¦‚ `int[] arr;`ï¼‰è°ƒç”¨æ–¹æ³•ä¼šæŠ›å‡º `NullPointerException`ã€‚
- **é•¿åº¦å›ºå®š**ï¼šæ•°ç»„å¤§å°ä¸å¯å˜ï¼Œéœ€åŠ¨æ€æ‰©å®¹æ—¶å»ºè®®ä½¿ç”¨ `ArrayList`ã€‚

---

#### 7. **ç¤ºä¾‹ä»£ç **
```java
public class ArrayExample {
    public static void main(String[] args) {
        // åˆå§‹åŒ–æ•°ç»„
        int[] numbers = {10, 20, 30, 40};
        
        // ä¿®æ”¹å…ƒç´ 
        numbers[1] = 200;
        
        // éå†æ‰“å°
        for (int num : numbers) {
            System.out.print(num + " ");  // è¾“å‡º: 10 200 30 40
        }
        
        // å¤šç»´æ•°ç»„
        String[][] names = {{"Alice", "Bob"}, {"Charlie", "David"}};
        System.out.println(names[1][0]);  // è¾“å‡º: Charlie
    }
}
```

---

#### æ€»ç»“
| **ç‰¹æ€§**     | **è¯´æ˜**                          |
| ------------ | --------------------------------- |
| å›ºå®šé•¿åº¦     | åˆ›å»ºåå¤§å°ä¸å¯å˜                  |
| ç±»å‹ç»Ÿä¸€     | æ‰€æœ‰å…ƒç´ å¿…é¡»æ˜¯ç›¸åŒç±»å‹            |
| é«˜æ•ˆè®¿é—®     | é€šè¿‡ç´¢å¼•ç›´æ¥è®¿é—®ï¼Œæ—¶é—´å¤æ‚åº¦ O(1) |
| å†…å­˜è¿ç»­     | å­˜å‚¨ç©ºé—´è¿ç»­åˆ†é…                  |
| å·¥å…·ç±»æ”¯æŒ   | ä½¿ç”¨ `java.util.Arrays` ç®€åŒ–æ“ä½œ  |
| åŠ¨æ€æ›¿ä»£æ–¹æ¡ˆ | éœ€åŠ¨æ€å¤§å°æ—¶ä½¿ç”¨ `ArrayList`      |

æŒæ¡æ•°ç»„æ˜¯Javaç¼–ç¨‹çš„åŸºç¡€ï¼Œç†è§£å…¶åº•å±‚æœºåˆ¶èƒ½æœ‰æ•ˆæå‡ä»£ç æ•ˆç‡ï¼



[**è¿”å›é¡¶éƒ¨**](#top)

